let ALLOW_PARAM_OVERRIDE_FROM_URL=!1,SUPPRESS_WINEBOOT=!0,ROOT="/root",STORAGE_DROPBOX="DROPBOX",STORAGE_LOCAL_STORAGE="LOCAL_STORAGE",STORAGE_MEMORY="MEMORY",ONDEMAND_DEFAULT="unset",ONDEMAND_ROOT="root",DROPBOX_APP_KEY="put key in here",RECEIVE_URL="http://put url in here/oauth_receiver.html",DEFAULT_AUTO_RUN=!0,DEFAULT_SOUND_ENABLED=!0,DEFAULT_APP_DIRECTORY=ROOT+"/files/",DEFAULT_BPP=32,DEFAULT_ROOT_ZIP_FILE="boxedwine.zip",Config={};Config.locateRootBaseUrl=document.getElementById("baseUri").value,Config.locateAppBaseUrl=document.getElementById("baseUri").value,Config.locateOverlayBaseUrl="",Config.urlParams="",Config.storageMode=STORAGE_LOCAL_STORAGE,Config.isRunningInline=!1,Config.showUploadDownload=!1;var selectedItem,selectedFilename,isRunning=!1,uniqueDirs={},timer=null,index=0,files=[],client=null,alreadyBuiltFileSystem=!1,ae=document.createElement("a");document.body.appendChild(ae),ae.style="display: none";var fileFS,url=null,statusElement=document.getElementById("status"),progressElement=document.getElementById("progress"),spinnerElement=document.getElementById("spinner"),flag_r={isReadable:function(){return!0},isWriteable:function(){return!1},isTruncating:function(){return!1},isAppendable:function(){return!1},isSynchronous:function(){return!1},isExclusive:function(){return!1},pathExistsAction:function(){return 0},pathNotExistsAction:function(){return 1}};function setConfiguration(){Config.appDirPrefix=DEFAULT_APP_DIRECTORY,Config.isAutoRunSet=getAutoRun(),Config.rootZipFile="boxedwine.zip",Config.extraZipFiles="",Config.appZipFile="assembler.zip",Config.appPayload=getPayload("app-payload"),Config.extraPayload="",Config.Program="cmd.bat",Config.WorkingDir=getWorkingDirectory(),Config.isSoundEnabled=getSound(),Config.bpp=getBitsPerPixel(),Config.useRangeRequests=getUseRangeRequests(),Config.glext=getGLExtensions(),Config.cpu=getCPU()}function allowParameterOverride(){return Config.urlParams.length>0||ALLOW_PARAM_OVERRIDE_FROM_URL}function getCPU(){var e="";return(e=allowParameterOverride()?"p2"==e?"p2":"p3"==e?"p3":"":"").length>0&&console.log("setting CPU to: "+e),e}function getBitsPerPixel(){var e="";return e=allowParameterOverride()?"8"==e?8:"16"==e?16:"32"==e?32:DEFAULT_BPP:DEFAULT_BPP,console.log("setting BPP to: "+e),e}function getGLExtensions(){var e="";return allowParameterOverride()?e.length>6&&(e.startsWith("%22")&&e.endsWith("%22")||e.startsWith("%27")&&e.endsWith("%27")?e='"'+(e=(e=e.substring(3,e.length-3)).split("%20").join(" "))+'"':console.log("glext paramater must be in quoted string")):e="",e.length>0&&console.log("setting glext to: "+e),e}function getAutoRun(){var e="";return!(e=allowParameterOverride()?"true"==e||"false"!=e&&DEFAULT_AUTO_RUN:DEFAULT_AUTO_RUN)&&Config.isRunningInline&&(console.log("parameter mismatch. Auto run can't be false if running inline. Resetting auto run to true"),e=!0),console.log("setting auto run to: "+e),e}function getPayload(e){var t="";return allowParameterOverride()||(t=""),t}function getUseRangeRequests(){var e="";return allowParameterOverride()&&e==ONDEMAND_ROOT||(e=ONDEMAND_DEFAULT),console.log("setting ondemand to: "+e),e}function getSound(){var e="";return e=allowParameterOverride()?"true"==e||"false"!=e&&DEFAULT_SOUND_ENABLED:DEFAULT_SOUND_ENABLED,console.log("setting sound to: "+e),e}function getWorkingDirectory(){var e="";return e.startsWith("c:/")?(e="/home/username/.wine/dosdevices/c:/"+e.substring(3),console.log("setting working directory to: "+e)):e.startsWith("d:/")?(e="/home/username/.wine/dosdevices/d:/"+e.substring(3),console.log("setting working directory to: "+e)):console.log("unable to set work directory"),e}function getAppZipFile(e){var t="";return allowParameterOverride()&&""!==t?(t.endsWith(".zip")||(t+=".zip"),console.log("setting "+e+" zip file to: "+t)):(t="",console.log("not setting "+e+" zip file")),t}function getRootZipFile(e){var t="";return allowParameterOverride()&&""!==t?t.endsWith(".zip")||(t+=".zip"):t=DEFAULT_ROOT_ZIP_FILE,console.log("setting "+e+" zip file to: "+t),t}function getZipFileList(e){var t=[];if(Config.isRunningInline){let e="";e.length>0&&(e.endsWith(".zip")||(e+=".zip"),t.push(e))}if(allowParameterOverride()&&""!==i){if("".length>0)for(var r="".split(";"),n=0;n<r.length;n++){var i=r[n];i.endsWith(".zip")||(i+=".zip"),t.push(i)}}else console.log("not setting "+e+" zip file(s)");return t.length>0&&console.log("setting "+e+" zip file(s) to: "+t),t}function auth_callback(e){if(e)alert("Authentication error: "+e);else if(client.isAuthenticated()){if(alreadyBuiltFileSystem)return;alreadyBuiltFileSystem=!0,document.getElementById("startbtn").disabled=!0,document.getElementById("startbtn").textContent="Syncing...",console.log("authenticated!"),buildFileSystem(new BrowserFS.FileSystem.InMemory,!0)}else alert("unable to authenticate")}function dropboxLogin(){(client=new Dropbox.Client({key:DROPBOX_APP_KEY})).authDriver(new Dropbox.AuthDriver.Popup({receiverUrl:RECEIVE_URL})),client.authenticate(auth_callback),document.getElementById("startbtn").textContent="Start"}function initFileSystem(){var e;(console.log("Use Storage mode: "+Config.storageMode),Config.storageMode===STORAGE_LOCAL_STORAGE)?(BrowserFS.FileSystem.LocalStorage.isAvailable?e=new BrowserFS.FileSystem.LocalStorage:(e=new BrowserFS.FileSystem.InMemory,console.log("Switching to In Memory store as LocalStorage is not available")),buildFileSystem(e,!1),Module.writableStorage=e):buildFileSystem(new BrowserFS.FileSystem.InMemory,!1)}function syncGet(e,t,r){let n=new XMLHttpRequest;n.open("GET",Config.locateRootBaseUrl+e,!1);let i=null,o=null;n.overrideMimeType("text/plain; charset=x-user-defined");let a="bytes="+t+"-"+(t+r-1);if(n.setRequestHeader("Range",a),n.onreadystatechange=function(e){if(4!==n.readyState);else{if(200===n.status||206===n.status){const e=n.responseText;i=new Int8Array(e.length);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);return}o="XHR error."}},n.send(),o)throw o;return i}function getFileSize(e){return new Promise((function(t,r){const n=new XMLHttpRequest;n.open("HEAD",Config.locateRootBaseUrl+e),n.onreadystatechange=function(e){if(4===n.readyState){if(200!==n.status)throw new Error("Unable to get file size");try{t(parseInt(n.getResponseHeader("Content-Length")||"-1",10))}catch(e){throw e}}},n.onerror=function(){r(Error("Network Error"))},n.send()})).then((function(e,t){if(null!=t)throw new Error(t);return e}),(function(e){throw new Error("Something when wrong when getting file size")}))}function getCentralOffset(e){var t=0,r=e.byteLength-22,n=Math.max(0,r-65536),i=0;do{if(r<n)throw new Error("not a zip file?");t=r--,i=e[t++]|e[t++]<<8|(e[t++]|e[t++]<<8)<<16}while(101010256!=i);t=t+10-4;e[t++],e[t++];return t=t+16-12,e[t++]|e[t++]<<8|(e[t++]|e[t++]<<8)<<16}function buildFileSystem(e,t){spinnerElement.style.display="",spinnerElement.hidden=!1;var r=BrowserFS.BFSRequire("buffer").Buffer;buildExtraFileSystems(r,(function(n){buildAppFileSystems((function(i){if(Config.useRangeRequests==ONDEMAND_ROOT)buildRemoteZipFile(Config.rootZipFile,(function(r){buildBrowserFileSystem(e,t,i,n,r)}));else{var o={};o[Config.rootZipFile]=null,BrowserFS.FileSystem.XmlHttpRequest.Create({index:o,baseUrl:Config.locateRootBaseUrl},(function(o,a){o&&console.log(o);var s=new BrowserFS.FileSystem.MountableFileSystem;s.mount("/temp",a),s.readFile("/temp/"+Config.rootZipFile,null,flag_r,(function(o,a){o&&console.log(o),BrowserFS.FileSystem.ZipFS.Create({zipData:new r(a)},(function(r,o){r&&console.log(r),buildBrowserFileSystem(e,t,i,n,o)})),s=null}))}))}}))}))}function buildRemoteZipFile(e,t){var r=BrowserFS.BFSRequire("buffer").Buffer;getFileSize(e).then((function(n){let i=Number(n),o=i>1e5?1e5:i-22,a=syncGet(e,i-o,o),s=getCentralOffset(new Uint8Array(a)),c=syncGet(e,s,i-s);BrowserFS.FileSystem.ZipFS.Create({name:Config.locateRootBaseUrl+e,zipData:new r(c)},(function(e,r){e&&console.log(e),t(r)}))}))}function getBase64Data(e){let t=atob(e),r=t.length;for(var n=new Uint8Array(r),i=0;i<r;i++)n[i]=t.charCodeAt(i);return n}function buildAppFileSystems(e){var t=BrowserFS.BFSRequire("buffer").Buffer;if(Config.appPayload.length>0){let r=getBase64Data(Config.appPayload);BrowserFS.FileSystem.ZipFS.Create({zipData:new t(r)},(function(t,r){t&&console.log(t);let n=new BrowserFS.FileSystem.FolderAdapter("/",r);e(n)}))}else if(Config.appZipFile.length>0){var r={};r[Config.appZipFile]=null;var n=new BrowserFS.FileSystem.MountableFileSystem;BrowserFS.FileSystem.XmlHttpRequest.Create({index:r,baseUrl:Config.locateAppBaseUrl},(function(r,i){r&&console.log(r),n.mount("/temp",i),n.readFile("/temp/"+Config.appZipFile,null,flag_r,(function(r,i){r&&console.log(r),BrowserFS.FileSystem.ZipFS.Create({zipData:new t(i)},(function(t,r){t&&console.log(t);let i=new BrowserFS.FileSystem.FolderAdapter("/",r);e(i),n=null}))}))}))}else{let t=new BrowserFS.FileSystem.FolderAdapter("/",new BrowserFS.FileSystem.InMemory);e(t)}}function buildExtraFileSystems(e,t){var r=[];if(Config.extraPayload.length>0){let n=getBase64Data(Config.extraPayload);BrowserFS.FileSystem.ZipFS.Create({zipData:new e(n)},(function(e,n){e&&console.log(e),r.push(n),t(r)}))}else if(Config.extraZipFiles.length>0)for(let o=0;o<Config.extraZipFiles.length;o++){var n={};n[Config.extraZipFiles[o]]=null;var i=new BrowserFS.FileSystem.MountableFileSystem;BrowserFS.FileSystem.XmlHttpRequest.Create({index:n,baseUrl:Config.locateOverlayBaseUrl},(function(n,a){n&&console.log(n),i.mount("/temp",a),i.readFile("/temp/"+Config.extraZipFiles[o],null,flag_r,(function(n,o){n&&console.log(n),BrowserFS.FileSystem.ZipFS.Create({zipData:new e(o)},(function(e,n){e&&console.log(e),r.push(n),r.length==Config.extraZipFiles.length&&t(r),i=null}))}))}))}else t(r)}function buildBrowserFileSystem(e,t,r,n,i){FS.createPath(FS.root,"root",FS.createPath),FS.createPath("/root","base",!0,!0),FS.createPath("/root","files",!0,!0);BrowserFS.FileSystem.OverlayFS.Create({readable:i,writable:new BrowserFS.FileSystem.InMemory},(function(i,o){i&&console.log(i),SUPPRESS_WINEBOOT&&deleteFile(o,"/lib/wine/wineboot.exe.so"),r.initialize((function(i){i&&console.log(i),BrowserFS.FileSystem.OverlayFS.Create({readable:r,writable:e},(function(e,r){if(e&&console.log(e),t){var i=new BrowserFS.FileSystem.AsyncMirror(r,new BrowserFS.FileSystem.Dropbox(client));i.initialize((function(e){e&&console.log(e),postBuildFileSystem(o,i,n)}))}else postBuildFileSystem(o,r,n)}))}))}))}function postBuildFileSystem(e,t,r){var n=new BrowserFS.FileSystem.MountableFileSystem;n.mount("/root/base",e),n.mount(Config.appDirPrefix.substring(0,Config.appDirPrefix.length-1),t);var i=new BrowserFS.EmscriptenFS;BrowserFS.initialize(n),FS.mount(i,{root:"/root"},"/root");for(let e=0;e<r.length;e++)recursiveCopy(r[e],Config.extraZipFiles[e],"/");if(r=null,Config.showUploadDownload&&(document.getElementById("uploadbtn").style.display="",document.getElementById("downloadbtn").style.display=""),spinnerElement.style.display="none",Config.storageMode===STORAGE_DROPBOX)startEmulator();else if(Config.isAutoRunSet)start();else{var o=document.getElementById("startbtn");o.disabled=!1,o.style.display="";var a=document.getElementById("soundToggle");Config.isSoundEnabled&&(a.checked=!0),document.getElementById("sound-checkbox").style.display=""}}function deleteFile(e,t){try{e.unlinkSync(t)}catch(e){console.log("Unable to delete:"+t+" error:"+e.message)}}function createFolders(e,t){for(var r="",n=0;n<t.length;n++)t[n].length>0&&(r=r+"/"+t[n],e.mkdirSync(r))}function recursiveCopy(e,t,r){var n=null==t?"":"/"+t.substring(0,t.length-4),i=BrowserFS.BFSRequire("path");!function e(t,r,n){createFolderIfNecessary(r,n),t.readdirSync(r).forEach((function(o){var a=i.resolve(r,o);a.startsWith("/__MACOSX")||a.endsWith(".DS_Store")||(t.statSync(a).isDirectory()?e(t,a,n):createFileIfNecessary(t,a,n))}))}(e,r,n)}function createFileIfNecessary(e,t,r){var n=t;t.startsWith(r)&&(t=t.substring(r.length));var i=extractFirstPartOfPath(t);if(i.length>0){var o=extractLastPartOfPath(t),a=e.readFileSync(n,null,flag_r);try{console.log("creating: root/base"+i+"/"+o),FS.createDataFile("root/base"+i,o,a,!0,!0)}catch(e){if("File exists"===e.message||"FS error"===e.message)try{FS.unlink("root/base"+i+"/"+o),FS.createDataFile("root/base"+i,o,a,!0,!0)}catch(e){console.log("file replace error:"+e.message+" for: "+i+"/"+o)}else console.log("file creation error:"+e.message+" for: "+i+"/"+o)}}}function createFolderIfNecessary(e,t){e.startsWith(t)&&(e=e.substring(t.length));var r=extractFirstPartOfPath(e),n=extractLastPartOfPath(e);if(r.length>0)try{FS.lookupPath("/root/base"+r+"/"+n,{follow:!0})}catch(e){if("No such file or directory"==e.message||"FS error"===e.message)try{FS.createPath("/root/base/"+r,n,!0,!0)}catch(e){console.log("Directory creation error:"+e.message+" for: "+r+"/"+n)}else"File exists"!=e.message&&console.log("Directory creation error:"+e.message+" for: "+r+"/"+n)}}function start(){isRunning||(Config.isRunningInline&&(document.getElementById("inline-runbtn").style.display="none",document.getElementById("inline").style.display=""),Config.storageMode===STORAGE_DROPBOX?null!=client&&client.isAuthenticated()?initFileSystem():dropboxLogin():startEmulator())}function startEmulator(){isRunning=!0;for(var e=getEmulatorParams(),t=0;t<e.length;t++)Module.arguments.push(e[t]);Module.removeRunDependency("setupBoxedWine")}function loadScreen(){if(Config.isAutoRunSet||Config.isRunningInline){var e=document.getElementById("canvas"),t=e.getContext("2d");t.font="40px Arial",t.textAlign="center",t.fillText("Loading...",e.width/2.5,e.height/2)}}var initialSetup=function(){console.log("running initial setup"),setConfiguration(),Module.addRunDependency("setupBoxedWine"),initFileSystem()};function getExecutable(){var e="";return allowParameterOverride()&&""!==e?((e.startsWith("%22")&&e.endsWith("%22")||e.startsWith("%27")&&e.endsWith("%27"))&&(e=e.substring(3,e.length-3)),e=e.split("%20").join(" "),console.log("setting program to execute to: "+e)):console.log("not setting program to execute"),e}var errorCallback=function(e){console.log(e)},dirCount=0;function getEntriesAsPromise(e,t,r){return new Promise(((n,i)=>{if(e.isDirectory){dirCount+=1;let o=e.createReader(),a=()=>{o.readEntries((e=>{e.length>0?(e.forEach((function(e){getEntriesAsPromise(e,t,r)})),a()):(0==(dirCount-=1)&&(Config.isAutoRunSet||isRunning||loadExeModal(t,r)),n())}),i)};a()}else{let n=e.fullPath,i=n.toUpperCase();r.push(n),(i.endsWith(".EXE")||i.endsWith(".BAT"))&&t.push(n),e.file((function(e){uploadFile(e,n,r)}),errorCallback)}}))}function loadExeModal(e,t){document.getElementById("modalLinkExe").click(),document.getElementById("message").innerHTML="<p>Uploading files...</p>",timer=setInterval((function(){readyCheck(e,t)}),100)}function populateModalExe(e){var t=document.getElementById("items");t.innerHTML="";let r=document.createElement("lu");for(let t=0;t<e.length;t++){let n=e[t],i=document.createElement("li");i.addEventListener("click",(function(e){execute(n)}),!1),i.innerHTML=n,r.appendChild(i)}t.appendChild(r)}function execute(e){document.getElementById("items");document.getElementById("openModalExeClick").click();var t=extractLastPartOfPath(e),r=extractFirstPartOfPath(e);Config.WorkingDir="/home/username/.wine/dosdevices/d:/"+r.substring(1),Config.Program=t,startEmulator()}function readyCheck(e,t){0==t.length&&(clearInterval(timer),document.getElementById("message").innerHTML="")}function isInSubDirectory(e,t){var r=FS.lookupPath(e,{follow:!0});if(null!=r&&r.node.isFolder)for(var n=FS.readdir(e).filter((function(e){return"."!==e&&".."!==e&&"__MACOSX"!==e})),i=0;i<n.length;i++)if(n[i]===t)return!0;return!1}function getEmulatorParams(){var e=["-root","/root/base"];if(e.push("-mount_drive"),e.push(Config.appDirPrefix),e.push("d"),e.push("-nozip"),Config.isSoundEnabled||e.push("-nosound"),Config.bpp!=DEFAULT_BPP&&(e.push("-bpp"),e.push(""+Config.bpp)),Config.cpu.length>0&&e.push("-"+Config.cpu),Config.glext.length>0&&(e.push("-glext"),e.push(Config.glext)),Config.WorkingDir.length>0)e.push("-w"),e.push(Config.WorkingDir);else if(Config.appPayload.length>0&&Config.Program.length>0&&"/"!=Config.Program.substring(0,1))e.push("-w"),e.push("/home/username/.wine/dosdevices/d:");else if(Config.appZipFile.length>0&&Config.Program.length>0&&"/"!=Config.Program.substring(0,1)){var t=Config.appZipFile.substring(0,Config.appZipFile.lastIndexOf("."));e.push("-w"),isInSubDirectory(Config.appDirPrefix,t)?e.push("/home/username/.wine/dosdevices/d:/"+t):e.push("/home/username/.wine/dosdevices/d:")}return e.push("/bin/wine"),Config.Program.length>0?(Config.Program.endsWith(".bat")&&(e.push("cmd"),e.push("/c")),e.push(Config.Program)):(e.push("explorer"),e.push("/desktop=shell")),console.log("Emulator params:"+e),e}function isHomeDirectory(e){return e.length>=10&&"/root/home"===e.substring(0,10)}function startWithFiles(e){for(let t=0;t<e.length;t++)uploadFile(e[t])}function uploadFile(e,t,r){let n=null;n=t?t.startsWith("/")?t.substring(1):t:0==e.webkitRelativePath.length?e.name:e.webkitRelativePath;var i=new FileReader;i.file_name=e.name,i.onload=function(){readFile(this.result,n,r)},i.readAsArrayBuffer(e)}function extractLastPartOfPath(e){return e.substring(e.lastIndexOf("/")+1,e.length)}function extractFirstPartOfPath(e){return e.substring(0,e.lastIndexOf("/"))}function extractFilenameExtension(e){return e.substring(e.lastIndexOf(".")+1,e.length)}function extractFilenameWithoutExtension(e){return e.substring(0,e.lastIndexOf("."))}function readFile(e,t,r){if("zip"===extractFilenameExtension(t).toLowerCase()){var n=extractFilenameWithoutExtension(t);if(!createFolder(Config.appDirPrefix,n))return;var i=Config.appDirPrefix+n,o=new JSZip(e);for(var a in o.files){if(null!=(e=o.file(a))){var s=e.asUint8Array();createFile(u=i+"/"+extractFirstPartOfPath(a),p=extractLastPartOfPath(a),s)}else{var c=a.substring(0,a.length-1),u=extractFirstPartOfPath(c),l=extractLastPartOfPath(c);createFolder(u=0==u.length?i:i+"/"+u,l)}}}else{for(var f=!1,d=0,h=Config.appDirPrefix,p=extractLastPartOfPath(t);!f;){var m=t.indexOf("/",d);if(-1==m)f=!0;else{var _=t.substring(d,m),g=h+_;_.length>0&&(null==uniqueDirs[g]&&_.length>0&&(createFolder(h,_),uniqueDirs[g]=""),h=h+_+"/"),d=m+1}}createFile(h.substring(0,h.length-1),p,new Uint8Array(e)),r&&r.pop(t)}}function calcBackupFilename(){var e=(new Date).toISOString();return e=".backup."+e.split(":").join(".")}function createFolder(e,t){var r=!0;try{console.log({parent:e,dir:t}),FS.createPath(e,t,!0,!0),console.log("Directory created :"+e+"/"+t)}catch(n){if("File exists"===n.message||"FS error"===n.message)if(console.log("Directory already exists! :"+e+t),confirm("Directory already exists: "+e+t+" continue?"))try{FS.rename(e+t,e+t+calcBackupFilename()),FS.createPath(e,t,!0,!0),console.log("Directory replaced: "+e+t)}catch(n){console.log("eef="+n),r=!1,alert("unable to create folder: "+e+t)}else r=!1;else console.log("ef="+n)}return r}function createFile(e,t,r){if(!e.includes("__MACOSX"))try{FS.createDataFile(e,t,r,!0,!0),console.log("File created :"+e+"/"+t)}catch(n){if("File exists"===n.message||"FS error"===n.message){if(console.log("File already exists!: "+e+t),confirm("File already exists: "+e+"/"+t+" replace?"))try{console.log("unlink"),console.log(e+"/"+t),FS.unlink(e+"/"+t),FS.createDataFile(e,t,r,!0,!0),console.log("File replaced: "+e+t)}catch(r){console.log("ee="+r),alert("unable to create file: "+e+t)}}else console.log("e="+n)}}function toggleSound(){var e=document.getElementById("soundToggle");Config.isSoundEnabled=e.checked}function toggleDirectory(e){var t=document.getElementById(e);null!=t&&("none"==t.style.display?(t.style.display="",document.getElementById(e+"-expand").style.display="none",document.getElementById(e+"-contract").style.display=""):(t.style.display="none",document.getElementById(e+"-expand").style.display="",document.getElementById(e+"-contract").style.display="none"))}function getParameter(e){var t="",r=Config.urlParams,n=r.length>0?"?"+r:window.location.href,i=n.indexOf("?")+1;if(i>0)for(var o=n.substring(i).split("&"),a=0;a<o.length;a++){var s=o[a].split("=");if(s[0]===e){t=s[1];break}}var c=t.lastIndexOf("#");return c>0&&(t=t.substring(0,c)),t}function select(e,t,r){null!=selectedItem&&(selectedItem.style.backgroundColor=""),(selectedItem=document.getElementById(e+"-data")).style.backgroundColor="#94c2c5";var n=t;null!=r&&(n+=r),document.getElementById("selectedItem").value=n,selectedFilename=r}function endsWith(e,t){return-1!==e.indexOf(t,e.length-t.length)}function extract(){null!=url&&window.URL.revokeObjectURL(url);var e=document.getElementById("selectedItem").value;if(null!=e&&e.length>0&&files.length>1){endsWith(e,"/")&&(e=e.substring(0,e.length-1));var t,r=!1;null!=selectedFilename?t=selectedFilename:(r=!0,t=e.substring(e.lastIndexOf("/")+1)+".zip");var n=getFile(e,r);url=window.URL.createObjectURL(n),ae.href=url,ae.download=t,ae.click()}}function done(){null!=url&&window.URL.revokeObjectURL(url)}function leaf(e){return'<tr><td ><span id="'+ ++index+'-data" onclick="select('+index+",'"+e.dir+"','"+e.filename+"')\">"+e.filename+"</span></td></tr>"}function branch(e){var t=e[index];index++;var r=t.dir,n=r.substring(0,r.length-1);n=n.substring(n.lastIndexOf("/")+1,n.length);var i="<tr>";for(i=(i=(i=(i=(i+="<td>")+'<span id="'+index+'-expand"><a onclick="toggleDirectory(\''+index+"')\"><strong>+</strong></a></span>")+'<span id="'+index+'-contract" style="display:none;"><a onclick="toggleDirectory(\''+index+"')\"><strong>-</strong></a></span>")+'<span id="'+index+'-data" onclick="select('+index+",'"+r+"', null)\">["+n+"]</span>")+"<div id='"+index+'\' style="display:none;">',i+="<table>";index<e.length;){var o=e[index];if(o.dir===t.dir)i+=leaf(o);else{if(parentDir(o.dir)!==t.dir)break;i+=branch(e,index)}}return i+="</table>",i+="</div>",i+="</td>",i+="</tr>"}function parentDir(e){return endsWith(e,"/")&&(e=e.substring(0,e.length-1)),e.substring(0,e.lastIndexOf("/")+1)}function buildTree(){document.getElementById("modalLink").click();var e=document.getElementById("tree");document.getElementById("selectedItem").value="",selectedFilename=null,files=[],e.innerHTML="",index=0,readFiles(Config.appDirPrefix,files);var t="<table>";t+=branch(files),t+="</table>",document.getElementById("loadStatus").style.display="none",e.innerHTML=t,toggleDirectory("1")}function readFiles(e,t){console.log("adding directory: "+e),t.push({dir:e,filename:""}),FS.readdir(e).filter((function(e){return"."!==e&&".."!==e})).forEach((function(r){FS.lookupPath(e+r,{follow:!0}).node.isFolder?readFiles(e+r+"/",t):(console.log("adding file: "+e+r),t.push({dir:e,filename:r}))}))}function startsWith(e,t){return e.slice(0,t.length)==t}function getFile(e,t){if(t){var r=new JSZip;return files.forEach((function(t){if(startsWith(t.dir,e))if(""!==t.filename){var n=t.dir+t.filename,i=FS.readFile(n,{encoding:"binary"});r.file(n.substring(e.length),i)}else r.file(t.dir.substring(e.length),null,{dir:!0})})),r.generate({type:"blob",compression:"DEFLATE"})}var n=FS.readFile(e,{encoding:"binary"});return new Blob([n],{type:"octet/stream"})}(Module={logReadFiles:!1,preRun:[initialSetup],arguments:[],postRun:[],print:function(){document.getElementById("output");return function(e){e=Array.prototype.slice.call(arguments).join(" "),test.includes("cmd.dat")&&console.trace(e)}}(),printErr:function(e){e=Array.prototype.slice.call(arguments).join(" "),window.dispatchEvent(new CustomEvent("cmd-crash",{}))},canvas:function(){var e=document.getElementById("canvas");return e.addEventListener("webglcontextlost",(function(e){alert("WebGL context lost. You will need to reload the page."),e.preventDefault()}),!1),e.width=800,e.height=600,e}(),setStatus:function(e){if(Module.setStatus.last||(Module.setStatus.last={time:Date.now(),text:""}),e!==Module.setStatus.text){var t=e.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/),r=Date.now();t&&r-Date.now()<30||(t?(e=t[1],progressElement.value=100*parseInt(t[2]),progressElement.max=100*parseInt(t[4]),progressElement.hidden=!1,spinnerElement.hidden=!1):(progressElement.value=null,progressElement.max=null,progressElement.hidden=!0,e||(spinnerElement.hidden=!0)),statusElement.innerHTML=e)}},totalDependencies:0,monitorRunDependencies:function(e){this.totalDependencies=Math.max(this.totalDependencies,e),Module.setStatus(e?"Preparing... ("+(this.totalDependencies-e)+"/"+this.totalDependencies+")":"")}}).setStatus("Downloading..."),window.onerror=function(){Module.setStatus("Exception thrown, see JavaScript console"),spinnerElement.style.display="none",Module.setStatus=function(e){e&&Module.printErr("[post-exception status] "+e)}};var key,Module=void 0!==Module?Module:{},moduleOverrides={};for(key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var arguments_=[],thisProgram="./this.program",quit_=function(e,t){throw t},ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1,ENVIRONMENT_IS_NODE=!1,ENVIRONMENT_IS_SHELL=!1;ENVIRONMENT_IS_WEB="object"==typeof window,ENVIRONMENT_IS_WORKER="function"==typeof importScripts,ENVIRONMENT_IS_NODE="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;var read_,readAsync,readBinary,setWindowTitle,nodeFS,nodePath,scriptDirectory="";function locateFile(e){return Module.locateFile?Module.locateFile(e,scriptDirectory):scriptDirectory+e}ENVIRONMENT_IS_NODE?(scriptDirectory=ENVIRONMENT_IS_WORKER?require("path").dirname(scriptDirectory)+"/":__dirname+"/",read_=function(e,t){return nodeFS||(nodeFS=require("fs")),nodePath||(nodePath=require("path")),e=nodePath.normalize(e),nodeFS.readFileSync(e,t?null:"utf8")},readBinary=function(e){var t=read_(e,!0);return t.buffer||(t=new Uint8Array(t)),assert(t.buffer),t},process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),"undefined"!=typeof module&&(module.exports=Module),process.on("uncaughtException",(function(e){if(!(e instanceof ExitStatus))throw e})),process.on("unhandledRejection",abort),quit_=function(e){process.exit(e)},Module.inspect=function(){return"[Emscripten Module object]"}):ENVIRONMENT_IS_SHELL?("undefined"!=typeof read&&(read_=function(e){return read(e)}),readBinary=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(assert("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?arguments_=scriptArgs:"undefined"!=typeof arguments&&(arguments_=arguments),"function"==typeof quit&&(quit_=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:"undefined"!=typeof document&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=0!==scriptDirectory.indexOf("blob:")?scriptDirectory.substr(0,scriptDirectory.lastIndexOf("/")+1):"",read_=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),readAsync=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)},setWindowTitle=function(e){document.title=e});var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);for(key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16;function alignMemory(e,t){return t||(t=STACK_ALIGN),Math.ceil(e/t)*t}function warnOnce(e){warnOnce.shown||(warnOnce.shown={}),warnOnce.shown[e]||(warnOnce.shown[e]=1,err(e))}var wasmBinary,noExitRuntime,wasmMemory,tempRet0=0,setTempRet0=function(e){tempRet0=e};function setValue(e,t,r,n){switch("*"===(r=r||"i8").charAt(r.length-1)&&(r="i32"),r){case"i1":case"i8":HEAP8[e>>0]=t;break;case"i16":HEAP16[e>>1]=t;break;case"i32":HEAP32[e>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[e>>2]=tempI64[0],HEAP32[e+4>>2]=tempI64[1];break;case"float":HEAPF32[e>>2]=t;break;case"double":HEAPF64[e>>3]=t;break;default:abort("invalid type for setValue: "+r)}}Module.wasmBinary&&(wasmBinary=Module.wasmBinary),Module.noExitRuntime&&(noExitRuntime=Module.noExitRuntime),"object"!=typeof WebAssembly&&abort("no native wasm support detected");var EXITSTATUS,ABORT=!1;function assert(e,t){e||abort("Assertion failed: "+t)}var ALLOC_NORMAL=0,ALLOC_STACK=1;function allocate(e,t){var r;return r=t==ALLOC_STACK?stackAlloc(e.length):_malloc(e.length),e.subarray||e.slice?HEAPU8.set(e,r):HEAPU8.set(new Uint8Array(e),r),r}var UTF8Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(e,t,r){for(var n=t+r,i=t;e[i]&&!(i>=n);)++i;if(i-t>16&&e.subarray&&UTF8Decoder)return UTF8Decoder.decode(e.subarray(t,i));for(var o="";t<i;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var c=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|c:(7&a)<<18|s<<12|c<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function UTF8ToString(e,t){return e?UTF8ArrayToString(HEAPU8,e,t):""}function stringToUTF8Array(e,t,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a);if(s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-i}function stringToUTF8(e,t,r){return stringToUTF8Array(e,HEAPU8,t,r)}function lengthBytesUTF8(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:t+=n<=2047?2:n<=65535?3:4}return t}var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,UTF16Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function UTF16ToString(e,t){for(var r=e,n=r>>1,i=n+t/2;!(n>=i)&&HEAPU16[n];)++n;if((r=n<<1)-e>32&&UTF16Decoder)return UTF16Decoder.decode(HEAPU8.subarray(e,r));for(var o="",a=0;!(a>=t/2);++a){var s=HEAP16[e+2*a>>1];if(0==s)break;o+=String.fromCharCode(s)}return o}function stringToUTF16(e,t,r){if(void 0===r&&(r=2147483647),r<2)return 0;for(var n=t,i=(r-=2)<2*e.length?r/2:e.length,o=0;o<i;++o){var a=e.charCodeAt(o);HEAP16[t>>1]=a,t+=2}return HEAP16[t>>1]=0,t-n}function lengthBytesUTF16(e){return 2*e.length}function UTF32ToString(e,t){for(var r=0,n="";!(r>=t/4);){var i=HEAP32[e+4*r>>2];if(0==i)break;if(++r,i>=65536){var o=i-65536;n+=String.fromCharCode(55296|o>>10,56320|1023&o)}else n+=String.fromCharCode(i)}return n}function stringToUTF32(e,t,r){if(void 0===r&&(r=2147483647),r<4)return 0;for(var n=t,i=n+r-4,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343)a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o);if(HEAP32[t>>2]=a,(t+=4)+4>i)break}return HEAP32[t>>2]=0,t-n}function lengthBytesUTF32(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t}function allocateUTF8(e){var t=lengthBytesUTF8(e)+1,r=_malloc(t);return r&&stringToUTF8Array(e,HEAP8,r,t),r}function allocateUTF8OnStack(e){var t=lengthBytesUTF8(e)+1,r=stackAlloc(t);return stringToUTF8Array(e,HEAP8,r,t),r}function writeArrayToMemory(e,t){HEAP8.set(e,t)}function writeAsciiToMemory(e,t,r){for(var n=0;n<e.length;++n)HEAP8[t++>>0]=e.charCodeAt(n);r||(HEAP8[t>>0]=0)}function alignUp(e,t){return e%t>0&&(e+=t-e%t),e}function updateGlobalBufferAndViews(e){buffer=e,Module.HEAP8=HEAP8=new Int8Array(e),Module.HEAP16=HEAP16=new Int16Array(e),Module.HEAP32=HEAP32=new Int32Array(e),Module.HEAPU8=HEAPU8=new Uint8Array(e),Module.HEAPU16=HEAPU16=new Uint16Array(e),Module.HEAPU32=HEAPU32=new Uint32Array(e),Module.HEAPF32=HEAPF32=new Float32Array(e),Module.HEAPF64=HEAPF64=new Float64Array(e)}var wasmTable,INITIAL_MEMORY=Module.INITIAL_MEMORY||16777216,__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1,runtimeExited=!1;function preRun(){if(Module.preRun)for("function"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,Module.noFSInit||FS.init.initialized||FS.init(),TTY.init(),SOCKFS.root=FS.mount(SOCKFS,{},null),callRuntimeCallbacks(__ATINIT__)}function preMain(){FS.ignorePermissions=!1,callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){runtimeExited=!0}function postRun(){if(Module.postRun)for("function"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(e){__ATPRERUN__.unshift(e)}function addOnPostRun(e){__ATPOSTRUN__.unshift(e)}var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function getUniqueRunDependency(e){return e}function addRunDependency(e){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(e){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var t=dependenciesFulfilled;dependenciesFulfilled=null,t()}}function abort(e){throw Module.onAbort&&Module.onAbort(e),err(e+=""),ABORT=!0,EXITSTATUS=1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}function hasPrefix(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}Module.preloadedImages={},Module.preloadedAudios={};var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(e){return hasPrefix(e,dataURIPrefix)}var fileURIPrefix="file://";function isFileURI(e){return!1}var tempDouble,tempI64,wasmBinaryFile="boxedwine.wasm";function getBinary(e){try{if(e==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(e);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}function getBinaryPromise(){return wasmBinary||!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER||"function"!=typeof fetch||isFileURI(wasmBinaryFile)?Promise.resolve().then((function(){return getBinary(wasmBinaryFile)})):fetch(wasmBinaryFile,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return e.arrayBuffer()})).catch((function(){return getBinary(wasmBinaryFile)}))}function createWasm(){var e={a:asmLibraryArg};function t(e,t){var r=e.exports;Module.asm=r,updateGlobalBufferAndViews((wasmMemory=Module.asm._d).buffer),wasmTable=Module.asm.$d,removeRunDependency("wasm-instantiate")}function r(e){t(e.instance)}function n(t){return getBinaryPromise().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){err("failed to asynchronously prepare wasm: "+e),abort(e)}))}if(addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(e,t)}catch(e){return err("Module.instantiateWasm callback failed with error: "+e),!1}return wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||"function"!=typeof fetch?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return err("wasm streaming compile failed: "+e),err("falling back to ArrayBuffer instantiation"),n(r)}))})),{}}isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={5650:function(e){document.title="BoxedWine "+e+" MIPS"},5919:function(){},75482:function(e){var t=UTF8ToString(e)+"\n\nAbort/Retry/Ignore/AlwaysIgnore? [ariA] :",r=window.prompt(t,"i");return null===r&&(r="i"),allocate(intArrayFromString(r),"i8",ALLOC_NORMAL)},112844:function(e,t,r){var n=e,i=t,o=r;Module.SDL2||(Module.SDL2={});var a=Module.SDL2;a.ctxCanvas!==Module.canvas&&(a.ctx=Module.createContext(Module.canvas,!1,!0),a.ctxCanvas=Module.canvas),a.w===n&&a.h===i&&a.imageCtx===a.ctx||(a.image=a.ctx.createImageData(n,i),a.w=n,a.h=i,a.imageCtx=a.ctx);var s,c=a.image.data,u=o>>2,l=0;if("undefined"!=typeof CanvasPixelArray&&c instanceof CanvasPixelArray)for(s=c.length;l<s;){var f=HEAP32[u];c[l]=255&f,c[l+1]=f>>8&255,c[l+2]=f>>16&255,c[l+3]=255,u++,l+=4}else{a.data32Data!==c&&(a.data32=new Int32Array(c.buffer),a.data8=new Uint8Array(c.buffer));var d=a.data32;s=d.length,d.set(HEAP32.subarray(u,u+s));var h=a.data8,p=3,m=p+4*s;if(s%8==0)for(;p<m;)h[p]=255,h[p=p+4|0]=255,h[p=p+4|0]=255,h[p=p+4|0]=255,h[p=p+4|0]=255,h[p=p+4|0]=255,h[p=p+4|0]=255,h[p=p+4|0]=255,p=p+4|0;else for(;p<m;)h[p]=255,p=p+4|0}return a.ctx.putImageData(a.image,0,0),0},114323:function(e,t,r,n,i){var o=e,a=t,s=r,c=n,u=i,l=document.createElement("canvas");l.width=o,l.height=a;var f,d=l.getContext("2d"),h=d.createImageData(o,a),p=h.data,m=u>>2,_=0;if("undefined"!=typeof CanvasPixelArray&&p instanceof CanvasPixelArray)for(f=p.length;_<f;){var g=HEAP32[m];p[_]=255&g,p[_+1]=g>>8&255,p[_+2]=g>>16&255,p[_+3]=g>>24&255,m++,_+=4}else{var y=new Int32Array(p.buffer);f=y.length,y.set(HEAP32.subarray(m,m+f))}d.putImageData(h,0,0);var v=0===s&&0===c?"url("+l.toDataURL()+"), auto":"url("+l.toDataURL()+") "+s+" "+c+", auto",E=_malloc(v.length+1);return stringToUTF8(v,E,v.length+1),E},115312:function(e){return Module.canvas&&(Module.canvas.style.cursor=UTF8ToString(e)),0},115405:function(){Module.canvas&&(Module.canvas.style.cursor="none")},116630:function(){return screen.width},116657:function(){return screen.height},116685:function(){return window.innerWidth},116717:function(){return window.innerHeight},116795:function(e){return void 0!==setWindowTitle&&setWindowTitle(UTF8ToString(e)),0},116929:function(){return"undefined"!=typeof AudioContext||"undefined"!=typeof webkitAudioContext?1:0},117095:function(){return void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia||void 0!==navigator.webkitGetUserMedia?1:0},117321:function(e){void 0===Module.SDL2&&(Module.SDL2={});var t=Module.SDL2;return e?t.capture={}:t.audio={},t.audioContext||("undefined"!=typeof AudioContext?t.audioContext=new AudioContext:"undefined"!=typeof webkitAudioContext&&(t.audioContext=new webkitAudioContext),t.audioContext&&autoResumeAudioContext(t.audioContext)),void 0===t.audioContext?-1:0},117874:function(){return Module.SDL2.audioContext.sampleRate},117944:function(e,t,r,n){var i=Module.SDL2,o=function(o){void 0!==i.capture.silenceTimer&&(clearTimeout(i.capture.silenceTimer),i.capture.silenceTimer=void 0),i.capture.mediaStreamNode=i.audioContext.createMediaStreamSource(o),i.capture.scriptProcessorNode=i.audioContext.createScriptProcessor(t,e,1),i.capture.scriptProcessorNode.onaudioprocess=function(e){void 0!==i&&void 0!==i.capture&&(e.outputBuffer.getChannelData(0).fill(0),i.capture.currentCaptureBuffer=e.inputBuffer,dynCall("vi",r,[n]))},i.capture.mediaStreamNode.connect(i.capture.scriptProcessorNode),i.capture.scriptProcessorNode.connect(i.audioContext.destination),i.capture.stream=o},a=function(e){};i.capture.silenceBuffer=i.audioContext.createBuffer(e,t,i.audioContext.sampleRate),i.capture.silenceBuffer.getChannelData(0).fill(0);i.capture.silenceTimer=setTimeout((function(){i.capture.currentCaptureBuffer=i.capture.silenceBuffer,dynCall("vi",r,[n])}),t/i.audioContext.sampleRate*1e3),void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(o).catch(a):void 0!==navigator.webkitGetUserMedia&&navigator.webkitGetUserMedia({audio:!0,video:!1},o,a)},119596:function(e,t,r,n){var i=Module.SDL2;i.audio.scriptProcessorNode=i.audioContext.createScriptProcessor(t,0,e),i.audio.scriptProcessorNode.onaudioprocess=function(e){void 0!==i&&void 0!==i.audio&&(i.audio.currentOutputBuffer=e.outputBuffer,dynCall("vi",r,[n]))},i.audio.scriptProcessorNode.connect(i.audioContext.destination)},120006:function(e,t){for(var r=Module.SDL2,n=r.capture.currentCaptureBuffer.numberOfChannels,i=0;i<n;++i){var o=r.capture.currentCaptureBuffer.getChannelData(i);if(o.length!=t)throw"Web Audio capture buffer length mismatch! Destination size: "+o.length+" samples vs expected "+t+" samples!";if(1==n)for(var a=0;a<t;++a)setValue(e+4*a,o[a],"float");else for(a=0;a<t;++a)setValue(e+4*(a*n+i),o[a],"float")}},120611:function(e,t){for(var r=Module.SDL2,n=r.audio.currentOutputBuffer.numberOfChannels,i=0;i<n;++i){var o=r.audio.currentOutputBuffer.getChannelData(i);if(o.length!=t)throw"Web Audio output buffer length mismatch! Destination size: "+o.length+" samples vs expected "+t+" samples!";for(var a=0;a<t;++a)o[a]=HEAPF32[e+(a*n+i<<2)>>2]}},121091:function(e){var t=Module.SDL2;if(e){if(void 0!==t.capture.silenceTimer&&clearTimeout(t.capture.silenceTimer),void 0!==t.capture.stream){for(var r=t.capture.stream.getAudioTracks(),n=0;n<r.length;n++)t.capture.stream.removeTrack(r[n]);t.capture.stream=void 0}void 0!==t.capture.scriptProcessorNode&&(t.capture.scriptProcessorNode.onaudioprocess=function(e){},t.capture.scriptProcessorNode.disconnect(),t.capture.scriptProcessorNode=void 0),void 0!==t.capture.mediaStreamNode&&(t.capture.mediaStreamNode.disconnect(),t.capture.mediaStreamNode=void 0),void 0!==t.capture.silenceBuffer&&(t.capture.silenceBuffer=void 0),t.capture=void 0}else null!=t.audio.scriptProcessorNode&&(t.audio.scriptProcessorNode.disconnect(),t.audio.scriptProcessorNode=void 0),t.audio=void 0;void 0!==t.audioContext&&void 0===t.audio&&void 0===t.capture&&(t.audioContext.close(),t.audioContext=void 0)}};function listenOnce(e,t,r){e.addEventListener(t,r,{once:!0})}function autoResumeAudioContext(e,t){t||(t=[document,document.getElementById("canvas")]),["keydown","mousedown","touchstart"].forEach((function(r){t.forEach((function(t){t&&listenOnce(t,r,(function(){"suspended"===e.state&&e.resume()}))}))}))}function callRuntimeCallbacks(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?wasmTable.get(r)():wasmTable.get(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(Module)}}function demangle(e){return e}function demangleAll(e){return e.replace(/\b_Z[\w\d_]+/g,(function(e){var t=demangle(e);return e===t?e:t+" ["+e+"]"}))}function dynCallLegacy(e,t,r){return r&&r.length?Module["dynCall_"+e].apply(null,[t].concat(r)):Module["dynCall_"+e].call(null,t)}function dynCall(e,t,r){return-1!=e.indexOf("j")?dynCallLegacy(e,t,r):wasmTable.get(t).apply(null,r)}function jsStackTrace(){var e=new Error;if(!e.stack){try{throw new Error}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function stackTrace(){var e=jsStackTrace();return Module.extraStackTrace&&(e+="\n"+Module.extraStackTrace()),demangleAll(e)}var ExceptionInfoAttrs={DESTRUCTOR_OFFSET:0,REFCOUNT_OFFSET:4,TYPE_OFFSET:8,CAUGHT_OFFSET:12,RETHROWN_OFFSET:13,SIZE:16};function ___cxa_allocate_exception(e){return _malloc(e+ExceptionInfoAttrs.SIZE)+ExceptionInfoAttrs.SIZE}function ExceptionInfo(e){this.excPtr=e,this.ptr=e-ExceptionInfoAttrs.SIZE,this.set_type=function(e){HEAP32[this.ptr+ExceptionInfoAttrs.TYPE_OFFSET>>2]=e},this.get_type=function(){return HEAP32[this.ptr+ExceptionInfoAttrs.TYPE_OFFSET>>2]},this.set_destructor=function(e){HEAP32[this.ptr+ExceptionInfoAttrs.DESTRUCTOR_OFFSET>>2]=e},this.get_destructor=function(){return HEAP32[this.ptr+ExceptionInfoAttrs.DESTRUCTOR_OFFSET>>2]},this.set_refcount=function(e){HEAP32[this.ptr+ExceptionInfoAttrs.REFCOUNT_OFFSET>>2]=e},this.set_caught=function(e){e=e?1:0,HEAP8[this.ptr+ExceptionInfoAttrs.CAUGHT_OFFSET>>0]=e},this.get_caught=function(){return 0!=HEAP8[this.ptr+ExceptionInfoAttrs.CAUGHT_OFFSET>>0]},this.set_rethrown=function(e){e=e?1:0,HEAP8[this.ptr+ExceptionInfoAttrs.RETHROWN_OFFSET>>0]=e},this.get_rethrown=function(){return 0!=HEAP8[this.ptr+ExceptionInfoAttrs.RETHROWN_OFFSET>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=HEAP32[this.ptr+ExceptionInfoAttrs.REFCOUNT_OFFSET>>2];HEAP32[this.ptr+ExceptionInfoAttrs.REFCOUNT_OFFSET>>2]=e+1},this.release_ref=function(){var e=HEAP32[this.ptr+ExceptionInfoAttrs.REFCOUNT_OFFSET>>2];return HEAP32[this.ptr+ExceptionInfoAttrs.REFCOUNT_OFFSET>>2]=e-1,1===e}}var exceptionLast=0,uncaughtExceptionCount=0;function ___cxa_throw(e,t,r){throw new ExceptionInfo(e).init(t,r),exceptionLast=e,uncaughtExceptionCount++,e}var PATH={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),r="/"===e.substr(-1);return(e=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=PATH.splitPath(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},basename:function(e){if("/"===e)return"/";var t=(e=(e=PATH.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return PATH.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return PATH.normalize(e.join("/"))},join2:function(e,t){return PATH.normalize(e+"/"+t)}};function getRandomDevice(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}if(ENVIRONMENT_IS_NODE)try{var t=require("crypto");return function(){return t.randomBytes(1)[0]}}catch(e){}return function(){abort("randomDevice")}}var PATH_FS={resolve:function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:FS.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,t="/"===n.charAt(0)}return(t?"/":"")+(e=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."},relative:function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=PATH_FS.resolve(e).substr(1),t=PATH_FS.resolve(t).substr(1);for(var n=r(e.split("/")),i=r(t.split("/")),o=Math.min(n.length,i.length),a=o,s=0;s<o;s++)if(n[s]!==i[s]){a=s;break}var c=[];for(s=a;s<n.length;s++)c.push("..");return(c=c.concat(i.slice(a))).join("/")}},TTY={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){TTY.ttys[e]={input:[],output:[],ops:t},FS.registerDevice(e,TTY.stream_ops)},stream_ops:{open:function(e){var t=TTY.ttys[e.node.rdev];if(!t)throw new FS.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,r,n,i){if(!e.tty||!e.tty.ops.get_char)throw new FS.ErrnoError(60);for(var o=0,a=0;a<n;a++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(e){throw new FS.ErrnoError(29)}if(void 0===s&&0===o)throw new FS.ErrnoError(6);if(null==s)break;o++,t[r+a]=s}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,r,n,i){if(!e.tty||!e.tty.ops.put_char)throw new FS.ErrnoError(60);try{for(var o=0;o<n;o++)e.tty.ops.put_char(e.tty,t[r+o])}catch(e){throw new FS.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(ENVIRONMENT_IS_NODE){var r=Buffer.alloc?Buffer.alloc(256):new Buffer(256),n=0;try{n=nodeFS.readSync(process.stdin.fd,r,0,256,null)}catch(e){if(-1==e.toString().indexOf("EOF"))throw e;n=0}t=n>0?r.slice(0,n).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;e.input=intArrayFromString(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(out(UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(out(UTF8ArrayToString(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(err(UTF8ArrayToString(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(err(UTF8ArrayToString(e.output,0)),e.output=[])}}};function mmapAlloc(e){for(var t=alignMemory(e,16384),r=_malloc(t);e<t;)HEAP8[r+e++]=0;return r}var MEMFS={ops_table:null,mount:function(e){return MEMFS.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(FS.isBlkdev(r)||FS.isFIFO(r))throw new FS.ErrnoError(63);MEMFS.ops_table||(MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}});var i=FS.createNode(e,t,r,n);return FS.isDir(i.mode)?(i.node_ops=MEMFS.ops_table.dir.node,i.stream_ops=MEMFS.ops_table.dir.stream,i.contents={}):FS.isFile(i.mode)?(i.node_ops=MEMFS.ops_table.file.node,i.stream_ops=MEMFS.ops_table.file.stream,i.usedBytes=0,i.contents=null):FS.isLink(i.mode)?(i.node_ops=MEMFS.ops_table.link.node,i.stream_ops=MEMFS.ops_table.link.stream):FS.isChrdev(i.mode)&&(i.node_ops=MEMFS.ops_table.chrdev.node,i.stream_ops=MEMFS.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i),i},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var t=[],r=0;r<e.usedBytes;++r)t.push(e.contents[r]);return t}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var r=e.contents?e.contents.length:0;if(!(r>=t)){t=Math.max(t,r*(r<1048576?2:1.125)>>>0),0!=r&&(t=Math.max(t,256));var n=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(n.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t){if(0==t)return e.contents=null,void(e.usedBytes=0);if(!e.contents||e.contents.subarray){var r=e.contents;return e.contents=new Uint8Array(t),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),void(e.usedBytes=t)}if(e.contents||(e.contents=[]),e.contents.length>t)e.contents.length=t;else for(;e.contents.length<t;)e.contents.push(0);e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=FS.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,FS.isDir(e.mode)?t.size=4096:FS.isFile(e.mode)?t.size=e.usedBytes:FS.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&MEMFS.resizeFileStorage(e,t.size)},lookup:function(e,t){throw FS.genericErrors[44]},mknod:function(e,t,r,n){return MEMFS.createNode(e,t,r,n)},rename:function(e,t,r){if(FS.isDir(e.mode)){var n;try{n=FS.lookupNode(t,r)}catch(e){}if(n)for(var i in n.contents)throw new FS.ErrnoError(55)}delete e.parent.contents[e.name],e.name=r,t.contents[r]=e,e.parent=t},unlink:function(e,t){delete e.contents[t]},rmdir:function(e,t){var r=FS.lookupNode(e,t);for(var n in r.contents)throw new FS.ErrnoError(55);delete e.contents[t]},readdir:function(e){var t=[".",".."];for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r);return t},symlink:function(e,t,r){var n=MEMFS.createNode(e,t,41471,0);return n.link=r,n},readlink:function(e){if(!FS.isLink(e.mode))throw new FS.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,r,n,i){var o=e.node.contents;if(i>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-i,n);if(a>8&&o.subarray)t.set(o.subarray(i,i+a),r);else for(var s=0;s<a;s++)t[r+s]=o[i+s];return a},write:function(e,t,r,n,i,o){if(t.buffer===HEAP8.buffer&&(o=!1),!n)return 0;var a=e.node;if(a.timestamp=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(o)return a.contents=t.subarray(r,r+n),a.usedBytes=n,n;if(0===a.usedBytes&&0===i)return a.contents=t.slice(r,r+n),a.usedBytes=n,n;if(i+n<=a.usedBytes)return a.contents.set(t.subarray(r,r+n),i),n}if(MEMFS.expandFileStorage(a,i+n),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(r,r+n),i);else for(var s=0;s<n;s++)a.contents[i+s]=t[r+s];return a.usedBytes=Math.max(a.usedBytes,i+n),n},llseek:function(e,t,r){var n=t;if(1===r?n+=e.position:2===r&&FS.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new FS.ErrnoError(28);return n},allocate:function(e,t,r){MEMFS.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap:function(e,t,r,n,i,o){if(assert(0===t),!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);var a,s,c=e.node.contents;if(2&o||c.buffer!==buffer){if((n>0||n+r<c.length)&&(c=c.subarray?c.subarray(n,n+r):Array.prototype.slice.call(c,n,n+r)),s=!0,!(a=mmapAlloc(r)))throw new FS.ErrnoError(48);HEAP8.set(c,a)}else s=!1,a=c.byteOffset;return{ptr:a,allocated:s}},msync:function(e,t,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&i)return 0;MEMFS.stream_ops.write(e,t,0,n,r,!1);return 0}}},FS={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(e,t){if(t=t||{},!(e=PATH_FS.resolve(FS.cwd(),e)))return{path:"",node:null};var r={follow_mount:!0,recurse_count:0};for(var n in r)void 0===t[n]&&(t[n]=r[n]);if(t.recurse_count>8)throw new FS.ErrnoError(32);for(var i=PATH.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),o=FS.root,a="/",s=0;s<i.length;s++){var c=s===i.length-1;if(c&&t.parent)break;if(o=FS.lookupNode(o,i[s]),a=PATH.join2(a,i[s]),FS.isMountpoint(o)&&(!c||c&&t.follow_mount)&&(o=o.mounted.root),!c||t.follow)for(var u=0;FS.isLink(o.mode);){var l=FS.readlink(a);if(a=PATH_FS.resolve(PATH.dirname(a),l),o=FS.lookupPath(a,{recurse_count:t.recurse_count}).node,u++>40)throw new FS.ErrnoError(32)}}return{path:a,node:o}},getPath:function(e){for(var t;;){if(FS.isRoot(e)){var r=e.mount.mountpoint;return t?"/"!==r[r.length-1]?r+"/"+t:r+t:r}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%FS.nameTable.length},hashAddNode:function(e){var t=FS.hashName(e.parent.id,e.name);e.name_next=FS.nameTable[t],FS.nameTable[t]=e},hashRemoveNode:function(e){var t=FS.hashName(e.parent.id,e.name);if(FS.nameTable[t]===e)FS.nameTable[t]=e.name_next;else for(var r=FS.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode:function(e,t){var r=FS.mayLookup(e);if(r)throw new FS.ErrnoError(r,e);for(var n=FS.hashName(e.id,t),i=FS.nameTable[n];i;i=i.name_next){var o=i.name;if(i.parent.id===e.id&&o===t)return i}return FS.lookup(e,t)},createNode:function(e,t,r,n){var i=new FS.FSNode(e,t,r,n);return FS.hashAddNode(i),i},destroyNode:function(e){FS.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return 49152==(49152&e)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(e){var t=FS.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return FS.ignorePermissions||(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:2},mayLookup:function(e){var t=FS.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:function(e,t){try{FS.lookupNode(e,t);return 20}catch(e){}return FS.nodePermissions(e,"wx")},mayDelete:function(e,t,r){var n;try{n=FS.lookupNode(e,t)}catch(e){return e.errno}var i=FS.nodePermissions(e,"wx");if(i)return i;if(r){if(!FS.isDir(n.mode))return 54;if(FS.isRoot(n)||FS.getPath(n)===FS.cwd())return 10}else if(FS.isDir(n.mode))return 31;return 0},mayOpen:function(e,t){return e?FS.isLink(e.mode)?32:FS.isDir(e.mode)&&("r"!==FS.flagsToPermissionString(t)||512&t)?31:FS.nodePermissions(e,FS.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||FS.MAX_OPEN_FDS;for(var r=e;r<=t;r++)if(!FS.streams[r])return r;throw new FS.ErrnoError(33)},getStream:function(e){return FS.streams[e]},createStream:function(e,t,r){FS.FSStream||(FS.FSStream=function(){},FS.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var n=new FS.FSStream;for(var i in e)n[i]=e[i];e=n;var o=FS.nextfd(t,r);return e.fd=o,FS.streams[o]=e,e},closeStream:function(e){FS.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=FS.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new FS.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){FS.devices[e]={stream_ops:t}},getDevice:function(e){return FS.devices[e]},getMounts:function(e){for(var t=[],r=[e];r.length;){var n=r.pop();t.push(n),r.push.apply(r,n.mounts)}return t},syncfs:function(e,t){"function"==typeof e&&(t=e,e=!1),FS.syncFSRequests++,FS.syncFSRequests>1&&err("warning: "+FS.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var r=FS.getMounts(FS.root.mount),n=0;function i(e){return FS.syncFSRequests--,t(e)}function o(e){if(e)return o.errored?void 0:(o.errored=!0,i(e));++n>=r.length&&i(null)}r.forEach((function(t){if(!t.type.syncfs)return o(null);t.type.syncfs(t,e,o)}))},mount:function(e,t,r){var n,i="/"===r,o=!r;if(i&&FS.root)throw new FS.ErrnoError(10);if(!i&&!o){var a=FS.lookupPath(r,{follow_mount:!1});if(r=a.path,n=a.node,FS.isMountpoint(n))throw new FS.ErrnoError(10);if(!FS.isDir(n.mode))throw new FS.ErrnoError(54)}var s={type:e,opts:t,mountpoint:r,mounts:[]},c=e.mount(s);return c.mount=s,s.root=c,i?FS.root=c:n&&(n.mounted=s,n.mount&&n.mount.mounts.push(s)),c},unmount:function(e){var t=FS.lookupPath(e,{follow_mount:!1});if(!FS.isMountpoint(t.node))throw new FS.ErrnoError(28);var r=t.node,n=r.mounted,i=FS.getMounts(n);Object.keys(FS.nameTable).forEach((function(e){for(var t=FS.nameTable[e];t;){var r=t.name_next;-1!==i.indexOf(t.mount)&&FS.destroyNode(t),t=r}})),r.mounted=null;var o=r.mount.mounts.indexOf(n);r.mount.mounts.splice(o,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,r){var n=FS.lookupPath(e,{parent:!0}).node,i=PATH.basename(e);if(!i||"."===i||".."===i)throw new FS.ErrnoError(28);var o=FS.mayCreate(n,i);if(o)throw new FS.ErrnoError(o);if(!n.node_ops.mknod)throw new FS.ErrnoError(63);return n.node_ops.mknod(n,i,t,r)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,FS.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,FS.mknod(e,t,0)},mkdirTree:function(e,t){for(var r=e.split("/"),n="",i=0;i<r.length;++i)if(r[i]){n+="/"+r[i];try{FS.mkdir(n,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:function(e,t,r){return void 0===r&&(r=t,t=438),t|=8192,FS.mknod(e,t,r)},symlink:function(e,t){if(!PATH_FS.resolve(e))throw new FS.ErrnoError(44);var r=FS.lookupPath(t,{parent:!0}).node;if(!r)throw new FS.ErrnoError(44);var n=PATH.basename(t),i=FS.mayCreate(r,n);if(i)throw new FS.ErrnoError(i);if(!r.node_ops.symlink)throw new FS.ErrnoError(63);return r.node_ops.symlink(r,n,e)},rename:function(e,t){var r,n,i=PATH.dirname(e),o=PATH.dirname(t),a=PATH.basename(e),s=PATH.basename(t);if(r=FS.lookupPath(e,{parent:!0}).node,n=FS.lookupPath(t,{parent:!0}).node,!r||!n)throw new FS.ErrnoError(44);if(r.mount!==n.mount)throw new FS.ErrnoError(75);var c,u=FS.lookupNode(r,a),l=PATH_FS.relative(e,o);if("."!==l.charAt(0))throw new FS.ErrnoError(28);if("."!==(l=PATH_FS.relative(t,i)).charAt(0))throw new FS.ErrnoError(55);try{c=FS.lookupNode(n,s)}catch(e){}if(u!==c){var f=FS.isDir(u.mode),d=FS.mayDelete(r,a,f);if(d)throw new FS.ErrnoError(d);if(d=c?FS.mayDelete(n,s,f):FS.mayCreate(n,s))throw new FS.ErrnoError(d);if(!r.node_ops.rename)throw new FS.ErrnoError(63);if(FS.isMountpoint(u)||c&&FS.isMountpoint(c))throw new FS.ErrnoError(10);if(n!==r&&(d=FS.nodePermissions(r,"w")))throw new FS.ErrnoError(d);try{FS.trackingDelegate.willMovePath&&FS.trackingDelegate.willMovePath(e,t)}catch(r){err("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+r.message)}FS.hashRemoveNode(u);try{r.node_ops.rename(u,n,s)}catch(e){throw e}finally{FS.hashAddNode(u)}try{FS.trackingDelegate.onMovePath&&FS.trackingDelegate.onMovePath(e,t)}catch(r){err("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+r.message)}}},rmdir:function(e){var t=FS.lookupPath(e,{parent:!0}).node,r=PATH.basename(e),n=FS.lookupNode(t,r),i=FS.mayDelete(t,r,!0);if(i)throw new FS.ErrnoError(i);if(!t.node_ops.rmdir)throw new FS.ErrnoError(63);if(FS.isMountpoint(n))throw new FS.ErrnoError(10);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(e)}catch(t){err("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.rmdir(t,r),FS.destroyNode(n);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(e)}catch(t){err("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readdir:function(e){var t=FS.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new FS.ErrnoError(54);return t.node_ops.readdir(t)},unlink:function(e){var t=FS.lookupPath(e,{parent:!0}).node,r=PATH.basename(e),n=FS.lookupNode(t,r),i=FS.mayDelete(t,r,!1);if(i)throw new FS.ErrnoError(i);if(!t.node_ops.unlink)throw new FS.ErrnoError(63);if(FS.isMountpoint(n))throw new FS.ErrnoError(10);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(e)}catch(t){err("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.unlink(t,r),FS.destroyNode(n);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(e)}catch(t){err("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readlink:function(e){var t=FS.lookupPath(e).node;if(!t)throw new FS.ErrnoError(44);if(!t.node_ops.readlink)throw new FS.ErrnoError(28);return PATH_FS.resolve(FS.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var r=FS.lookupPath(e,{follow:!t}).node;if(!r)throw new FS.ErrnoError(44);if(!r.node_ops.getattr)throw new FS.ErrnoError(63);return r.node_ops.getattr(r)},lstat:function(e){return FS.stat(e,!0)},chmod:function(e,t,r){var n;"string"==typeof e?n=FS.lookupPath(e,{follow:!r}).node:n=e;if(!n.node_ops.setattr)throw new FS.ErrnoError(63);n.node_ops.setattr(n,{mode:4095&t|-4096&n.mode,timestamp:Date.now()})},lchmod:function(e,t){FS.chmod(e,t,!0)},fchmod:function(e,t){var r=FS.getStream(e);if(!r)throw new FS.ErrnoError(8);FS.chmod(r.node,t)},chown:function(e,t,r,n){var i;"string"==typeof e?i=FS.lookupPath(e,{follow:!n}).node:i=e;if(!i.node_ops.setattr)throw new FS.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:function(e,t,r){FS.chown(e,t,r,!0)},fchown:function(e,t,r){var n=FS.getStream(e);if(!n)throw new FS.ErrnoError(8);FS.chown(n.node,t,r)},truncate:function(e,t){if(t<0)throw new FS.ErrnoError(28);var r;"string"==typeof e?r=FS.lookupPath(e,{follow:!0}).node:r=e;if(!r.node_ops.setattr)throw new FS.ErrnoError(63);if(FS.isDir(r.mode))throw new FS.ErrnoError(31);if(!FS.isFile(r.mode))throw new FS.ErrnoError(28);var n=FS.nodePermissions(r,"w");if(n)throw new FS.ErrnoError(n);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var r=FS.getStream(e);if(!r)throw new FS.ErrnoError(8);if(0==(2097155&r.flags))throw new FS.ErrnoError(28);FS.truncate(r.node,t)},utime:function(e,t,r){var n=FS.lookupPath(e,{follow:!0}).node;n.node_ops.setattr(n,{timestamp:Math.max(t,r)})},open:function(e,t,r,n,i){if(""===e)throw new FS.ErrnoError(44);var o;if(r=void 0===r?438:r,r=64&(t="string"==typeof t?FS.modeStringToFlags(t):t)?4095&r|32768:0,"object"==typeof e)o=e;else{e=PATH.normalize(e);try{o=FS.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var a=!1;if(64&t)if(o){if(128&t)throw new FS.ErrnoError(20)}else o=FS.mknod(e,r,0),a=!0;if(!o)throw new FS.ErrnoError(44);if(FS.isChrdev(o.mode)&&(t&=-513),65536&t&&!FS.isDir(o.mode))throw new FS.ErrnoError(54);if(!a){var s=FS.mayOpen(o,t);if(s)throw new FS.ErrnoError(s)}512&t&&FS.truncate(o,0),t&=-131713;var c=FS.createStream({node:o,path:FS.getPath(o),flags:t,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1},n,i);c.stream_ops.open&&c.stream_ops.open(c),!Module.logReadFiles||1&t||(FS.readFiles||(FS.readFiles={}),e in FS.readFiles||(FS.readFiles[e]=1,err("FS.trackingDelegate error on read file: "+e)));try{if(FS.trackingDelegate.onOpenFile){var u=0;1!=(2097155&t)&&(u|=FS.tracking.openFlags.READ),0!=(2097155&t)&&(u|=FS.tracking.openFlags.WRITE),FS.trackingDelegate.onOpenFile(e,u)}}catch(t){err("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return c},close:function(e){if(FS.isClosed(e))throw new FS.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{FS.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,r){if(FS.isClosed(e))throw new FS.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new FS.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new FS.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read:function(e,t,r,n,i){if(n<0||i<0)throw new FS.ErrnoError(28);if(FS.isClosed(e))throw new FS.ErrnoError(8);if(1==(2097155&e.flags))throw new FS.ErrnoError(8);if(FS.isDir(e.node.mode))throw new FS.ErrnoError(31);if(!e.stream_ops.read)throw new FS.ErrnoError(28);var o=void 0!==i;if(o){if(!e.seekable)throw new FS.ErrnoError(70)}else i=e.position;var a=e.stream_ops.read(e,t,r,n,i);return o||(e.position+=a),a},write:function(e,t,r,n,i,o){if(n<0||i<0)throw new FS.ErrnoError(28);if(FS.isClosed(e))throw new FS.ErrnoError(8);if(0==(2097155&e.flags))throw new FS.ErrnoError(8);if(FS.isDir(e.node.mode))throw new FS.ErrnoError(31);if(!e.stream_ops.write)throw new FS.ErrnoError(28);e.seekable&&1024&e.flags&&FS.llseek(e,0,2);var a=void 0!==i;if(a){if(!e.seekable)throw new FS.ErrnoError(70)}else i=e.position;var s=e.stream_ops.write(e,t,r,n,i,o);a||(e.position+=s);try{e.path&&FS.trackingDelegate.onWriteToFile&&FS.trackingDelegate.onWriteToFile(e.path)}catch(t){err("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+t.message)}return s},allocate:function(e,t,r){if(FS.isClosed(e))throw new FS.ErrnoError(8);if(t<0||r<=0)throw new FS.ErrnoError(28);if(0==(2097155&e.flags))throw new FS.ErrnoError(8);if(!FS.isFile(e.node.mode)&&!FS.isDir(e.node.mode))throw new FS.ErrnoError(43);if(!e.stream_ops.allocate)throw new FS.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap:function(e,t,r,n,i,o){if(0!=(2&i)&&0==(2&o)&&2!=(2097155&e.flags))throw new FS.ErrnoError(2);if(1==(2097155&e.flags))throw new FS.ErrnoError(2);if(!e.stream_ops.mmap)throw new FS.ErrnoError(43);return e.stream_ops.mmap(e,t,r,n,i,o)},msync:function(e,t,r,n,i){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,r,n,i):0},munmap:function(e){return 0},ioctl:function(e,t,r){if(!e.stream_ops.ioctl)throw new FS.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile:function(e,t){if((t=t||{}).flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var r,n=FS.open(e,t.flags),i=FS.stat(e).size,o=new Uint8Array(i);return FS.read(n,o,0,i,0),"utf8"===t.encoding?r=UTF8ArrayToString(o,0):"binary"===t.encoding&&(r=o),FS.close(n),r},writeFile:function(e,t,r){(r=r||{}).flags=r.flags||577;var n=FS.open(e,r.flags,r.mode);if("string"==typeof t){var i=new Uint8Array(lengthBytesUTF8(t)+1),o=stringToUTF8Array(t,i,0,i.length);FS.write(n,i,0,o,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");FS.write(n,t,0,t.byteLength,void 0,r.canOwn)}FS.close(n)},cwd:function(){return FS.currentPath},chdir:function(e){var t=FS.lookupPath(e,{follow:!0});if(null===t.node)throw new FS.ErrnoError(44);if(!FS.isDir(t.node.mode))throw new FS.ErrnoError(54);var r=FS.nodePermissions(t.node,"x");if(r)throw new FS.ErrnoError(r);FS.currentPath=t.path},createDefaultDirectories:function(){FS.mkdir("/tmp"),FS.mkdir("/home"),FS.mkdir("/home/web_user")},createDefaultDevices:function(){FS.mkdir("/dev"),FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(e,t,r,n,i){return n}}),FS.mkdev("/dev/null",FS.makedev(1,3)),TTY.register(FS.makedev(5,0),TTY.default_tty_ops),TTY.register(FS.makedev(6,0),TTY.default_tty1_ops),FS.mkdev("/dev/tty",FS.makedev(5,0)),FS.mkdev("/dev/tty1",FS.makedev(6,0));var e=getRandomDevice();FS.createDevice("/dev","random",e),FS.createDevice("/dev","urandom",e),FS.mkdir("/dev/shm"),FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc"),FS.mkdir("/proc/self"),FS.mkdir("/proc/self/fd"),FS.mount({mount:function(){var e=FS.createNode("/proc/self","fd",16895,73);return e.node_ops={lookup:function(e,t){var r=+t,n=FS.getStream(r);if(!n)throw new FS.ErrnoError(8);var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return n.path}}};return i.parent=i,i}},e}},{},"/proc/self/fd")},createStandardStreams:function(){Module.stdin?FS.createDevice("/dev","stdin",Module.stdin):FS.symlink("/dev/tty","/dev/stdin"),Module.stdout?FS.createDevice("/dev","stdout",null,Module.stdout):FS.symlink("/dev/tty","/dev/stdout"),Module.stderr?FS.createDevice("/dev","stderr",null,Module.stderr):FS.symlink("/dev/tty1","/dev/stderr");FS.open("/dev/stdin",0),FS.open("/dev/stdout",1),FS.open("/dev/stderr",1)},ensureErrnoError:function(){FS.ErrnoError||(FS.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},FS.ErrnoError.prototype=new Error,FS.ErrnoError.prototype.constructor=FS.ErrnoError,[44].forEach((function(e){FS.genericErrors[e]=new FS.ErrnoError(e),FS.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:function(){FS.ensureErrnoError(),FS.nameTable=new Array(4096),FS.mount(MEMFS,{},"/"),FS.createDefaultDirectories(),FS.createDefaultDevices(),FS.createSpecialDirectories(),FS.filesystems={MEMFS:MEMFS}},init:function(e,t,r){FS.init.initialized=!0,FS.ensureErrnoError(),Module.stdin=e||Module.stdin,Module.stdout=t||Module.stdout,Module.stderr=r||Module.stderr,FS.createStandardStreams()},quit:function(){FS.init.initialized=!1;var e=Module._fflush;e&&e(0);for(var t=0;t<FS.streams.length;t++){var r=FS.streams[t];r&&FS.close(r)}},getMode:function(e,t){var r=0;return e&&(r|=365),t&&(r|=146),r},findObject:function(e,t){var r=FS.analyzePath(e,t);return r.exists?r.object:null},analyzePath:function(e,t){try{e=(n=FS.lookupPath(e,{follow:!t})).path}catch(e){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=FS.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=PATH.basename(e),n=FS.lookupPath(e,{follow:!t}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot="/"===n.path}catch(e){r.error=e.errno}return r},createPath:function(e,t,r,n){e="string"==typeof e?e:FS.getPath(e);for(var i=t.split("/").reverse();i.length;){var o=i.pop();if(o){var a=PATH.join2(e,o);try{FS.mkdir(a)}catch(e){}e=a}}return a},createFile:function(e,t,r,n,i){var o=PATH.join2("string"==typeof e?e:FS.getPath(e),t),a=FS.getMode(n,i);return FS.create(o,a)},createDataFile:function(e,t,r,n,i,o){var a=t?PATH.join2("string"==typeof e?e:FS.getPath(e),t):e,s=FS.getMode(n,i),c=FS.create(a,s);if(r){if("string"==typeof r){for(var u=new Array(r.length),l=0,f=r.length;l<f;++l)u[l]=r.charCodeAt(l);r=u}FS.chmod(c,146|s);var d=FS.open(c,577);FS.write(d,r,0,r.length,0,o),FS.close(d),FS.chmod(c,s)}return c},createDevice:function(e,t,r,n){var i=PATH.join2("string"==typeof e?e:FS.getPath(e),t),o=FS.getMode(!!r,!!n);FS.createDevice.major||(FS.createDevice.major=64);var a=FS.makedev(FS.createDevice.major++,0);return FS.registerDevice(a,{open:function(e){e.seekable=!1},close:function(e){n&&n.buffer&&n.buffer.length&&n(10)},read:function(e,t,n,i,o){for(var a=0,s=0;s<i;s++){var c;try{c=r()}catch(e){throw new FS.ErrnoError(29)}if(void 0===c&&0===a)throw new FS.ErrnoError(6);if(null==c)break;a++,t[n+s]=c}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,r,i,o){for(var a=0;a<i;a++)try{n(t[r+a])}catch(e){throw new FS.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),a}}),FS.mkdev(i,o,a)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!read_)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=intArrayFromString(read_(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new FS.ErrnoError(29)}},createLazyFile:function(e,t,r,n,i){function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,r=e/this.chunkSize|0;return this.getter(r)[t]}},o.prototype.setDataGetter=function(e){this.getter=e},o.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",r,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+r+". Status: "+e.status);var t,n=Number(e.getResponseHeader("Content-length")),i=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,o=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,a=1048576;i||(a=n);var s=this;s.setDataGetter((function(e){var t=e*a,i=(e+1)*a-1;if(i=Math.min(i,n-1),void 0===s.chunks[e]&&(s.chunks[e]=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>n-1)throw new Error("only "+n+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",r,!1),n!==a&&i.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(i.responseType="arraybuffer"),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw new Error("Couldn't load "+r+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):intArrayFromString(i.responseText||"",!0)}(t,i)),void 0===s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]})),!o&&n||(a=n=1,n=this.getter(0).length,a=n,out("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a=new o;Object.defineProperties(a,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var s={isDevice:!1,contents:a}}else s={isDevice:!1,url:r};var c=FS.createFile(e,t,s,n,i);s.contents?c.contents=s.contents:s.url&&(c.contents=null,c.url=s.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var u={};return Object.keys(c.stream_ops).forEach((function(e){var t=c.stream_ops[e];u[e]=function(){return FS.forceLoadFile(c),t.apply(null,arguments)}})),u.read=function(e,t,r,n,i){FS.forceLoadFile(c);var o=e.node.contents;if(i>=o.length)return 0;var a=Math.min(o.length-i,n);if(o.slice)for(var s=0;s<a;s++)t[r+s]=o[i+s];else for(s=0;s<a;s++)t[r+s]=o.get(i+s);return a},c.stream_ops=u,c},createPreloadedFile:function(e,t,r,n,i,o,a,s,c,u){Browser.init();var l=t?PATH_FS.resolve(PATH.join2(e,t)):e,f=getUniqueRunDependency("cp "+l);function d(r){function d(r){u&&u(),s||FS.createDataFile(e,t,r,n,i,c),o&&o(),removeRunDependency(f)}var h=!1;Module.preloadPlugins.forEach((function(e){h||e.canHandle(l)&&(e.handle(r,l,d,(function(){a&&a(),removeRunDependency(f)})),h=!0)})),h||d(r)}addRunDependency(f),"string"==typeof r?Browser.asyncLoad(r,(function(e){d(e)}),a):d(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,r){t=t||function(){},r=r||function(){};var n=FS.indexedDB();try{var i=n.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return r(e)}i.onupgradeneeded=function(){out("creating db"),i.result.createObjectStore(FS.DB_STORE_NAME)},i.onsuccess=function(){var n=i.result.transaction([FS.DB_STORE_NAME],"readwrite"),o=n.objectStore(FS.DB_STORE_NAME),a=0,s=0,c=e.length;function u(){0==s?t():r()}e.forEach((function(e){var t=o.put(FS.analyzePath(e).object.contents,e);t.onsuccess=function(){++a+s==c&&u()},t.onerror=function(){s++,a+s==c&&u()}})),n.onerror=r},i.onerror=r},loadFilesFromDB:function(e,t,r){t=t||function(){},r=r||function(){};var n=FS.indexedDB();try{var i=n.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return r(e)}i.onupgradeneeded=r,i.onsuccess=function(){var n=i.result;try{var o=n.transaction([FS.DB_STORE_NAME],"readonly")}catch(e){return void r(e)}var a=o.objectStore(FS.DB_STORE_NAME),s=0,c=0,u=e.length;function l(){0==c?t():r()}e.forEach((function(e){var t=a.get(e);t.onsuccess=function(){FS.analyzePath(e).exists&&FS.unlink(e),FS.createDataFile(PATH.dirname(e),PATH.basename(e),t.result,!0,!0,!0),++s+c==u&&l()},t.onerror=function(){c++,s+c==u&&l()}})),o.onerror=r},i.onerror=r}},SYSCALLS={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,t){if("/"!==t[0]){var r;if(-100===e)r=FS.cwd();else{var n=FS.getStream(e);if(!n)throw new FS.ErrnoError(8);r=n.path}t=PATH.join2(r,t)}return t},doStat:function(e,t,r){try{var n=e(t)}catch(e){if(e&&e.node&&PATH.normalize(t)!==PATH.normalize(FS.getPath(e.node)))return-54;throw e}return HEAP32[r>>2]=n.dev,HEAP32[r+4>>2]=0,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAP32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,HEAP32[r+32>>2]=0,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks,HEAP32[r+56>>2]=n.atime.getTime()/1e3|0,HEAP32[r+60>>2]=0,HEAP32[r+64>>2]=n.mtime.getTime()/1e3|0,HEAP32[r+68>>2]=0,HEAP32[r+72>>2]=n.ctime.getTime()/1e3|0,HEAP32[r+76>>2]=0,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+80>>2]=tempI64[0],HEAP32[r+84>>2]=tempI64[1],0},doMsync:function(e,t,r,n,i){var o=HEAPU8.slice(e,e+r);FS.msync(t,o,i,r,n)},doMkdir:function(e,t){return"/"===(e=PATH.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),FS.mkdir(e,t,0),0},doMknod:function(e,t,r){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return FS.mknod(e,t,r),0},doReadlink:function(e,t,r){if(r<=0)return-28;var n=FS.readlink(e),i=Math.min(r,lengthBytesUTF8(n)),o=HEAP8[t+i];return stringToUTF8(n,t,r+1),HEAP8[t+i]=o,i},doAccess:function(e,t){if(-8&t)return-28;var r;if(!(r=FS.lookupPath(e,{follow:!0}).node))return-44;var n="";return 4&t&&(n+="r"),2&t&&(n+="w"),1&t&&(n+="x"),n&&FS.nodePermissions(r,n)?-2:0},doDup:function(e,t,r){var n=FS.getStream(r);return n&&FS.close(n),FS.open(e,t,0,r,r).fd},doReadv:function(e,t,r,n){for(var i=0,o=0;o<r;o++){var a=HEAP32[t+8*o>>2],s=HEAP32[t+(8*o+4)>>2],c=FS.read(e,HEAP8,a,s,n);if(c<0)return-1;if(i+=c,c<s)break}return i},doWritev:function(e,t,r,n){for(var i=0,o=0;o<r;o++){var a=HEAP32[t+8*o>>2],s=HEAP32[t+(8*o+4)>>2],c=FS.write(e,HEAP8,a,s,n);if(c<0)return-1;i+=c}return i},varargs:void 0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(e){return UTF8ToString(e)},getStreamFromFD:function(e){var t=FS.getStream(e);if(!t)throw new FS.ErrnoError(8);return t},get64:function(e,t){return e}};function ___sys__newselect(e,t,r,n,i){try{for(var o=0,a=t?HEAP32[t>>2]:0,s=t?HEAP32[t+4>>2]:0,c=r?HEAP32[r>>2]:0,u=r?HEAP32[r+4>>2]:0,l=n?HEAP32[n>>2]:0,f=n?HEAP32[n+4>>2]:0,d=0,h=0,p=0,m=0,_=0,g=0,y=(t?HEAP32[t>>2]:0)|(r?HEAP32[r>>2]:0)|(n?HEAP32[n>>2]:0),v=(t?HEAP32[t+4>>2]:0)|(r?HEAP32[r+4>>2]:0)|(n?HEAP32[n+4>>2]:0),E=function(e,t,r,n){return e<32?t&n:r&n},w=0;w<e;w++){var S=1<<w%32;if(E(w,y,v,S)){var b=FS.getStream(w);if(!b)throw new FS.ErrnoError(8);var F=SYSCALLS.DEFAULT_POLLMASK;b.stream_ops.poll&&(F=b.stream_ops.poll(b)),1&F&&E(w,a,s,S)&&(w<32?d|=S:h|=S,o++),4&F&&E(w,c,u,S)&&(w<32?p|=S:m|=S,o++),2&F&&E(w,l,f,S)&&(w<32?_|=S:g|=S,o++)}}return t&&(HEAP32[t>>2]=d,HEAP32[t+4>>2]=h),r&&(HEAP32[r>>2]=p,HEAP32[r+4>>2]=m),n&&(HEAP32[n>>2]=_,HEAP32[n+4>>2]=g),o}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_access(e,t){try{return e=SYSCALLS.getStr(e),SYSCALLS.doAccess(e,t)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function setErrNo(e){return HEAP32[___errno_location()>>2]=e,e}function ___sys_fcntl64(e,t,r){SYSCALLS.varargs=r;try{var n=SYSCALLS.getStreamFromFD(e);switch(t){case 0:return(i=SYSCALLS.get())<0?-28:FS.open(n.path,n.flags,0,i).fd;case 1:case 2:case 13:case 14:return 0;case 3:return n.flags;case 4:var i=SYSCALLS.get();return n.flags|=i,0;case 12:i=SYSCALLS.get();return HEAP16[i+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return setErrNo(28),-1}}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_ftruncate64(e,t,r,n){try{var i=SYSCALLS.get64(r,n);return FS.ftruncate(e,i),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_getcwd(e,t){try{if(0===t)return-28;var r=FS.cwd();return t<lengthBytesUTF8(r)+1?-68:(stringToUTF8(r,e,t),e)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_getdents64(e,t,r){try{var n=SYSCALLS.getStreamFromFD(e);n.getdents||(n.getdents=FS.readdir(n.path));for(var i=280,o=0,a=FS.llseek(n,0,1),s=Math.floor(a/i);s<n.getdents.length&&o+i<=r;){var c,u,l=n.getdents[s];if("."===l[0])c=1,u=4;else{var f=FS.lookupNode(n.node,l);c=f.id,u=FS.isChrdev(f.mode)?2:FS.isDir(f.mode)?4:FS.isLink(f.mode)?10:8}tempI64=[c>>>0,(tempDouble=c,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t+o>>2]=tempI64[0],HEAP32[t+o+4>>2]=tempI64[1],tempI64=[(s+1)*i>>>0,(tempDouble=(s+1)*i,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t+o+8>>2]=tempI64[0],HEAP32[t+o+12>>2]=tempI64[1],HEAP16[t+o+16>>1]=280,HEAP8[t+o+18>>0]=u,stringToUTF8(l,t+o+19,256),o+=i,s+=1}return FS.llseek(n,s*i,0),o}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_ioctl(e,t,r){SYSCALLS.varargs=r;try{var n=SYSCALLS.getStreamFromFD(e);switch(t){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return n.tty?0:-59;case 21519:if(!n.tty)return-59;var i=SYSCALLS.get();return HEAP32[i>>2]=0,0;case 21520:return n.tty?-28:-59;case 21531:i=SYSCALLS.get();return FS.ioctl(n,t,i);default:abort("bad ioctl syscall "+t)}}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_mkdir(e,t){try{return e=SYSCALLS.getStr(e),SYSCALLS.doMkdir(e,t)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_open(e,t,r){SYSCALLS.varargs=r;try{var n=SYSCALLS.getStr(e),i=r?SYSCALLS.get():0;return FS.open(n,t,i).fd}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_rename(e,t){try{return e=SYSCALLS.getStr(e),t=SYSCALLS.getStr(t),FS.rename(e,t),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_rmdir(e){try{return e=SYSCALLS.getStr(e),FS.rmdir(e),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}var ERRNO_CODES={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},SOCKFS={mount:function(e){return Module.websocket=Module.websocket&&"object"==typeof Module.websocket?Module.websocket:{},Module.websocket._callbacks={},Module.websocket.on=function(e,t){return"function"==typeof t&&(this._callbacks[e]=t),this},Module.websocket.emit=function(e,t){"function"==typeof this._callbacks[e]&&this._callbacks[e].call(this,t)},FS.createNode(null,"/",16895,0)},createSocket:function(e,t,r){t&=-526337,r&&assert(1==t==(6==r));var n={family:e,type:t,protocol:r,server:null,error:null,peers:{},pending:[],recv_queue:[],sock_ops:SOCKFS.websocket_sock_ops},i=SOCKFS.nextname(),o=FS.createNode(SOCKFS.root,i,49152,0);o.sock=n;var a=FS.createStream({path:i,node:o,flags:2,seekable:!1,stream_ops:SOCKFS.stream_ops});return n.stream=a,n},getSocket:function(e){var t=FS.getStream(e);return t&&FS.isSocket(t.node.mode)?t.node.sock:null},stream_ops:{poll:function(e){var t=e.node.sock;return t.sock_ops.poll(t)},ioctl:function(e,t,r){var n=e.node.sock;return n.sock_ops.ioctl(n,t,r)},read:function(e,t,r,n,i){var o=e.node.sock,a=o.sock_ops.recvmsg(o,n);return a?(t.set(a.buffer,r),a.buffer.length):0},write:function(e,t,r,n,i){var o=e.node.sock;return o.sock_ops.sendmsg(o,t,r,n)},close:function(e){var t=e.node.sock;t.sock_ops.close(t)}},nextname:function(){return SOCKFS.nextname.current||(SOCKFS.nextname.current=0),"socket["+SOCKFS.nextname.current+++"]"},websocket_sock_ops:{createPeer:function(e,t,r){var n;if("object"==typeof t&&(n=t,t=null,r=null),n)if(n._socket)t=n._socket.remoteAddress,r=n._socket.remotePort;else{var i=/ws[s]?:\/\/([^:]+):(\d+)/.exec(n.url);if(!i)throw new Error("WebSocket URL must be in the format ws(s)://address:port");t=i[1],r=parseInt(i[2],10)}else try{var o=Module.websocket&&"object"==typeof Module.websocket,a="ws:#".replace("#","//");if(o&&"string"==typeof Module.websocket.url&&(a=Module.websocket.url),"ws://"===a||"wss://"===a){var s=t.split("/");a=a+s[0]+":"+r+"/"+s.slice(1).join("/")}var c="binary";o&&"string"==typeof Module.websocket.subprotocol&&(c=Module.websocket.subprotocol);var u=void 0;"null"!==c&&(c=c.replace(/^ +| +$/g,"").split(/ *, */),u=ENVIRONMENT_IS_NODE?{protocol:c.toString()}:c),o&&null===Module.websocket.subprotocol&&(c="null",u=void 0),(n=new(ENVIRONMENT_IS_NODE?require("ws"):WebSocket)(a,u)).binaryType="arraybuffer"}catch(e){throw new FS.ErrnoError(ERRNO_CODES.EHOSTUNREACH)}var l={addr:t,port:r,socket:n,dgram_send_queue:[]};return SOCKFS.websocket_sock_ops.addPeer(e,l),SOCKFS.websocket_sock_ops.handlePeerEvents(e,l),2===e.type&&void 0!==e.sport&&l.dgram_send_queue.push(new Uint8Array([255,255,255,255,"p".charCodeAt(0),"o".charCodeAt(0),"r".charCodeAt(0),"t".charCodeAt(0),(65280&e.sport)>>8,255&e.sport])),l},getPeer:function(e,t,r){return e.peers[t+":"+r]},addPeer:function(e,t){e.peers[t.addr+":"+t.port]=t},removePeer:function(e,t){delete e.peers[t.addr+":"+t.port]},handlePeerEvents:function(e,t){var r=!0,n=function(){Module.websocket.emit("open",e.stream.fd);try{for(var r=t.dgram_send_queue.shift();r;)t.socket.send(r),r=t.dgram_send_queue.shift()}catch(e){t.socket.close()}};function i(n){if("string"==typeof n){n=(new TextEncoder).encode(n)}else{if(assert(void 0!==n.byteLength),0==n.byteLength)return;n=new Uint8Array(n)}var i=r;if(r=!1,i&&10===n.length&&255===n[0]&&255===n[1]&&255===n[2]&&255===n[3]&&n[4]==="p".charCodeAt(0)&&n[5]==="o".charCodeAt(0)&&n[6]==="r".charCodeAt(0)&&n[7]==="t".charCodeAt(0)){var o=n[8]<<8|n[9];return SOCKFS.websocket_sock_ops.removePeer(e,t),t.port=o,void SOCKFS.websocket_sock_ops.addPeer(e,t)}e.recv_queue.push({addr:t.addr,port:t.port,data:n}),Module.websocket.emit("message",e.stream.fd)}ENVIRONMENT_IS_NODE?(t.socket.on("open",n),t.socket.on("message",(function(e,t){t.binary&&i(new Uint8Array(e).buffer)})),t.socket.on("close",(function(){Module.websocket.emit("close",e.stream.fd)})),t.socket.on("error",(function(t){e.error=ERRNO_CODES.ECONNREFUSED,Module.websocket.emit("error",[e.stream.fd,e.error,"ECONNREFUSED: Connection refused"])}))):(t.socket.onopen=n,t.socket.onclose=function(){Module.websocket.emit("close",e.stream.fd)},t.socket.onmessage=function(e){i(e.data)},t.socket.onerror=function(t){e.error=ERRNO_CODES.ECONNREFUSED,Module.websocket.emit("error",[e.stream.fd,e.error,"ECONNREFUSED: Connection refused"])})},poll:function(e){if(1===e.type&&e.server)return e.pending.length?65:0;var t=0,r=1===e.type?SOCKFS.websocket_sock_ops.getPeer(e,e.daddr,e.dport):null;return(e.recv_queue.length||!r||r&&r.socket.readyState===r.socket.CLOSING||r&&r.socket.readyState===r.socket.CLOSED)&&(t|=65),(!r||r&&r.socket.readyState===r.socket.OPEN)&&(t|=4),(r&&r.socket.readyState===r.socket.CLOSING||r&&r.socket.readyState===r.socket.CLOSED)&&(t|=16),t},ioctl:function(e,t,r){if(21531===t){var n=0;return e.recv_queue.length&&(n=e.recv_queue[0].data.length),HEAP32[r>>2]=n,0}return ERRNO_CODES.EINVAL},close:function(e){if(e.server){try{e.server.close()}catch(e){}e.server=null}for(var t=Object.keys(e.peers),r=0;r<t.length;r++){var n=e.peers[t[r]];try{n.socket.close()}catch(e){}SOCKFS.websocket_sock_ops.removePeer(e,n)}return 0},bind:function(e,t,r){if(void 0!==e.saddr||void 0!==e.sport)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(e.saddr=t,e.sport=r,2===e.type){e.server&&(e.server.close(),e.server=null);try{e.sock_ops.listen(e,0)}catch(e){if(!(e instanceof FS.ErrnoError))throw e;if(e.errno!==ERRNO_CODES.EOPNOTSUPP)throw e}}},connect:function(e,t,r){if(e.server)throw new FS.ErrnoError(ERRNO_CODES.EOPNOTSUPP);if(void 0!==e.daddr&&void 0!==e.dport){var n=SOCKFS.websocket_sock_ops.getPeer(e,e.daddr,e.dport);if(n)throw n.socket.readyState===n.socket.CONNECTING?new FS.ErrnoError(ERRNO_CODES.EALREADY):new FS.ErrnoError(ERRNO_CODES.EISCONN)}var i=SOCKFS.websocket_sock_ops.createPeer(e,t,r);throw e.daddr=i.addr,e.dport=i.port,new FS.ErrnoError(ERRNO_CODES.EINPROGRESS)},listen:function(e,t){if(!ENVIRONMENT_IS_NODE)throw new FS.ErrnoError(ERRNO_CODES.EOPNOTSUPP);if(e.server)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var r=require("ws").Server,n=e.saddr;e.server=new r({host:n,port:e.sport}),Module.websocket.emit("listen",e.stream.fd),e.server.on("connection",(function(t){if(1===e.type){var r=SOCKFS.createSocket(e.family,e.type,e.protocol),n=SOCKFS.websocket_sock_ops.createPeer(r,t);r.daddr=n.addr,r.dport=n.port,e.pending.push(r),Module.websocket.emit("connection",r.stream.fd)}else SOCKFS.websocket_sock_ops.createPeer(e,t),Module.websocket.emit("connection",e.stream.fd)})),e.server.on("closed",(function(){Module.websocket.emit("close",e.stream.fd),e.server=null})),e.server.on("error",(function(t){e.error=ERRNO_CODES.EHOSTUNREACH,Module.websocket.emit("error",[e.stream.fd,e.error,"EHOSTUNREACH: Host is unreachable"])}))},accept:function(e){if(!e.server)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var t=e.pending.shift();return t.stream.flags=e.stream.flags,t},getname:function(e,t){var r,n;if(t){if(void 0===e.daddr||void 0===e.dport)throw new FS.ErrnoError(ERRNO_CODES.ENOTCONN);r=e.daddr,n=e.dport}else r=e.saddr||0,n=e.sport||0;return{addr:r,port:n}},sendmsg:function(e,t,r,n,i,o){if(2===e.type){if(void 0!==i&&void 0!==o||(i=e.daddr,o=e.dport),void 0===i||void 0===o)throw new FS.ErrnoError(ERRNO_CODES.EDESTADDRREQ)}else i=e.daddr,o=e.dport;var a,s=SOCKFS.websocket_sock_ops.getPeer(e,i,o);if(1===e.type){if(!s||s.socket.readyState===s.socket.CLOSING||s.socket.readyState===s.socket.CLOSED)throw new FS.ErrnoError(ERRNO_CODES.ENOTCONN);if(s.socket.readyState===s.socket.CONNECTING)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN)}if(ArrayBuffer.isView(t)&&(r+=t.byteOffset,t=t.buffer),a=t.slice(r,r+n),2===e.type&&(!s||s.socket.readyState!==s.socket.OPEN))return s&&s.socket.readyState!==s.socket.CLOSING&&s.socket.readyState!==s.socket.CLOSED||(s=SOCKFS.websocket_sock_ops.createPeer(e,i,o)),s.dgram_send_queue.push(a),n;try{return s.socket.send(a),n}catch(e){throw new FS.ErrnoError(ERRNO_CODES.EINVAL)}},recvmsg:function(e,t){if(1===e.type&&e.server)throw new FS.ErrnoError(ERRNO_CODES.ENOTCONN);var r=e.recv_queue.shift();if(!r){if(1===e.type){var n=SOCKFS.websocket_sock_ops.getPeer(e,e.daddr,e.dport);if(n){if(n.socket.readyState===n.socket.CLOSING||n.socket.readyState===n.socket.CLOSED)return null;throw new FS.ErrnoError(ERRNO_CODES.EAGAIN)}throw new FS.ErrnoError(ERRNO_CODES.ENOTCONN)}throw new FS.ErrnoError(ERRNO_CODES.EAGAIN)}var i=r.data.byteLength||r.data.length,o=r.data.byteOffset||0,a=r.data.buffer||r.data,s=Math.min(t,i),c={buffer:new Uint8Array(a,o,s),addr:r.addr,port:r.port};if(1===e.type&&s<i){var u=i-s;r.data=new Uint8Array(a,o+s,u),e.recv_queue.unshift(r)}return c}}};function __inet_pton4_raw(e){for(var t=e.split("."),r=0;r<4;r++){var n=Number(t[r]);if(isNaN(n))return null;t[r]=n}return(t[0]|t[1]<<8|t[2]<<16|t[3]<<24)>>>0}function jstoi_q(e){return parseInt(e)}function __inet_pton6_raw(e){var t,r,n,i,o=[];if(!/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i.test(e))return null;if("::"===e)return[0,0,0,0,0,0,0,0];for((e=0===e.indexOf("::")?e.replace("::","Z:"):e.replace("::",":Z:")).indexOf(".")>0?((t=(e=e.replace(new RegExp("[.]","g"),":")).split(":"))[t.length-4]=jstoi_q(t[t.length-4])+256*jstoi_q(t[t.length-3]),t[t.length-3]=jstoi_q(t[t.length-2])+256*jstoi_q(t[t.length-1]),t=t.slice(0,t.length-2)):t=e.split(":"),n=0,i=0,r=0;r<t.length;r++)if("string"==typeof t[r])if("Z"===t[r]){for(i=0;i<8-t.length+1;i++)o[r+i]=0;n=i-1}else o[r+n]=_htons(parseInt(t[r],16));else o[r+n]=t[r];return[o[1]<<16|o[0],o[3]<<16|o[2],o[5]<<16|o[4],o[7]<<16|o[6]]}var DNS={address_map:{id:1,addrs:{},names:{}},lookup_name:function(e){var t,r=__inet_pton4_raw(e);if(null!==r)return e;if(null!==(r=__inet_pton6_raw(e)))return e;if(DNS.address_map.addrs[e])t=DNS.address_map.addrs[e];else{var n=DNS.address_map.id++;assert(n<65535,"exceeded max address mappings of 65535"),t="172.29."+(255&n)+"."+(65280&n),DNS.address_map.names[t]=e,DNS.address_map.addrs[e]=t}return t},lookup_addr:function(e){return DNS.address_map.names[e]?DNS.address_map.names[e]:null}};function __inet_ntop4_raw(e){return(255&e)+"."+(e>>8&255)+"."+(e>>16&255)+"."+(e>>24&255)}function __inet_ntop6_raw(e){var t="",r=0,n=0,i=0,o=0,a=0,s=0,c=[65535&e[0],e[0]>>16,65535&e[1],e[1]>>16,65535&e[2],e[2]>>16,65535&e[3],e[3]>>16],u=!0,l="";for(s=0;s<5;s++)if(0!==c[s]){u=!1;break}if(u){if(l=__inet_ntop4_raw(c[6]|c[7]<<16),-1===c[5])return t="::ffff:",t+=l;if(0===c[5])return t="::","0.0.0.0"===l&&(l=""),"0.0.0.1"===l&&(l="1"),t+=l}for(r=0;r<8;r++)0===c[r]&&(r-i>1&&(a=0),i=r,a++),a>n&&(o=r-(n=a)+1);for(r=0;r<8;r++)n>1&&0===c[r]&&r>=o&&r<o+n?r===o&&(t+=":",0===o&&(t+=":")):(t+=Number(_ntohs(65535&c[r])).toString(16),t+=r<7?":":"");return t}function __read_sockaddr(e,t){var r,n=HEAP16[e>>1],i=_ntohs(HEAPU16[e+2>>1]);switch(n){case 2:if(16!==t)return{errno:28};r=__inet_ntop4_raw(r=HEAP32[e+4>>2]);break;case 10:if(28!==t)return{errno:28};r=__inet_ntop6_raw(r=[HEAP32[e+8>>2],HEAP32[e+12>>2],HEAP32[e+16>>2],HEAP32[e+20>>2]]);break;default:return{errno:5}}return{family:n,addr:r,port:i}}function __write_sockaddr(e,t,r,n,i){switch(t){case 2:r=__inet_pton4_raw(r),i&&(HEAP32[i>>2]=16),HEAP16[e>>1]=t,HEAP32[e+4>>2]=r,HEAP16[e+2>>1]=_htons(n);break;case 10:r=__inet_pton6_raw(r),i&&(HEAP32[i>>2]=28),HEAP32[e>>2]=t,HEAP32[e+8>>2]=r[0],HEAP32[e+12>>2]=r[1],HEAP32[e+16>>2]=r[2],HEAP32[e+20>>2]=r[3],HEAP16[e+2>>1]=_htons(n),HEAP32[e+4>>2]=0,HEAP32[e+24>>2]=0;break;default:return 5}return 0}function ___sys_socketcall(e,t){try{SYSCALLS.varargs=t;var r=function(){var e=SOCKFS.getSocket(SYSCALLS.get());if(!e)throw new FS.ErrnoError(8);return e},n=function(e){var t=SYSCALLS.get(),r=SYSCALLS.get();if(e&&0===t)return null;var n=__read_sockaddr(t,r);if(n.errno)throw new FS.ErrnoError(n.errno);return n.addr=DNS.lookup_addr(n.addr)||n.addr,n};switch(e){case 1:var i=SYSCALLS.get(),o=SYSCALLS.get(),a=SYSCALLS.get();return(s=SOCKFS.createSocket(i,o,a)).stream.fd;case 2:var s=r(),c=n();return s.sock_ops.bind(s,c.addr,c.port),0;case 3:s=r(),c=n();return s.sock_ops.connect(s,c.addr,c.port),0;case 4:s=r();var u=SYSCALLS.get();return s.sock_ops.listen(s,u),0;case 5:s=r();var l=SYSCALLS.get(),f=SYSCALLS.get(),d=s.sock_ops.accept(s);if(l)__write_sockaddr(l,d.family,DNS.lookup_name(d.daddr),d.dport,f);return d.stream.fd;case 6:s=r(),l=SYSCALLS.get(),f=SYSCALLS.get(),__write_sockaddr(l,s.family,DNS.lookup_name(s.saddr||"0.0.0.0"),s.sport,f);return 0;case 7:s=r(),l=SYSCALLS.get(),f=SYSCALLS.get();if(!s.daddr)return-53;__write_sockaddr(l,s.family,DNS.lookup_name(s.daddr),s.dport,f);return 0;case 11:s=r();var h=SYSCALLS.get(),p=SYSCALLS.get(),m=(SYSCALLS.get(),n(!0));return m?s.sock_ops.sendmsg(s,HEAP8,h,p,m.addr,m.port):FS.write(s.stream,HEAP8,h,p);case 12:s=r();var _=SYSCALLS.get(),g=SYSCALLS.get();SYSCALLS.get(),l=SYSCALLS.get(),f=SYSCALLS.get();if(!(D=s.sock_ops.recvmsg(s,g)))return 0;if(l)__write_sockaddr(l,s.family,DNS.lookup_name(D.addr),D.port,f);return HEAPU8.set(D.buffer,_),D.buffer.byteLength;case 14:return-50;case 15:s=r();var y=SYSCALLS.get(),v=SYSCALLS.get(),E=SYSCALLS.get(),w=SYSCALLS.get();return 1===y&&4===v?(HEAP32[E>>2]=s.error,HEAP32[w>>2]=4,s.error=null,0):-50;case 16:s=r(),h=SYSCALLS.get(),SYSCALLS.get();var S,b=HEAP32[h+8>>2],F=HEAP32[h+12>>2],k=HEAP32[h>>2],A=HEAP32[h+4>>2];if(k){if((c=__read_sockaddr(k,A)).errno)return-c.errno;S=c.port,l=DNS.lookup_addr(c.addr)||c.addr}for(var L=0,x=0;x<F;x++)L+=HEAP32[b+(8*x+4)>>2];var T=new Uint8Array(L),P=0;for(x=0;x<F;x++)for(var C=HEAP32[b+(8*x+0)>>2],O=HEAP32[b+(8*x+4)>>2],R=0;R<O;R++)T[P++]=HEAP8[C+R>>0];return s.sock_ops.sendmsg(s,T,0,L,l,S);case 17:for(s=r(),h=SYSCALLS.get(),SYSCALLS.get(),b=HEAP32[h+8>>2],F=HEAP32[h+12>>2],L=0,x=0;x<F;x++)L+=HEAP32[b+(8*x+4)>>2];var D;if(!(D=s.sock_ops.recvmsg(s,L)))return 0;if(k=HEAP32[h>>2])__write_sockaddr(k,s.family,DNS.lookup_name(D.addr),D.port);var I=0,N=D.buffer.byteLength;for(x=0;N>0&&x<F;x++){C=HEAP32[b+(8*x+0)>>2];if(O=HEAP32[b+(8*x+4)>>2]){p=Math.min(O,N),_=D.buffer.subarray(I,I+p);HEAPU8.set(_,C+I),I+=p,N-=p}}return I;default:return-52}}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_stat64(e,t){try{return e=SYSCALLS.getStr(e),SYSCALLS.doStat(FS.stat,e,t)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_unlink(e){try{return e=SYSCALLS.getStr(e),FS.unlink(e),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function getShiftFromSize(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function embind_init_charCodes(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);embind_charCodes=e}var embind_charCodes=void 0;function readLatin1String(e){for(var t="",r=e;HEAPU8[r];)t+=embind_charCodes[HEAPU8[r++]];return t}var awaitingDependencies={},registeredTypes={},typeDependencies={},char_0=48,char_9=57;function makeLegalFunctionName(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=char_0&&t<=char_9?"_"+e:e}function createNamedFunction(e,t){return e=makeLegalFunctionName(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function extendError(e,t){var r=createNamedFunction(t,(function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var BindingError=void 0;function throwBindingError(e){throw new BindingError(e)}var InternalError=void 0;function throwInternalError(e){throw new InternalError(e)}function whenDependentTypesAreResolved(e,t,r){function n(t){var n=r(t);n.length!==e.length&&throwInternalError("Mismatched type converter count");for(var i=0;i<e.length;++i)registerType(e[i],n[i])}e.forEach((function(e){typeDependencies[e]=t}));var i=new Array(t.length),o=[],a=0;t.forEach((function(e,t){registeredTypes.hasOwnProperty(e)?i[t]=registeredTypes[e]:(o.push(e),awaitingDependencies.hasOwnProperty(e)||(awaitingDependencies[e]=[]),awaitingDependencies[e].push((function(){i[t]=registeredTypes[e],++a===o.length&&n(i)})))})),0===o.length&&n(i)}function registerType(e,t,r){if(r=r||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||throwBindingError('type "'+n+'" must have a positive integer typeid pointer'),registeredTypes.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;throwBindingError("Cannot register type '"+n+"' twice")}if(registeredTypes[e]=t,delete typeDependencies[e],awaitingDependencies.hasOwnProperty(e)){var i=awaitingDependencies[e];delete awaitingDependencies[e],i.forEach((function(e){e()}))}}function __embind_register_bool(e,t,r,n,i){var o=getShiftFromSize(r);registerType(e,{name:t=readLatin1String(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:i},argPackAdvance:8,readValueFromPointer:function(e){var n;if(1===r)n=HEAP8;else if(2===r)n=HEAP16;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);n=HEAP32}return this.fromWireType(n[e>>o])},destructorFunction:null})}function ClassHandle_isAliasOf(e){if(!(this instanceof ClassHandle))return!1;if(!(e instanceof ClassHandle))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)i=n.upcast(i),n=n.baseClass;return t===n&&r===i}function shallowCopyInternalPointer(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function throwInstanceAlreadyDeleted(e){throwBindingError(e.$$.ptrType.registeredClass.name+" instance already deleted")}var finalizationGroup=!1;function detachFinalizer(e){}function runDestructor(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function releaseClassHandle(e){e.count.value-=1,0===e.count.value&&runDestructor(e)}function attachFinalizer(e){return"undefined"==typeof FinalizationGroup?(attachFinalizer=function(e){return e},e):(finalizationGroup=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next()){var r=t.value;r.ptr?releaseClassHandle(r):console.warn("object already deleted: "+r.ptr)}})),attachFinalizer=function(e){return finalizationGroup.register(e,e.$$,e.$$),e},detachFinalizer=function(e){finalizationGroup.unregister(e.$$)},attachFinalizer(e))}function ClassHandle_clone(){if(this.$$.ptr||throwInstanceAlreadyDeleted(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=attachFinalizer(Object.create(Object.getPrototypeOf(this),{$$:{value:shallowCopyInternalPointer(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function ClassHandle_delete(){this.$$.ptr||throwInstanceAlreadyDeleted(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&throwBindingError("Object already scheduled for deletion"),detachFinalizer(this),releaseClassHandle(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function ClassHandle_isDeleted(){return!this.$$.ptr}var delayFunction=void 0,deletionQueue=[];function flushPendingDeletes(){for(;deletionQueue.length;){var e=deletionQueue.pop();e.$$.deleteScheduled=!1,e.delete()}}function ClassHandle_deleteLater(){return this.$$.ptr||throwInstanceAlreadyDeleted(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&throwBindingError("Object already scheduled for deletion"),deletionQueue.push(this),1===deletionQueue.length&&delayFunction&&delayFunction(flushPendingDeletes),this.$$.deleteScheduled=!0,this}function init_ClassHandle(){ClassHandle.prototype.isAliasOf=ClassHandle_isAliasOf,ClassHandle.prototype.clone=ClassHandle_clone,ClassHandle.prototype.delete=ClassHandle_delete,ClassHandle.prototype.isDeleted=ClassHandle_isDeleted,ClassHandle.prototype.deleteLater=ClassHandle_deleteLater}function ClassHandle(){}var registeredPointers={};function ensureOverloadTable(e,t,r){if(void 0===e[t].overloadTable){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||throwBindingError("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}}function exposePublicSymbol(e,t,r){Module.hasOwnProperty(e)?((void 0===r||void 0!==Module[e].overloadTable&&void 0!==Module[e].overloadTable[r])&&throwBindingError("Cannot register public name '"+e+"' twice"),ensureOverloadTable(Module,e,e),Module.hasOwnProperty(r)&&throwBindingError("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),Module[e].overloadTable[r]=t):(Module[e]=t,void 0!==r&&(Module[e].numArguments=r))}function RegisteredClass(e,t,r,n,i,o,a,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=i,this.getActualType=o,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}function upcastPointer(e,t,r){for(;t!==r;)t.upcast||throwBindingError("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function constNoSmartPtrRawPointerToWireType(e,t){if(null===t)return this.isReference&&throwBindingError("null is not a valid "+this.name),0;t.$$||throwBindingError('Cannot pass "'+_embind_repr(t)+'" as a '+this.name),t.$$.ptr||throwBindingError("Cannot pass deleted object as a pointer of type "+this.name);var r=t.$$.ptrType.registeredClass;return upcastPointer(t.$$.ptr,r,this.registeredClass)}function genericPointerToWireType(e,t){var r;if(null===t)return this.isReference&&throwBindingError("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t.$$||throwBindingError('Cannot pass "'+_embind_repr(t)+'" as a '+this.name),t.$$.ptr||throwBindingError("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&throwBindingError("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;if(r=upcastPointer(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&throwBindingError("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:throwBindingError("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var i=t.clone();r=this.rawShare(r,__emval_register((function(){i.delete()}))),null!==e&&e.push(this.rawDestructor,r)}break;default:throwBindingError("Unsupporting sharing policy")}return r}function nonConstNoSmartPtrRawPointerToWireType(e,t){if(null===t)return this.isReference&&throwBindingError("null is not a valid "+this.name),0;t.$$||throwBindingError('Cannot pass "'+_embind_repr(t)+'" as a '+this.name),t.$$.ptr||throwBindingError("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&throwBindingError("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;return upcastPointer(t.$$.ptr,r,this.registeredClass)}function simpleReadValueFromPointer(e){return this.fromWireType(HEAPU32[e>>2])}function RegisteredPointer_getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function RegisteredPointer_destructor(e){this.rawDestructor&&this.rawDestructor(e)}function RegisteredPointer_deleteObject(e){null!==e&&e.delete()}function downcastPointer(e,t,r){if(t===r)return e;if(void 0===r.baseClass)return null;var n=downcastPointer(e,t,r.baseClass);return null===n?null:r.downcast(n)}function getInheritedInstanceCount(){return Object.keys(registeredInstances).length}function getLiveInheritedInstances(){var e=[];for(var t in registeredInstances)registeredInstances.hasOwnProperty(t)&&e.push(registeredInstances[t]);return e}function setDelayFunction(e){delayFunction=e,deletionQueue.length&&delayFunction&&delayFunction(flushPendingDeletes)}function init_embind(){Module.getInheritedInstanceCount=getInheritedInstanceCount,Module.getLiveInheritedInstances=getLiveInheritedInstances,Module.flushPendingDeletes=flushPendingDeletes,Module.setDelayFunction=setDelayFunction}var registeredInstances={};function getBasestPointer(e,t){for(void 0===t&&throwBindingError("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function getInheritedInstance(e,t){return t=getBasestPointer(e,t),registeredInstances[t]}function makeClassHandle(e,t){return t.ptrType&&t.ptr||throwInternalError("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!==!!t.smartPtr&&throwInternalError("Both smartPtrType and smartPtr must be specified"),t.count={value:1},attachFinalizer(Object.create(e,{$$:{value:t}}))}function RegisteredPointer_fromWireType(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=getInheritedInstance(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function i(){return this.isSmartPointer?makeClassHandle(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):makeClassHandle(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o,a=this.registeredClass.getActualType(t),s=registeredPointers[a];if(!s)return i.call(this);o=this.isConst?s.constPointerType:s.pointerType;var c=downcastPointer(t,this.registeredClass,o.registeredClass);return null===c?i.call(this):this.isSmartPointer?makeClassHandle(o.registeredClass.instancePrototype,{ptrType:o,ptr:c,smartPtrType:this,smartPtr:e}):makeClassHandle(o.registeredClass.instancePrototype,{ptrType:o,ptr:c})}function init_RegisteredPointer(){RegisteredPointer.prototype.getPointee=RegisteredPointer_getPointee,RegisteredPointer.prototype.destructor=RegisteredPointer_destructor,RegisteredPointer.prototype.argPackAdvance=8,RegisteredPointer.prototype.readValueFromPointer=simpleReadValueFromPointer,RegisteredPointer.prototype.deleteObject=RegisteredPointer_deleteObject,RegisteredPointer.prototype.fromWireType=RegisteredPointer_fromWireType}function RegisteredPointer(e,t,r,n,i,o,a,s,c,u,l){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=i,this.pointeeType=o,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=c,this.rawShare=u,this.rawDestructor=l,i||void 0!==t.baseClass?this.toWireType=genericPointerToWireType:n?(this.toWireType=constNoSmartPtrRawPointerToWireType,this.destructorFunction=null):(this.toWireType=nonConstNoSmartPtrRawPointerToWireType,this.destructorFunction=null)}function replacePublicSymbol(e,t,r){Module.hasOwnProperty(e)||throwInternalError("Replacing nonexistant public symbol"),void 0!==Module[e].overloadTable&&void 0!==r?Module[e].overloadTable[r]=t:(Module[e]=t,Module[e].argCount=r)}function getDynCaller(e,t){assert(e.indexOf("j")>=0,"getDynCaller should only be called with i64 sigs");var r=[];return function(){r.length=arguments.length;for(var n=0;n<arguments.length;n++)r[n]=arguments[n];return dynCall(e,t,r)}}function embind__requireFunction(e,t){var r=-1!=(e=readLatin1String(e)).indexOf("j")?getDynCaller(e,t):wasmTable.get(t);return"function"!=typeof r&&throwBindingError("unknown function pointer with signature "+e+": "+t),r}var UnboundTypeError=void 0;function getTypeName(e){var t=___getTypeName(e),r=readLatin1String(t);return _free(t),r}function throwUnboundTypeError(e,t){var r=[],n={};throw t.forEach((function e(t){n[t]||registeredTypes[t]||(typeDependencies[t]?typeDependencies[t].forEach(e):(r.push(t),n[t]=!0))})),new UnboundTypeError(e+": "+r.map(getTypeName).join([", "]))}function __embind_register_class(e,t,r,n,i,o,a,s,c,u,l,f,d){l=readLatin1String(l),o=embind__requireFunction(i,o),s&&(s=embind__requireFunction(a,s)),u&&(u=embind__requireFunction(c,u)),d=embind__requireFunction(f,d);var h=makeLegalFunctionName(l);exposePublicSymbol(h,(function(){throwUnboundTypeError("Cannot construct "+l+" due to unbound types",[n])})),whenDependentTypesAreResolved([e,t,r],n?[n]:[],(function(t){var r,i;t=t[0],i=n?(r=t.registeredClass).instancePrototype:ClassHandle.prototype;var a=createNamedFunction(h,(function(){if(Object.getPrototypeOf(this)!==c)throw new BindingError("Use 'new' to construct "+l);if(void 0===f.constructor_body)throw new BindingError(l+" has no accessible constructor");var e=f.constructor_body[arguments.length];if(void 0===e)throw new BindingError("Tried to invoke ctor of "+l+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(f.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),c=Object.create(i,{constructor:{value:a}});a.prototype=c;var f=new RegisteredClass(l,a,c,d,r,o,s,u),p=new RegisteredPointer(l,f,!0,!1,!1),m=new RegisteredPointer(l+"*",f,!1,!1,!1),_=new RegisteredPointer(l+" const*",f,!1,!0,!1);return registeredPointers[e]={pointerType:m,constPointerType:_},replacePublicSymbol(h,a),[p,m,_]}))}function new_(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=createNamedFunction(e.name||"unknownFunctionName",(function(){}));r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return i instanceof Object?i:n}function runDestructors(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function craftInvokerFunction(e,t,r,n,i){var o=t.length;o<2&&throwBindingError("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==t[1]&&null!==r,s=!1,c=1;c<t.length;++c)if(null!==t[c]&&void 0===t[c].destructorFunction){s=!0;break}var u="void"!==t[0].name,l="",f="";for(c=0;c<o-2;++c)l+=(0!==c?", ":"")+"arg"+c,f+=(0!==c?", ":"")+"arg"+c+"Wired";var d="return function "+makeLegalFunctionName(e)+"("+l+") {\nif (arguments.length !== "+(o-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(o-2)+" args!');\n}\n";s&&(d+="var destructors = [];\n");var h=s?"destructors":"null",p=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[throwBindingError,n,i,runDestructors,t[0],t[1]];a&&(d+="var thisWired = classParam.toWireType("+h+", this);\n");for(c=0;c<o-2;++c)d+="var arg"+c+"Wired = argType"+c+".toWireType("+h+", arg"+c+"); // "+t[c+2].name+"\n",p.push("argType"+c),m.push(t[c+2]);if(a&&(f="thisWired"+(f.length>0?", ":"")+f),d+=(u?"var rv = ":"")+"invoker(fn"+(f.length>0?", ":"")+f+");\n",s)d+="runDestructors(destructors);\n";else for(c=a?1:2;c<t.length;++c){var _=1===c?"thisWired":"arg"+(c-2)+"Wired";null!==t[c].destructorFunction&&(d+=_+"_dtor("+_+"); // "+t[c].name+"\n",p.push(_+"_dtor"),m.push(t[c].destructorFunction))}return u&&(d+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),d+="}\n",p.push(d),new_(Function,p).apply(null,m)}function heap32VectorToArray(e,t){for(var r=[],n=0;n<e;n++)r.push(HEAP32[(t>>2)+n]);return r}function __embind_register_class_class_function(e,t,r,n,i,o,a){var s=heap32VectorToArray(r,n);t=readLatin1String(t),o=embind__requireFunction(i,o),whenDependentTypesAreResolved([],[e],(function(e){var n=(e=e[0]).name+"."+t;function i(){throwUnboundTypeError("Cannot call "+n+" due to unbound types",s)}var c=e.registeredClass.constructor;return void 0===c[t]?(i.argCount=r-1,c[t]=i):(ensureOverloadTable(c,t,n),c[t].overloadTable[r-1]=i),whenDependentTypesAreResolved([],s,(function(e){var i=[e[0],null].concat(e.slice(1)),s=craftInvokerFunction(n,i,null,o,a);return void 0===c[t].overloadTable?(s.argCount=r-1,c[t]=s):c[t].overloadTable[r-1]=s,[]})),[]}))}function __embind_register_class_constructor(e,t,r,n,i,o){assert(t>0);var a=heap32VectorToArray(t,r);i=embind__requireFunction(n,i);var s=[o],c=[];whenDependentTypesAreResolved([],[e],(function(e){var r="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new BindingError("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){throwUnboundTypeError("Cannot construct "+e.name+" due to unbound types",a)},whenDependentTypesAreResolved([],a,(function(n){return e.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&throwBindingError(r+" called with "+arguments.length+" arguments, expected "+(t-1)),c.length=0,s.length=t;for(var e=1;e<t;++e)s[e]=n[e].toWireType(c,arguments[e-1]);var o=i.apply(null,s);return runDestructors(c),n[0].fromWireType(o)},[]})),[]}))}var _emscripten_get_now,emval_free_list=[],emval_handle_array=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function __emval_decref(e){e>4&&0==--emval_handle_array[e].refcount&&(emval_handle_array[e]=void 0,emval_free_list.push(e))}function count_emval_handles(){for(var e=0,t=5;t<emval_handle_array.length;++t)void 0!==emval_handle_array[t]&&++e;return e}function get_first_emval(){for(var e=5;e<emval_handle_array.length;++e)if(void 0!==emval_handle_array[e])return emval_handle_array[e];return null}function init_emval(){Module.count_emval_handles=count_emval_handles,Module.get_first_emval=get_first_emval}function __emval_register(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=emval_free_list.length?emval_free_list.pop():emval_handle_array.length;return emval_handle_array[t]={refcount:1,value:e},t}}function __embind_register_emval(e,t){registerType(e,{name:t=readLatin1String(t),fromWireType:function(e){var t=emval_handle_array[e].value;return __emval_decref(e),t},toWireType:function(e,t){return __emval_register(t)},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:null})}function _embind_repr(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function floatReadValueFromPointer(e,t){switch(t){case 2:return function(e){return this.fromWireType(HEAPF32[e>>2])};case 3:return function(e){return this.fromWireType(HEAPF64[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function __embind_register_float(e,t,r){var n=getShiftFromSize(r);registerType(e,{name:t=readLatin1String(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+_embind_repr(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:floatReadValueFromPointer(t,n),destructorFunction:null})}function __embind_register_function(e,t,r,n,i,o){var a=heap32VectorToArray(t,r);e=readLatin1String(e),i=embind__requireFunction(n,i),exposePublicSymbol(e,(function(){throwUnboundTypeError("Cannot call "+e+" due to unbound types",a)}),t-1),whenDependentTypesAreResolved([],a,(function(r){var n=[r[0],null].concat(r.slice(1));return replacePublicSymbol(e,craftInvokerFunction(e,n,null,i,o),t-1),[]}))}function integerReadValueFromPointer(e,t,r){switch(t){case 0:return r?function(e){return HEAP8[e]}:function(e){return HEAPU8[e]};case 1:return r?function(e){return HEAP16[e>>1]}:function(e){return HEAPU16[e>>1]};case 2:return r?function(e){return HEAP32[e>>2]}:function(e){return HEAPU32[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function __embind_register_integer(e,t,r,n,i){t=readLatin1String(t),-1===i&&(i=4294967295);var o=getShiftFromSize(r),a=function(e){return e};if(0===n){var s=32-8*r;a=function(e){return e<<s>>>s}}var c=-1!=t.indexOf("unsigned");registerType(e,{name:t,fromWireType:a,toWireType:function(e,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError('Cannot convert "'+_embind_repr(r)+'" to '+this.name);if(r<n||r>i)throw new TypeError('Passing a number "'+_embind_repr(r)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+n+", "+i+"]!");return c?r>>>0:0|r},argPackAdvance:8,readValueFromPointer:integerReadValueFromPointer(t,o,0!==n),destructorFunction:null})}function __embind_register_memory_view(e,t,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function i(e){var t=HEAPU32,r=t[e>>=2],i=t[e+1];return new n(buffer,i,r)}registerType(e,{name:r=readLatin1String(r),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})}function __embind_register_std_string(e,t){var r="std::string"===(t=readLatin1String(t));registerType(e,{name:t,fromWireType:function(e){var t,n=HEAPU32[e>>2];if(r)for(var i=e+4,o=0;o<=n;++o){var a=e+4+o;if(o==n||0==HEAPU8[a]){var s=UTF8ToString(i,a-i);void 0===t?t=s:(t+=String.fromCharCode(0),t+=s),i=a+1}}else{var c=new Array(n);for(o=0;o<n;++o)c[o]=String.fromCharCode(HEAPU8[e+4+o]);t=c.join("")}return _free(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n="string"==typeof t;n||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||throwBindingError("Cannot pass non-string to std::string");var i=(r&&n?function(){return lengthBytesUTF8(t)}:function(){return t.length})(),o=_malloc(4+i+1);if(HEAPU32[o>>2]=i,r&&n)stringToUTF8(t,o+4,i+1);else if(n)for(var a=0;a<i;++a){var s=t.charCodeAt(a);s>255&&(_free(o),throwBindingError("String has UTF-16 code units that do not fit in 8 bits")),HEAPU8[o+4+a]=s}else for(a=0;a<i;++a)HEAPU8[o+4+a]=t[a];return null!==e&&e.push(_free,o),o},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function __embind_register_std_wstring(e,t,r){var n,i,o,a,s;r=readLatin1String(r),2===t?(n=UTF16ToString,i=stringToUTF16,a=lengthBytesUTF16,o=function(){return HEAPU16},s=1):4===t&&(n=UTF32ToString,i=stringToUTF32,a=lengthBytesUTF32,o=function(){return HEAPU32},s=2),registerType(e,{name:r,fromWireType:function(e){for(var r,i=HEAPU32[e>>2],a=o(),c=e+4,u=0;u<=i;++u){var l=e+4+u*t;if(u==i||0==a[l>>s]){var f=n(c,l-c);void 0===r?r=f:(r+=String.fromCharCode(0),r+=f),c=l+t}}return _free(e),r},toWireType:function(e,n){"string"!=typeof n&&throwBindingError("Cannot pass non-string to C++ string type "+r);var o=a(n),c=_malloc(4+o+t);return HEAPU32[c>>2]=o>>s,i(n,c+4,o+t),null!==e&&e.push(_free,c),c},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function __embind_register_void(e,t){registerType(e,{isVoid:!0,name:t=readLatin1String(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}function _abort(){abort()}_emscripten_get_now=ENVIRONMENT_IS_NODE?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var _emscripten_get_now_is_monotonic=!0;function _clock_gettime(e,t){var r;if(0===e)r=Date.now();else{if(1!==e&&4!==e||!_emscripten_get_now_is_monotonic)return setErrNo(28),-1;r=_emscripten_get_now()}return HEAP32[t>>2]=r/1e3|0,HEAP32[t+4>>2]=r%1e3*1e3*1e3|0,0}function _dlclose(e){abort("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function _emscripten_set_main_loop_timing(e,t){if(Browser.mainLoop.timingMode=e,Browser.mainLoop.timingValue=t,!Browser.mainLoop.func)return 1;if(0==e)Browser.mainLoop.scheduler=function(){var e=0|Math.max(0,Browser.mainLoop.tickStartTime+t-_emscripten_get_now());setTimeout(Browser.mainLoop.runner,e)},Browser.mainLoop.method="timeout";else if(1==e)Browser.mainLoop.scheduler=function(){Browser.requestAnimationFrame(Browser.mainLoop.runner)},Browser.mainLoop.method="rAF";else if(2==e){if("undefined"==typeof setImmediate){var r=[],n="setimmediate";addEventListener("message",(function(e){e.data!==n&&e.data.target!==n||(e.stopPropagation(),r.shift()())}),!0),setImmediate=function(e){r.push(e),ENVIRONMENT_IS_WORKER?(void 0===Module.setImmediates&&(Module.setImmediates=[]),Module.setImmediates.push(e),postMessage({target:n})):postMessage(n,"*")}}Browser.mainLoop.scheduler=function(){setImmediate(Browser.mainLoop.runner)},Browser.mainLoop.method="immediate"}return 0}function setMainLoop(e,t,r,n,i){noExitRuntime=!0,assert(!Browser.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Browser.mainLoop.func=e,Browser.mainLoop.arg=n;var o=Browser.mainLoop.currentlyRunningMainloop;if(Browser.mainLoop.runner=function(){if(!ABORT)if(Browser.mainLoop.queue.length>0){var t=Date.now(),r=Browser.mainLoop.queue.shift();if(r.func(r.arg),Browser.mainLoop.remainingBlockers){var n=Browser.mainLoop.remainingBlockers,i=n%1==0?n-1:Math.floor(n);r.counted?Browser.mainLoop.remainingBlockers=i:(i+=.5,Browser.mainLoop.remainingBlockers=(8*n+i)/9)}if(console.log('main loop blocker "'+r.name+'" took '+(Date.now()-t)+" ms"),Browser.mainLoop.updateStatus(),o<Browser.mainLoop.currentlyRunningMainloop)return;setTimeout(Browser.mainLoop.runner,0)}else o<Browser.mainLoop.currentlyRunningMainloop||(Browser.mainLoop.currentFrameNumber=Browser.mainLoop.currentFrameNumber+1|0,1==Browser.mainLoop.timingMode&&Browser.mainLoop.timingValue>1&&Browser.mainLoop.currentFrameNumber%Browser.mainLoop.timingValue!=0?Browser.mainLoop.scheduler():(0==Browser.mainLoop.timingMode&&(Browser.mainLoop.tickStartTime=_emscripten_get_now()),Browser.mainLoop.runIter(e),o<Browser.mainLoop.currentlyRunningMainloop||("object"==typeof SDL&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),Browser.mainLoop.scheduler())))},i||(t&&t>0?_emscripten_set_main_loop_timing(0,1e3/t):_emscripten_set_main_loop_timing(1,1),Browser.mainLoop.scheduler()),r)throw"unwind"}var Browser={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){Browser.mainLoop.scheduler=null,Browser.mainLoop.currentlyRunningMainloop++},resume:function(){Browser.mainLoop.currentlyRunningMainloop++;var e=Browser.mainLoop.timingMode,t=Browser.mainLoop.timingValue,r=Browser.mainLoop.func;Browser.mainLoop.func=null,setMainLoop(r,0,!1,Browser.mainLoop.arg,!0),_emscripten_set_main_loop_timing(e,t),Browser.mainLoop.scheduler()},updateStatus:function(){if(Module.setStatus){var e=Module.statusMessage||"Please wait...",t=Browser.mainLoop.remainingBlockers,r=Browser.mainLoop.expectedBlockers;t?t<r?Module.setStatus(e+" ("+(r-t)+"/"+r+")"):Module.setStatus(e):Module.setStatus("")}},runIter:function(e){if(!ABORT){if(Module.preMainLoop)if(!1===Module.preMainLoop())return;try{e()}catch(e){if(e instanceof ExitStatus)return;if("unwind"==e)return;throw e&&"object"==typeof e&&e.stack&&err("exception thrown: "+[e,e.stack]),e}Module.postMainLoop&&Module.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(Module.preloadPlugins||(Module.preloadPlugins=[]),!Browser.initted){Browser.initted=!0;try{new Blob,Browser.hasBlobConstructor=!0}catch(e){Browser.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}Browser.BlobBuilder="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:Browser.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),Browser.URLObject="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:void 0,Module.noImageDecoding||void 0!==Browser.URLObject||(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),Module.noImageDecoding=!0);var e={canHandle:function(e){return!Module.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(e)},handle:function(e,t,r,n){var i=null;if(Browser.hasBlobConstructor)try{(i=new Blob([e],{type:Browser.getMimetype(t)})).size!==e.length&&(i=new Blob([new Uint8Array(e).buffer],{type:Browser.getMimetype(t)}))}catch(e){warnOnce("Blob constructor present but fails: "+e+"; falling back to blob builder")}if(!i){var o=new Browser.BlobBuilder;o.append(new Uint8Array(e).buffer),i=o.getBlob()}var a=Browser.URLObject.createObjectURL(i),s=new Image;s.onload=function(){assert(s.complete,"Image "+t+" could not be decoded");var n=document.createElement("canvas");n.width=s.width,n.height=s.height,n.getContext("2d").drawImage(s,0,0),Module.preloadedImages[t]=n,Browser.URLObject.revokeObjectURL(a),r&&r(e)},s.onerror=function(e){console.log("Image "+a+" could not be decoded"),n&&n()},s.src=a}};Module.preloadPlugins.push(e);var t={canHandle:function(e){return!Module.noAudioDecoding&&e.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function(e,t,r,n){var i=!1;function o(n){i||(i=!0,Module.preloadedAudios[t]=n,r&&r(e))}function a(){i||(i=!0,Module.preloadedAudios[t]=new Audio,n&&n())}if(!Browser.hasBlobConstructor)return a();try{var s=new Blob([e],{type:Browser.getMimetype(t)})}catch(e){return a()}var c=Browser.URLObject.createObjectURL(s),u=new Audio;u.addEventListener("canplaythrough",(function(){o(u)}),!1),u.onerror=function(r){i||(console.log("warning: browser could not fully decode audio "+t+", trying slower base64 approach"),u.src="data:audio/x-"+t.substr(-3)+";base64,"+function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",n=0,i=0,o=0;o<e.length;o++)for(n=n<<8|e[o],i+=8;i>=6;){var a=n>>i-6&63;i-=6,r+=t[a]}return 2==i?(r+=t[(3&n)<<4],r+="=="):4==i&&(r+=t[(15&n)<<2],r+="="),r}(e),o(u))},u.src=c,Browser.safeSetTimeout((function(){o(u)}),1e4)}};Module.preloadPlugins.push(t);var r=Module.canvas;r&&(r.requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock||r.msRequestPointerLock||function(){},r.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},r.exitPointerLock=r.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",n,!1),document.addEventListener("mozpointerlockchange",n,!1),document.addEventListener("webkitpointerlockchange",n,!1),document.addEventListener("mspointerlockchange",n,!1),Module.elementPointerLock&&r.addEventListener("click",(function(e){!Browser.pointerLock&&Module.canvas.requestPointerLock&&(Module.canvas.requestPointerLock(),e.preventDefault())}),!1))}function n(){Browser.pointerLock=document.pointerLockElement===Module.canvas||document.mozPointerLockElement===Module.canvas||document.webkitPointerLockElement===Module.canvas||document.msPointerLockElement===Module.canvas}},createContext:function(e,t,r,n){if(t&&Module.ctx&&e==Module.canvas)return Module.ctx;var i,o;if(t){var a={antialias:!1,alpha:!1,majorVersion:1};if(n)for(var s in n)a[s]=n[s];void 0!==GL&&(o=GL.createContext(e,a))&&(i=GL.getContext(o).GLctx)}else i=e.getContext("2d");return i?(r&&(t||assert(void 0===GLctx,"cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),Module.ctx=i,t&&GL.makeContextCurrent(o),Module.useWebGL=t,Browser.moduleContextCreatedCallbacks.forEach((function(e){e()})),Browser.init()),i):null},destroyContext:function(e,t,r){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(e,t){Browser.lockPointer=e,Browser.resizeCanvas=t,void 0===Browser.lockPointer&&(Browser.lockPointer=!0),void 0===Browser.resizeCanvas&&(Browser.resizeCanvas=!1);var r=Module.canvas;function n(){Browser.isFullscreen=!1;var e=r.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e?(r.exitFullscreen=Browser.exitFullscreen,Browser.lockPointer&&r.requestPointerLock(),Browser.isFullscreen=!0,Browser.resizeCanvas?Browser.setFullscreenCanvasSize():Browser.updateCanvasDimensions(r)):(e.parentNode.insertBefore(r,e),e.parentNode.removeChild(e),Browser.resizeCanvas?Browser.setWindowedCanvasSize():Browser.updateCanvasDimensions(r)),Module.onFullScreen&&Module.onFullScreen(Browser.isFullscreen),Module.onFullscreen&&Module.onFullscreen(Browser.isFullscreen)}Browser.fullscreenHandlersInstalled||(Browser.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",n,!1),document.addEventListener("mozfullscreenchange",n,!1),document.addEventListener("webkitfullscreenchange",n,!1),document.addEventListener("MSFullscreenChange",n,!1));var i=document.createElement("div");r.parentNode.insertBefore(i,r),i.appendChild(r),i.requestFullscreen=i.requestFullscreen||i.mozRequestFullScreen||i.msRequestFullscreen||(i.webkitRequestFullscreen?function(){i.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(i.webkitRequestFullScreen?function(){i.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),i.requestFullscreen()},exitFullscreen:function(){return!!Browser.isFullscreen&&((document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){}).apply(document,[]),!0)},nextRAF:0,fakeRequestAnimationFrame:function(e){var t=Date.now();if(0===Browser.nextRAF)Browser.nextRAF=t+1e3/60;else for(;t+2>=Browser.nextRAF;)Browser.nextRAF+=1e3/60;var r=Math.max(Browser.nextRAF-t,0);setTimeout(e,r)},requestAnimationFrame:function(e){"function"!=typeof requestAnimationFrame?(0,Browser.fakeRequestAnimationFrame)(e):requestAnimationFrame(e)},safeCallback:function(e){return function(){if(!ABORT)return e.apply(null,arguments)}},allowAsyncCallbacks:!0,queuedAsyncCallbacks:[],pauseAsyncCallbacks:function(){Browser.allowAsyncCallbacks=!1},resumeAsyncCallbacks:function(){if(Browser.allowAsyncCallbacks=!0,Browser.queuedAsyncCallbacks.length>0){var e=Browser.queuedAsyncCallbacks;Browser.queuedAsyncCallbacks=[],e.forEach((function(e){e()}))}},safeRequestAnimationFrame:function(e){return Browser.requestAnimationFrame((function(){ABORT||(Browser.allowAsyncCallbacks?e():Browser.queuedAsyncCallbacks.push(e))}))},safeSetTimeout:function(e,t){return noExitRuntime=!0,setTimeout((function(){ABORT||(Browser.allowAsyncCallbacks?e():Browser.queuedAsyncCallbacks.push(e))}),t)},safeSetInterval:function(e,t){return noExitRuntime=!0,setInterval((function(){ABORT||Browser.allowAsyncCallbacks&&e()}),t)},getMimetype:function(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia:function(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX:function(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY:function(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta:function(e){var t=0;switch(e.type){case"DOMMouseScroll":t=e.detail/3;break;case"mousewheel":t=e.wheelDelta/120;break;case"wheel":switch(t=e.deltaY,e.deltaMode){case 0:t/=100;break;case 1:t/=3;break;case 2:t*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return t},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(e){if(Browser.pointerLock)"mousemove"!=e.type&&"mozMovementX"in e?Browser.mouseMovementX=Browser.mouseMovementY=0:(Browser.mouseMovementX=Browser.getMovementX(e),Browser.mouseMovementY=Browser.getMovementY(e)),"undefined"!=typeof SDL?(Browser.mouseX=SDL.mouseX+Browser.mouseMovementX,Browser.mouseY=SDL.mouseY+Browser.mouseMovementY):(Browser.mouseX+=Browser.mouseMovementX,Browser.mouseY+=Browser.mouseMovementY);else{var t=Module.canvas.getBoundingClientRect(),r=Module.canvas.width,n=Module.canvas.height,i=void 0!==window.scrollX?window.scrollX:window.pageXOffset,o=void 0!==window.scrollY?window.scrollY:window.pageYOffset;if("touchstart"===e.type||"touchend"===e.type||"touchmove"===e.type){var a=e.touch;if(void 0===a)return;var s=a.pageX-(i+t.left),c=a.pageY-(o+t.top),u={x:s*=r/t.width,y:c*=n/t.height};if("touchstart"===e.type)Browser.lastTouches[a.identifier]=u,Browser.touches[a.identifier]=u;else if("touchend"===e.type||"touchmove"===e.type){var l=Browser.touches[a.identifier];l||(l=u),Browser.lastTouches[a.identifier]=l,Browser.touches[a.identifier]=u}return}var f=e.pageX-(i+t.left),d=e.pageY-(o+t.top);f*=r/t.width,d*=n/t.height,Browser.mouseMovementX=f-Browser.mouseX,Browser.mouseMovementY=d-Browser.mouseY,Browser.mouseX=f,Browser.mouseY=d}},asyncLoad:function(e,t,r,n){var i=n?"":getUniqueRunDependency("al "+e);readAsync(e,(function(r){assert(r,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(r)),i&&removeRunDependency(i)}),(function(t){if(!r)throw'Loading data file "'+e+'" failed.';r()})),i&&addRunDependency(i)},resizeListeners:[],updateResizeListeners:function(){var e=Module.canvas;Browser.resizeListeners.forEach((function(t){t(e.width,e.height)}))},setCanvasSize:function(e,t,r){var n=Module.canvas;Browser.updateCanvasDimensions(n,e,t),r||Browser.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if("undefined"!=typeof SDL){var e=HEAPU32[SDL.screen>>2];e|=8388608,HEAP32[SDL.screen>>2]=e}Browser.updateCanvasDimensions(Module.canvas),Browser.updateResizeListeners()},setWindowedCanvasSize:function(){if("undefined"!=typeof SDL){var e=HEAPU32[SDL.screen>>2];e&=-8388609,HEAP32[SDL.screen>>2]=e}Browser.updateCanvasDimensions(Module.canvas),Browser.updateResizeListeners()},updateCanvasDimensions:function(e,t,r){t&&r?(e.widthNative=t,e.heightNative=r):(t=e.widthNative,r=e.heightNative);var n=t,i=r;if(Module.forcedAspectRatio&&Module.forcedAspectRatio>0&&(n/i<Module.forcedAspectRatio?n=Math.round(i*Module.forcedAspectRatio):i=Math.round(n/Module.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&"undefined"!=typeof screen){var o=Math.min(screen.width/n,screen.height/i);n=Math.round(n*o),i=Math.round(i*o)}Browser.resizeCanvas?(e.width!=n&&(e.width=n),e.height!=i&&(e.height=i),void 0!==e.style&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=t&&(e.width=t),e.height!=r&&(e.height=r),void 0!==e.style&&(n!=t||i!=r?(e.style.setProperty("width",n+"px","important"),e.style.setProperty("height",i+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var e=Browser.nextWgetRequestHandle;return Browser.nextWgetRequestHandle++,e}},EGL={errorCode:12288,defaultDisplayInitialized:!1,currentContext:0,currentReadSurface:0,currentDrawSurface:0,contextAttributes:{alpha:!1,depth:!1,stencil:!1,antialias:!1},stringCache:{},setErrorCode:function(e){EGL.errorCode=e},chooseConfig:function(e,t,r,n,i){if(62e3!=e)return EGL.setErrorCode(12296),0;if(t)for(;;){var o=HEAP32[t>>2];if(12321==o){var a=HEAP32[t+4>>2];EGL.contextAttributes.alpha=a>0}else if(12325==o){var s=HEAP32[t+4>>2];EGL.contextAttributes.depth=s>0}else if(12326==o){var c=HEAP32[t+4>>2];EGL.contextAttributes.stencil=c>0}else if(12337==o){var u=HEAP32[t+4>>2];EGL.contextAttributes.antialias=u>0}else if(12338==o){u=HEAP32[t+4>>2];EGL.contextAttributes.antialias=1==u}else if(12544==o){var l=HEAP32[t+4>>2];EGL.contextAttributes.lowLatency=12547!=l}else if(12344==o)break;t+=8}return r&&n||i?(i&&(HEAP32[i>>2]=1),r&&n>0&&(HEAP32[r>>2]=62002),EGL.setErrorCode(12288),1):(EGL.setErrorCode(12300),0)}};function _eglBindAPI(e){return 12448==e?(EGL.setErrorCode(12288),1):(EGL.setErrorCode(12300),0)}function _eglChooseConfig(e,t,r,n,i){return EGL.chooseConfig(e,t,r,n,i)}function __webgl_enable_ANGLE_instanced_arrays(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)return e.vertexAttribDivisor=function(e,r){t.vertexAttribDivisorANGLE(e,r)},e.drawArraysInstanced=function(e,r,n,i){t.drawArraysInstancedANGLE(e,r,n,i)},e.drawElementsInstanced=function(e,r,n,i,o){t.drawElementsInstancedANGLE(e,r,n,i,o)},1}function __webgl_enable_OES_vertex_array_object(e){var t=e.getExtension("OES_vertex_array_object");if(t)return e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)},1}function __webgl_enable_WEBGL_draw_buffers(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)return e.drawBuffers=function(e,r){t.drawBuffersWEBGL(e,r)},1}function __webgl_enable_WEBGL_multi_draw(e){return!!(e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw"))}var GL={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(e){GL.lastError||(GL.lastError=e)},getNewId:function(e){for(var t=GL.counter++,r=e.length;r<t;r++)e[r]=null;return t},getSource:function(e,t,r,n){for(var i="",o=0;o<t;++o){var a=n?HEAP32[n+4*o>>2]:-1;i+=UTF8ToString(HEAP32[r+4*o>>2],a<0?void 0:a)}return i},createContext:function(e,t){var r=e.getContext("webgl",t);return r?GL.registerContext(r,t):0},registerContext:function(e,t){var r=GL.getNewId(GL.contexts),n={handle:r,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=n),GL.contexts[r]=n,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&GL.initExtensions(n),r},makeContextCurrent:function(e){return GL.currentContext=GL.contexts[e],Module.ctx=GLctx=GL.currentContext&&GL.currentContext.GLctx,!(e&&!GLctx)},getContext:function(e){return GL.contexts[e]},deleteContext:function(e){GL.currentContext===GL.contexts[e]&&(GL.currentContext=null),"object"==typeof JSEvents&&JSEvents.removeAllHandlersOnTarget(GL.contexts[e].GLctx.canvas),GL.contexts[e]&&GL.contexts[e].GLctx.canvas&&(GL.contexts[e].GLctx.canvas.GLctxObject=void 0),GL.contexts[e]=null},initExtensions:function(e){if(e||(e=GL.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t=e.GLctx;__webgl_enable_ANGLE_instanced_arrays(t),__webgl_enable_OES_vertex_array_object(t),__webgl_enable_WEBGL_draw_buffers(t),t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query"),__webgl_enable_WEBGL_multi_draw(t),(t.getSupportedExtensions()||[]).forEach((function(e){e.indexOf("lose_context")<0&&e.indexOf("debug")<0&&t.getExtension(e)}))}},populateUniformTable:function(e){for(var t=GL.programs[e],r=GL.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},n=r.uniforms,i=GLctx.getProgramParameter(t,35718),o=0;o<i;++o){var a=GLctx.getActiveUniform(t,o),s=a.name;r.maxUniformLength=Math.max(r.maxUniformLength,s.length+1),"]"==s.slice(-1)&&(s=s.slice(0,s.lastIndexOf("[")));var c=GLctx.getUniformLocation(t,s);if(c){var u=GL.getNewId(GL.uniforms);n[s]=[a.size,u],GL.uniforms[u]=c;for(var l=1;l<a.size;++l){var f=s+"["+l+"]";c=GLctx.getUniformLocation(t,f),u=GL.getNewId(GL.uniforms),GL.uniforms[u]=c}}}}};function _eglCreateContext(e,t,r,n){if(62e3!=e)return EGL.setErrorCode(12296),0;for(var i=1;;){var o=HEAP32[n>>2];if(12440!=o){if(12344==o)break;return EGL.setErrorCode(12292),0}i=HEAP32[n+4>>2],n+=8}return 2!=i?(EGL.setErrorCode(12293),0):(EGL.contextAttributes.majorVersion=i-1,EGL.contextAttributes.minorVersion=0,EGL.context=GL.createContext(Module.canvas,EGL.contextAttributes),0!=EGL.context?(EGL.setErrorCode(12288),GL.makeContextCurrent(EGL.context),Module.useWebGL=!0,Browser.moduleContextCreatedCallbacks.forEach((function(e){e()})),GL.makeContextCurrent(null),62004):(EGL.setErrorCode(12297),0))}function _eglCreateWindowSurface(e,t,r,n){return 62e3!=e?(EGL.setErrorCode(12296),0):62002!=t?(EGL.setErrorCode(12293),0):(EGL.setErrorCode(12288),62006)}function _eglDestroyContext(e,t){return 62e3!=e?(EGL.setErrorCode(12296),0):62004!=t?(EGL.setErrorCode(12294),0):(GL.deleteContext(EGL.context),EGL.setErrorCode(12288),EGL.currentContext==t&&(EGL.currentContext=0),1)}function _eglDestroySurface(e,t){return 62e3!=e?(EGL.setErrorCode(12296),0):62006!=t?(EGL.setErrorCode(12301),1):(EGL.currentReadSurface==t&&(EGL.currentReadSurface=0),EGL.currentDrawSurface==t&&(EGL.currentDrawSurface=0),EGL.setErrorCode(12288),1)}function _eglGetConfigAttrib(e,t,r,n){if(62e3!=e)return EGL.setErrorCode(12296),0;if(62002!=t)return EGL.setErrorCode(12293),0;if(!n)return EGL.setErrorCode(12300),0;switch(EGL.setErrorCode(12288),r){case 12320:return HEAP32[n>>2]=EGL.contextAttributes.alpha?32:24,1;case 12321:return HEAP32[n>>2]=EGL.contextAttributes.alpha?8:0,1;case 12322:case 12323:case 12324:return HEAP32[n>>2]=8,1;case 12325:return HEAP32[n>>2]=EGL.contextAttributes.depth?24:0,1;case 12326:return HEAP32[n>>2]=EGL.contextAttributes.stencil?8:0,1;case 12327:case 12335:case 12340:return HEAP32[n>>2]=12344,1;case 12328:return HEAP32[n>>2]=62002,1;case 12329:case 12333:case 12334:case 12345:case 12346:case 12347:case 12349:case 12350:case 12354:return HEAP32[n>>2]=0,1;case 12330:case 12332:return HEAP32[n>>2]=4096,1;case 12331:return HEAP32[n>>2]=16777216,1;case 12337:return HEAP32[n>>2]=EGL.contextAttributes.antialias?4:0,1;case 12338:return HEAP32[n>>2]=EGL.contextAttributes.antialias?1:0,1;case 12339:case 12352:return HEAP32[n>>2]=4,1;case 12341:case 12342:case 12343:return HEAP32[n>>2]=-1,1;case 12348:return HEAP32[n>>2]=1,1;case 12351:return HEAP32[n>>2]=12430,1;default:return EGL.setErrorCode(12292),0}}function _eglGetDisplay(e){return EGL.setErrorCode(12288),62e3}function _eglGetError(){return EGL.errorCode}function _eglGetProcAddress(e){return _emscripten_GetProcAddress(e)}function _eglInitialize(e,t,r){return 62e3==e?(t&&(HEAP32[t>>2]=1),r&&(HEAP32[r>>2]=4),EGL.defaultDisplayInitialized=!0,EGL.setErrorCode(12288),1):(EGL.setErrorCode(12296),0)}function _eglMakeCurrent(e,t,r,n){return 62e3!=e?(EGL.setErrorCode(12296),0):0!=n&&62004!=n?(EGL.setErrorCode(12294),0):0!=r&&62006!=r||0!=t&&62006!=t?(EGL.setErrorCode(12301),0):(GL.makeContextCurrent(n?EGL.context:null),EGL.currentContext=n,EGL.currentDrawSurface=t,EGL.currentReadSurface=r,EGL.setErrorCode(12288),1)}function _eglQueryString(e,t){if(62e3!=e)return EGL.setErrorCode(12296),0;if(EGL.setErrorCode(12288),EGL.stringCache[t])return EGL.stringCache[t];var r;switch(t){case 12371:r=allocateUTF8("Emscripten");break;case 12372:r=allocateUTF8("1.4 Emscripten EGL");break;case 12373:r=allocateUTF8("");break;case 12429:r=allocateUTF8("OpenGL_ES");break;default:return EGL.setErrorCode(12300),0}return EGL.stringCache[t]=r,r}function _eglSwapBuffers(){if(EGL.defaultDisplayInitialized)if(Module.ctx){if(!Module.ctx.isContextLost())return EGL.setErrorCode(12288),1;EGL.setErrorCode(12302)}else EGL.setErrorCode(12290);else EGL.setErrorCode(12289);return 0}function _eglSwapInterval(e,t){return 62e3!=e?(EGL.setErrorCode(12296),0):(0==t?_emscripten_set_main_loop_timing(0,0):_emscripten_set_main_loop_timing(1,t),EGL.setErrorCode(12288),1)}function _eglTerminate(e){return 62e3!=e?(EGL.setErrorCode(12296),0):(EGL.currentContext=0,EGL.currentReadSurface=0,EGL.currentDrawSurface=0,EGL.defaultDisplayInitialized=!1,EGL.setErrorCode(12288),1)}function _eglWaitClient(){return EGL.setErrorCode(12288),1}function _eglWaitGL(){return _eglWaitClient()}function _eglWaitNative(e){return EGL.setErrorCode(12288),1}function _emscripten_asm_const_int(e,t,r){var n=readAsmConstArgs(t,r);return ASM_CONSTS[e].apply(null,n)}function _emscripten_cancel_main_loop(){Browser.mainLoop.pause(),Browser.mainLoop.func=null}var JSEvents={inEventHandler:0,removeAllEventListeners:function(){for(var e=JSEvents.eventHandlers.length-1;e>=0;--e)JSEvents._removeHandler(e);JSEvents.eventHandlers=[],JSEvents.deferredCalls=[]},registerRemoveEventListeners:function(){JSEvents.removeEventListenersRegistered||(__ATEXIT__.push(JSEvents.removeAllEventListeners),JSEvents.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,r){function n(e,t){if(e.length!=t.length)return!1;for(var r in e)if(e[r]!=t[r])return!1;return!0}for(var i in JSEvents.deferredCalls){var o=JSEvents.deferredCalls[i];if(o.targetFunction==e&&n(o.argsList,r))return}JSEvents.deferredCalls.push({targetFunction:e,precedence:t,argsList:r}),JSEvents.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<JSEvents.deferredCalls.length;++t)JSEvents.deferredCalls[t].targetFunction==e&&(JSEvents.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return JSEvents.inEventHandler&&JSEvents.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(JSEvents.canPerformEventHandlerRequests())for(var e=0;e<JSEvents.deferredCalls.length;++e){var t=JSEvents.deferredCalls[e];JSEvents.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var r=0;r<JSEvents.eventHandlers.length;++r)JSEvents.eventHandlers[r].target!=e||t&&t!=JSEvents.eventHandlers[r].eventTypeString||JSEvents._removeHandler(r--)},_removeHandler:function(e){var t=JSEvents.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),JSEvents.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++JSEvents.inEventHandler,JSEvents.currentEventHandler=e,JSEvents.runDeferredCalls(),e.handlerFunc(t),JSEvents.runDeferredCalls(),--JSEvents.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),JSEvents.eventHandlers.push(e),JSEvents.registerRemoveEventListeners();else for(var r=0;r<JSEvents.eventHandlers.length;++r)JSEvents.eventHandlers[r].target==e.target&&JSEvents.eventHandlers[r].eventTypeString==e.eventTypeString&&JSEvents._removeHandler(r--)},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},__currentFullscreenStrategy={};function maybeCStringToJsString(e){return e>2?UTF8ToString(e):e}var specialHTMLTargets=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function findEventTarget(e){return e=maybeCStringToJsString(e),specialHTMLTargets[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function findCanvasEventTarget(e){return findEventTarget(e)}function _emscripten_get_canvas_element_size(e,t,r){var n=findCanvasEventTarget(e);if(!n)return-4;HEAP32[t>>2]=n.width,HEAP32[r>>2]=n.height}function __get_canvas_element_size(e){var t=stackSave(),r=stackAlloc(8),n=r+4,i=stackAlloc(e.id.length+1);stringToUTF8(e.id,i,e.id.length+1);_emscripten_get_canvas_element_size(i,r,n);var o=[HEAP32[r>>2],HEAP32[n>>2]];return stackRestore(t),o}function _emscripten_set_canvas_element_size(e,t,r){var n=findCanvasEventTarget(e);return n?(n.width=t,n.height=r,0):-4}function __set_canvas_element_size(e,t,r){if(e.controlTransferredOffscreen){var n=stackSave(),i=stackAlloc(e.id.length+1);stringToUTF8(e.id,i,e.id.length+1),_emscripten_set_canvas_element_size(i,t,r),stackRestore(n)}else e.width=t,e.height=r}function __registerRestoreOldStyle(e){var t=__get_canvas_element_size(e),r=t[0],n=t[1],i=e.style.width,o=e.style.height,a=e.style.backgroundColor,s=document.body.style.backgroundColor,c=e.style.paddingLeft,u=e.style.paddingRight,l=e.style.paddingTop,f=e.style.paddingBottom,d=e.style.marginLeft,h=e.style.marginRight,p=e.style.marginTop,m=e.style.marginBottom,_=document.body.style.margin,g=document.documentElement.style.overflow,y=document.body.scroll,v=e.style.imageRendering;function E(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||(document.removeEventListener("fullscreenchange",E),document.removeEventListener("webkitfullscreenchange",E),__set_canvas_element_size(e,r,n),e.style.width=i,e.style.height=o,e.style.backgroundColor=a,s||(document.body.style.backgroundColor="white"),document.body.style.backgroundColor=s,e.style.paddingLeft=c,e.style.paddingRight=u,e.style.paddingTop=l,e.style.paddingBottom=f,e.style.marginLeft=d,e.style.marginRight=h,e.style.marginTop=p,e.style.marginBottom=m,document.body.style.margin=_,document.documentElement.style.overflow=g,document.body.scroll=y,e.style.imageRendering=v,e.GLctxObject&&e.GLctxObject.GLctx.viewport(0,0,r,n),__currentFullscreenStrategy.canvasResizedCallback&&wasmTable.get(__currentFullscreenStrategy.canvasResizedCallback)(37,0,__currentFullscreenStrategy.canvasResizedCallbackUserData))}return document.addEventListener("fullscreenchange",E),document.addEventListener("webkitfullscreenchange",E),E}function __setLetterbox(e,t,r){e.style.paddingLeft=e.style.paddingRight=r+"px",e.style.paddingTop=e.style.paddingBottom=t+"px"}function __getBoundingClientRect(e){return specialHTMLTargets.indexOf(e)<0?e.getBoundingClientRect():{left:0,top:0}}function _JSEvents_resizeCanvasForFullscreen(e,t){var r=__registerRestoreOldStyle(e),n=t.softFullscreen?innerWidth:screen.width,i=t.softFullscreen?innerHeight:screen.height,o=__getBoundingClientRect(e),a=o.width,s=o.height,c=__get_canvas_element_size(e),u=c[0],l=c[1];if(3==t.scaleMode)__setLetterbox(e,(i-s)/2,(n-a)/2),n=a,i=s;else if(2==t.scaleMode)if(n*l<u*i){var f=l*n/u;__setLetterbox(e,(i-f)/2,0),i=f}else{var d=u*i/l;__setLetterbox(e,0,(n-d)/2),n=d}e.style.backgroundColor||(e.style.backgroundColor="black"),document.body.style.backgroundColor||(document.body.style.backgroundColor="black"),e.style.width=n+"px",e.style.height=i+"px",1==t.filteringMode&&(e.style.imageRendering="optimizeSpeed",e.style.imageRendering="-moz-crisp-edges",e.style.imageRendering="-o-crisp-edges",e.style.imageRendering="-webkit-optimize-contrast",e.style.imageRendering="optimize-contrast",e.style.imageRendering="crisp-edges",e.style.imageRendering="pixelated");var h=2==t.canvasResolutionScaleMode?devicePixelRatio:1;if(0!=t.canvasResolutionScaleMode){var p=n*h|0,m=i*h|0;__set_canvas_element_size(e,p,m),e.GLctxObject&&e.GLctxObject.GLctx.viewport(0,0,p,m)}return r}function _JSEvents_requestFullscreen(e,t){if(0==t.scaleMode&&0==t.canvasResolutionScaleMode||_JSEvents_resizeCanvasForFullscreen(e,t),e.requestFullscreen)e.requestFullscreen();else{if(!e.webkitRequestFullscreen)return JSEvents.fullscreenEnabled()?-3:-1;e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}return __currentFullscreenStrategy=t,t.canvasResizedCallback&&wasmTable.get(t.canvasResizedCallback)(37,0,t.canvasResizedCallbackUserData),0}function _emscripten_exit_fullscreen(){if(!JSEvents.fullscreenEnabled())return-1;JSEvents.removeDeferredCalls(_JSEvents_requestFullscreen);var e=specialHTMLTargets[1];if(e.exitFullscreen)e.fullscreenElement&&e.exitFullscreen();else{if(!e.webkitExitFullscreen)return-1;e.webkitFullscreenElement&&e.webkitExitFullscreen()}return 0}function __requestPointerLock(e){if(e.requestPointerLock)e.requestPointerLock();else{if(!e.msRequestPointerLock)return document.body.requestPointerLock||document.body.msRequestPointerLock?-3:-1;e.msRequestPointerLock()}return 0}function _emscripten_exit_pointerlock(){if(JSEvents.removeDeferredCalls(__requestPointerLock),document.exitPointerLock)document.exitPointerLock();else{if(!document.msExitPointerLock)return-1;document.msExitPointerLock()}return 0}function _emscripten_get_device_pixel_ratio(){return"number"==typeof devicePixelRatio&&devicePixelRatio||1}function _emscripten_get_element_css_size(e,t,r){if(!(e=findEventTarget(e)))return-4;var n=__getBoundingClientRect(e);return HEAPF64[t>>3]=n.width,HEAPF64[r>>3]=n.height,0}function __fillGamepadEventData(e,t){HEAPF64[e>>3]=t.timestamp;for(var r=0;r<t.axes.length;++r)HEAPF64[e+8*r+16>>3]=t.axes[r];for(r=0;r<t.buttons.length;++r)"object"==typeof t.buttons[r]?HEAPF64[e+8*r+528>>3]=t.buttons[r].value:HEAPF64[e+8*r+528>>3]=t.buttons[r];for(r=0;r<t.buttons.length;++r)"object"==typeof t.buttons[r]?HEAP32[e+4*r+1040>>2]=t.buttons[r].pressed:HEAP32[e+4*r+1040>>2]=1==t.buttons[r];HEAP32[e+1296>>2]=t.connected,HEAP32[e+1300>>2]=t.index,HEAP32[e+8>>2]=t.axes.length,HEAP32[e+12>>2]=t.buttons.length,stringToUTF8(t.id,e+1304,64),stringToUTF8(t.mapping,e+1368,64)}function _emscripten_get_gamepad_status(e,t){return e<0||e>=JSEvents.lastGamepadState.length?-5:JSEvents.lastGamepadState[e]?(__fillGamepadEventData(t,JSEvents.lastGamepadState[e]),0):-7}function _emscripten_get_num_gamepads(){return JSEvents.lastGamepadState.length}function _emscripten_glActiveTexture(e){GLctx.activeTexture(e)}function _emscripten_glAttachShader(e,t){GLctx.attachShader(GL.programs[e],GL.shaders[t])}function _emscripten_glBeginQueryEXT(e,t){GLctx.disjointTimerQueryExt.beginQueryEXT(e,GL.timerQueriesEXT[t])}function _emscripten_glBindAttribLocation(e,t,r){GLctx.bindAttribLocation(GL.programs[e],t,UTF8ToString(r))}function _emscripten_glBindBuffer(e,t){GLctx.bindBuffer(e,GL.buffers[t])}function _emscripten_glBindFramebuffer(e,t){GLctx.bindFramebuffer(e,GL.framebuffers[t])}function _emscripten_glBindRenderbuffer(e,t){GLctx.bindRenderbuffer(e,GL.renderbuffers[t])}function _emscripten_glBindTexture(e,t){GLctx.bindTexture(e,GL.textures[t])}function _emscripten_glBindVertexArrayOES(e){GLctx.bindVertexArray(GL.vaos[e])}function _emscripten_glBlendColor(e,t,r,n){GLctx.blendColor(e,t,r,n)}function _emscripten_glBlendEquation(e){GLctx.blendEquation(e)}function _emscripten_glBlendEquationSeparate(e,t){GLctx.blendEquationSeparate(e,t)}function _emscripten_glBlendFunc(e,t){GLctx.blendFunc(e,t)}function _emscripten_glBlendFuncSeparate(e,t,r,n){GLctx.blendFuncSeparate(e,t,r,n)}function _emscripten_glBufferData(e,t,r,n){GLctx.bufferData(e,r?HEAPU8.subarray(r,r+t):t,n)}function _emscripten_glBufferSubData(e,t,r,n){GLctx.bufferSubData(e,t,HEAPU8.subarray(n,n+r))}function _emscripten_glCheckFramebufferStatus(e){return GLctx.checkFramebufferStatus(e)}function _emscripten_glClear(e){GLctx.clear(e)}function _emscripten_glClearColor(e,t,r,n){GLctx.clearColor(e,t,r,n)}function _emscripten_glClearDepthf(e){GLctx.clearDepth(e)}function _emscripten_glClearStencil(e){GLctx.clearStencil(e)}function _emscripten_glColorMask(e,t,r,n){GLctx.colorMask(!!e,!!t,!!r,!!n)}function _emscripten_glCompileShader(e){GLctx.compileShader(GL.shaders[e])}function _emscripten_glCompressedTexImage2D(e,t,r,n,i,o,a,s){GLctx.compressedTexImage2D(e,t,r,n,i,o,s?HEAPU8.subarray(s,s+a):null)}function _emscripten_glCompressedTexSubImage2D(e,t,r,n,i,o,a,s,c){GLctx.compressedTexSubImage2D(e,t,r,n,i,o,a,c?HEAPU8.subarray(c,c+s):null)}function _emscripten_glCopyTexImage2D(e,t,r,n,i,o,a,s){GLctx.copyTexImage2D(e,t,r,n,i,o,a,s)}function _emscripten_glCopyTexSubImage2D(e,t,r,n,i,o,a,s){GLctx.copyTexSubImage2D(e,t,r,n,i,o,a,s)}function _emscripten_glCreateProgram(){var e=GL.getNewId(GL.programs),t=GLctx.createProgram();return t.name=e,GL.programs[e]=t,e}function _emscripten_glCreateShader(e){var t=GL.getNewId(GL.shaders);return GL.shaders[t]=GLctx.createShader(e),t}function _emscripten_glCullFace(e){GLctx.cullFace(e)}function _emscripten_glDeleteBuffers(e,t){for(var r=0;r<e;r++){var n=HEAP32[t+4*r>>2],i=GL.buffers[n];i&&(GLctx.deleteBuffer(i),i.name=0,GL.buffers[n]=null)}}function _emscripten_glDeleteFramebuffers(e,t){for(var r=0;r<e;++r){var n=HEAP32[t+4*r>>2],i=GL.framebuffers[n];i&&(GLctx.deleteFramebuffer(i),i.name=0,GL.framebuffers[n]=null)}}function _emscripten_glDeleteProgram(e){if(e){var t=GL.programs[e];t?(GLctx.deleteProgram(t),t.name=0,GL.programs[e]=null,GL.programInfos[e]=null):GL.recordError(1281)}}function _emscripten_glDeleteQueriesEXT(e,t){for(var r=0;r<e;r++){var n=HEAP32[t+4*r>>2],i=GL.timerQueriesEXT[n];i&&(GLctx.disjointTimerQueryExt.deleteQueryEXT(i),GL.timerQueriesEXT[n]=null)}}function _emscripten_glDeleteRenderbuffers(e,t){for(var r=0;r<e;r++){var n=HEAP32[t+4*r>>2],i=GL.renderbuffers[n];i&&(GLctx.deleteRenderbuffer(i),i.name=0,GL.renderbuffers[n]=null)}}function _emscripten_glDeleteShader(e){if(e){var t=GL.shaders[e];t?(GLctx.deleteShader(t),GL.shaders[e]=null):GL.recordError(1281)}}function _emscripten_glDeleteTextures(e,t){for(var r=0;r<e;r++){var n=HEAP32[t+4*r>>2],i=GL.textures[n];i&&(GLctx.deleteTexture(i),i.name=0,GL.textures[n]=null)}}function _emscripten_glDeleteVertexArraysOES(e,t){for(var r=0;r<e;r++){var n=HEAP32[t+4*r>>2];GLctx.deleteVertexArray(GL.vaos[n]),GL.vaos[n]=null}}function _emscripten_glDepthFunc(e){GLctx.depthFunc(e)}function _emscripten_glDepthMask(e){GLctx.depthMask(!!e)}function _emscripten_glDepthRangef(e,t){GLctx.depthRange(e,t)}function _emscripten_glDetachShader(e,t){GLctx.detachShader(GL.programs[e],GL.shaders[t])}function _emscripten_glDisable(e){GLctx.disable(e)}function _emscripten_glDisableVertexAttribArray(e){GLctx.disableVertexAttribArray(e)}function _emscripten_glDrawArrays(e,t,r){GLctx.drawArrays(e,t,r)}function _emscripten_glDrawArraysInstancedANGLE(e,t,r,n){GLctx.drawArraysInstanced(e,t,r,n)}var tempFixedLengthArray=[];function _emscripten_glDrawBuffersWEBGL(e,t){for(var r=tempFixedLengthArray[e],n=0;n<e;n++)r[n]=HEAP32[t+4*n>>2];GLctx.drawBuffers(r)}function _emscripten_glDrawElements(e,t,r,n){GLctx.drawElements(e,t,r,n)}function _emscripten_glDrawElementsInstancedANGLE(e,t,r,n,i){GLctx.drawElementsInstanced(e,t,r,n,i)}function _emscripten_glEnable(e){GLctx.enable(e)}function _emscripten_glEnableVertexAttribArray(e){GLctx.enableVertexAttribArray(e)}function _emscripten_glEndQueryEXT(e){GLctx.disjointTimerQueryExt.endQueryEXT(e)}function _emscripten_glFinish(){GLctx.finish()}function _emscripten_glFlush(){GLctx.flush()}function _emscripten_glFramebufferRenderbuffer(e,t,r,n){GLctx.framebufferRenderbuffer(e,t,r,GL.renderbuffers[n])}function _emscripten_glFramebufferTexture2D(e,t,r,n,i){GLctx.framebufferTexture2D(e,t,r,GL.textures[n],i)}function _emscripten_glFrontFace(e){GLctx.frontFace(e)}function __glGenObject(e,t,r,n){for(var i=0;i<e;i++){var o=GLctx[r](),a=o&&GL.getNewId(n);o?(o.name=a,n[a]=o):GL.recordError(1282),HEAP32[t+4*i>>2]=a}}function _emscripten_glGenBuffers(e,t){__glGenObject(e,t,"createBuffer",GL.buffers)}function _emscripten_glGenFramebuffers(e,t){__glGenObject(e,t,"createFramebuffer",GL.framebuffers)}function _emscripten_glGenQueriesEXT(e,t){for(var r=0;r<e;r++){var n=GLctx.disjointTimerQueryExt.createQueryEXT();if(!n){for(GL.recordError(1282);r<e;)HEAP32[t+4*r++>>2]=0;return}var i=GL.getNewId(GL.timerQueriesEXT);n.name=i,GL.timerQueriesEXT[i]=n,HEAP32[t+4*r>>2]=i}}function _emscripten_glGenRenderbuffers(e,t){__glGenObject(e,t,"createRenderbuffer",GL.renderbuffers)}function _emscripten_glGenTextures(e,t){__glGenObject(e,t,"createTexture",GL.textures)}function _emscripten_glGenVertexArraysOES(e,t){__glGenObject(e,t,"createVertexArray",GL.vaos)}function _emscripten_glGenerateMipmap(e){GLctx.generateMipmap(e)}function __glGetActiveAttribOrUniform(e,t,r,n,i,o,a,s){t=GL.programs[t];var c=GLctx[e](t,r);if(c){var u=s&&stringToUTF8(c.name,s,n);i&&(HEAP32[i>>2]=u),o&&(HEAP32[o>>2]=c.size),a&&(HEAP32[a>>2]=c.type)}}function _emscripten_glGetActiveAttrib(e,t,r,n,i,o,a){__glGetActiveAttribOrUniform("getActiveAttrib",e,t,r,n,i,o,a)}function _emscripten_glGetActiveUniform(e,t,r,n,i,o,a){__glGetActiveAttribOrUniform("getActiveUniform",e,t,r,n,i,o,a)}function _emscripten_glGetAttachedShaders(e,t,r,n){var i=GLctx.getAttachedShaders(GL.programs[e]),o=i.length;o>t&&(o=t),HEAP32[r>>2]=o;for(var a=0;a<o;++a){var s=GL.shaders.indexOf(i[a]);HEAP32[n+4*a>>2]=s}}function _emscripten_glGetAttribLocation(e,t){return GLctx.getAttribLocation(GL.programs[e],UTF8ToString(t))}function writeI53ToI64(e,t){HEAPU32[e>>2]=t,HEAPU32[e+4>>2]=(t-HEAPU32[e>>2])/4294967296}function emscriptenWebGLGet(e,t,r){if(t){var n=void 0;switch(e){case 36346:n=1;break;case 36344:return void(0!=r&&1!=r&&GL.recordError(1280));case 36345:n=0;break;case 34466:var i=GLctx.getParameter(34467);n=i?i.length:0}if(void 0===n){var o=GLctx.getParameter(e);switch(typeof o){case"number":n=o;break;case"boolean":n=o?1:0;break;case"string":return void GL.recordError(1280);case"object":if(null===o)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 34068:n=0;break;default:return void GL.recordError(1280)}else{if(o instanceof Float32Array||o instanceof Uint32Array||o instanceof Int32Array||o instanceof Array){for(var a=0;a<o.length;++a)switch(r){case 0:HEAP32[t+4*a>>2]=o[a];break;case 2:HEAPF32[t+4*a>>2]=o[a];break;case 4:HEAP8[t+a>>0]=o[a]?1:0}return}try{n=0|o.name}catch(t){return GL.recordError(1280),void err("GL_INVALID_ENUM in glGet"+r+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+t+")")}}break;default:return GL.recordError(1280),void err("GL_INVALID_ENUM in glGet"+r+"v: Native code calling glGet"+r+"v("+e+") and it returns "+o+" of type "+typeof o+"!")}}switch(r){case 1:writeI53ToI64(t,n);break;case 0:HEAP32[t>>2]=n;break;case 2:HEAPF32[t>>2]=n;break;case 4:HEAP8[t>>0]=n?1:0}}else GL.recordError(1281)}function _emscripten_glGetBooleanv(e,t){emscriptenWebGLGet(e,t,4)}function _emscripten_glGetBufferParameteriv(e,t,r){r?HEAP32[r>>2]=GLctx.getBufferParameter(e,t):GL.recordError(1281)}function _emscripten_glGetError(){var e=GLctx.getError()||GL.lastError;return GL.lastError=0,e}function _emscripten_glGetFloatv(e,t){emscriptenWebGLGet(e,t,2)}function _emscripten_glGetFramebufferAttachmentParameteriv(e,t,r,n){var i=GLctx.getFramebufferAttachmentParameter(e,t,r);(i instanceof WebGLRenderbuffer||i instanceof WebGLTexture)&&(i=0|i.name),HEAP32[n>>2]=i}function _emscripten_glGetIntegerv(e,t){emscriptenWebGLGet(e,t,0)}function _emscripten_glGetProgramInfoLog(e,t,r,n){var i=GLctx.getProgramInfoLog(GL.programs[e]);null===i&&(i="(unknown error)");var o=t>0&&n?stringToUTF8(i,n,t):0;r&&(HEAP32[r>>2]=o)}function _emscripten_glGetProgramiv(e,t,r){if(r)if(e>=GL.counter)GL.recordError(1281);else{var n=GL.programInfos[e];if(n)if(35716==t){var i=GLctx.getProgramInfoLog(GL.programs[e]);null===i&&(i="(unknown error)"),HEAP32[r>>2]=i.length+1}else if(35719==t)HEAP32[r>>2]=n.maxUniformLength;else if(35722==t){if(-1==n.maxAttributeLength){e=GL.programs[e];var o=GLctx.getProgramParameter(e,35721);n.maxAttributeLength=0;for(var a=0;a<o;++a){var s=GLctx.getActiveAttrib(e,a);n.maxAttributeLength=Math.max(n.maxAttributeLength,s.name.length+1)}}HEAP32[r>>2]=n.maxAttributeLength}else if(35381==t){if(-1==n.maxUniformBlockNameLength){e=GL.programs[e];var c=GLctx.getProgramParameter(e,35382);n.maxUniformBlockNameLength=0;for(a=0;a<c;++a){var u=GLctx.getActiveUniformBlockName(e,a);n.maxUniformBlockNameLength=Math.max(n.maxUniformBlockNameLength,u.length+1)}}HEAP32[r>>2]=n.maxUniformBlockNameLength}else HEAP32[r>>2]=GLctx.getProgramParameter(GL.programs[e],t);else GL.recordError(1282)}else GL.recordError(1281)}function _emscripten_glGetQueryObjecti64vEXT(e,t,r){if(r){var n=GL.timerQueriesEXT[e],i=GLctx.disjointTimerQueryExt.getQueryObjectEXT(n,t);writeI53ToI64(r,"boolean"==typeof i?i?1:0:i)}else GL.recordError(1281)}function _emscripten_glGetQueryObjectivEXT(e,t,r){if(r){var n,i=GL.timerQueriesEXT[e],o=GLctx.disjointTimerQueryExt.getQueryObjectEXT(i,t);n="boolean"==typeof o?o?1:0:o,HEAP32[r>>2]=n}else GL.recordError(1281)}function _emscripten_glGetQueryObjectui64vEXT(e,t,r){if(r){var n=GL.timerQueriesEXT[e],i=GLctx.disjointTimerQueryExt.getQueryObjectEXT(n,t);writeI53ToI64(r,"boolean"==typeof i?i?1:0:i)}else GL.recordError(1281)}function _emscripten_glGetQueryObjectuivEXT(e,t,r){if(r){var n,i=GL.timerQueriesEXT[e],o=GLctx.disjointTimerQueryExt.getQueryObjectEXT(i,t);n="boolean"==typeof o?o?1:0:o,HEAP32[r>>2]=n}else GL.recordError(1281)}function _emscripten_glGetQueryivEXT(e,t,r){r?HEAP32[r>>2]=GLctx.disjointTimerQueryExt.getQueryEXT(e,t):GL.recordError(1281)}function _emscripten_glGetRenderbufferParameteriv(e,t,r){r?HEAP32[r>>2]=GLctx.getRenderbufferParameter(e,t):GL.recordError(1281)}function _emscripten_glGetShaderInfoLog(e,t,r,n){var i=GLctx.getShaderInfoLog(GL.shaders[e]);null===i&&(i="(unknown error)");var o=t>0&&n?stringToUTF8(i,n,t):0;r&&(HEAP32[r>>2]=o)}function _emscripten_glGetShaderPrecisionFormat(e,t,r,n){var i=GLctx.getShaderPrecisionFormat(e,t);HEAP32[r>>2]=i.rangeMin,HEAP32[r+4>>2]=i.rangeMax,HEAP32[n>>2]=i.precision}function _emscripten_glGetShaderSource(e,t,r,n){var i=GLctx.getShaderSource(GL.shaders[e]);if(i){var o=t>0&&n?stringToUTF8(i,n,t):0;r&&(HEAP32[r>>2]=o)}}function _emscripten_glGetShaderiv(e,t,r){if(r)if(35716==t){var n=GLctx.getShaderInfoLog(GL.shaders[e]);null===n&&(n="(unknown error)");var i=n?n.length+1:0;HEAP32[r>>2]=i}else if(35720==t){var o=GLctx.getShaderSource(GL.shaders[e]),a=o?o.length+1:0;HEAP32[r>>2]=a}else HEAP32[r>>2]=GLctx.getShaderParameter(GL.shaders[e],t);else GL.recordError(1281)}function stringToNewUTF8(e){var t=lengthBytesUTF8(e)+1,r=_malloc(t);return stringToUTF8(e,r,t),r}function _emscripten_glGetString(e){if(GL.stringCache[e])return GL.stringCache[e];var t;switch(e){case 7939:var r=GLctx.getSupportedExtensions()||[];t=stringToNewUTF8((r=r.concat(r.map((function(e){return"GL_"+e})))).join(" "));break;case 7936:case 7937:case 37445:case 37446:var n=GLctx.getParameter(e);n||GL.recordError(1280),t=stringToNewUTF8(n);break;case 7938:var i=GLctx.getParameter(7938);t=stringToNewUTF8(i="OpenGL ES 2.0 ("+i+")");break;case 35724:var o=GLctx.getParameter(35724),a=o.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==a&&(3==a[1].length&&(a[1]=a[1]+"0"),o="OpenGL ES GLSL ES "+a[1]+" ("+o+")"),t=stringToNewUTF8(o);break;default:return GL.recordError(1280),0}return GL.stringCache[e]=t,t}function _emscripten_glGetTexParameterfv(e,t,r){r?HEAPF32[r>>2]=GLctx.getTexParameter(e,t):GL.recordError(1281)}function _emscripten_glGetTexParameteriv(e,t,r){r?HEAP32[r>>2]=GLctx.getTexParameter(e,t):GL.recordError(1281)}function _emscripten_glGetUniformLocation(e,t){var r=0;if("]"==(t=UTF8ToString(t))[t.length-1]){var n=t.lastIndexOf("[");r="]"!=t[n+1]?jstoi_q(t.slice(n+1)):0,t=t.slice(0,n)}var i=GL.programInfos[e]&&GL.programInfos[e].uniforms[t];return i&&r>=0&&r<i[0]?i[1]+r:-1}function emscriptenWebGLGetUniform(e,t,r,n){if(r){var i=GLctx.getUniform(GL.programs[e],GL.uniforms[t]);if("number"==typeof i||"boolean"==typeof i)switch(n){case 0:HEAP32[r>>2]=i;break;case 2:HEAPF32[r>>2]=i}else for(var o=0;o<i.length;o++)switch(n){case 0:HEAP32[r+4*o>>2]=i[o];break;case 2:HEAPF32[r+4*o>>2]=i[o]}}else GL.recordError(1281)}function _emscripten_glGetUniformfv(e,t,r){emscriptenWebGLGetUniform(e,t,r,2)}function _emscripten_glGetUniformiv(e,t,r){emscriptenWebGLGetUniform(e,t,r,0)}function _emscripten_glGetVertexAttribPointerv(e,t,r){r?HEAP32[r>>2]=GLctx.getVertexAttribOffset(e,t):GL.recordError(1281)}function emscriptenWebGLGetVertexAttrib(e,t,r,n){if(r){var i=GLctx.getVertexAttrib(e,t);if(34975==t)HEAP32[r>>2]=i&&i.name;else if("number"==typeof i||"boolean"==typeof i)switch(n){case 0:HEAP32[r>>2]=i;break;case 2:HEAPF32[r>>2]=i;break;case 5:HEAP32[r>>2]=Math.fround(i)}else for(var o=0;o<i.length;o++)switch(n){case 0:HEAP32[r+4*o>>2]=i[o];break;case 2:HEAPF32[r+4*o>>2]=i[o];break;case 5:HEAP32[r+4*o>>2]=Math.fround(i[o])}}else GL.recordError(1281)}function _emscripten_glGetVertexAttribfv(e,t,r){emscriptenWebGLGetVertexAttrib(e,t,r,2)}function _emscripten_glGetVertexAttribiv(e,t,r){emscriptenWebGLGetVertexAttrib(e,t,r,5)}function _emscripten_glHint(e,t){GLctx.hint(e,t)}function _emscripten_glIsBuffer(e){var t=GL.buffers[e];return t?GLctx.isBuffer(t):0}function _emscripten_glIsEnabled(e){return GLctx.isEnabled(e)}function _emscripten_glIsFramebuffer(e){var t=GL.framebuffers[e];return t?GLctx.isFramebuffer(t):0}function _emscripten_glIsProgram(e){return(e=GL.programs[e])?GLctx.isProgram(e):0}function _emscripten_glIsQueryEXT(e){var t=GL.timerQueriesEXT[e];return t?GLctx.disjointTimerQueryExt.isQueryEXT(t):0}function _emscripten_glIsRenderbuffer(e){var t=GL.renderbuffers[e];return t?GLctx.isRenderbuffer(t):0}function _emscripten_glIsShader(e){var t=GL.shaders[e];return t?GLctx.isShader(t):0}function _emscripten_glIsTexture(e){var t=GL.textures[e];return t?GLctx.isTexture(t):0}function _emscripten_glIsVertexArrayOES(e){var t=GL.vaos[e];return t?GLctx.isVertexArray(t):0}function _emscripten_glLineWidth(e){GLctx.lineWidth(e)}function _emscripten_glLinkProgram(e){GLctx.linkProgram(GL.programs[e]),GL.populateUniformTable(e)}function _emscripten_glPixelStorei(e,t){3317==e&&(GL.unpackAlignment=t),GLctx.pixelStorei(e,t)}function _emscripten_glPolygonOffset(e,t){GLctx.polygonOffset(e,t)}function _emscripten_glQueryCounterEXT(e,t){GLctx.disjointTimerQueryExt.queryCounterEXT(GL.timerQueriesEXT[e],t)}function computeUnpackAlignedImageSize(e,t,r,n){var i;return t*(e*r+(i=n)-1&-i)}function __colorChannelsInGlTextureFormat(e){return{5:3,6:4,8:2,29502:3,29504:4}[e-6402]||1}function heapObjectForWebGLType(e){return 1==(e-=5120)?HEAPU8:4==e?HEAP32:6==e?HEAPF32:5==e||28922==e?HEAPU32:HEAPU16}function heapAccessShiftForWebGLHeap(e){return 31-Math.clz32(e.BYTES_PER_ELEMENT)}function emscriptenWebGLGetTexPixelData(e,t,r,n,i,o){var a=heapObjectForWebGLType(e),s=heapAccessShiftForWebGLHeap(a),c=1<<s,u=computeUnpackAlignedImageSize(r,n,__colorChannelsInGlTextureFormat(t)*c,GL.unpackAlignment);return a.subarray(i>>s,i+u>>s)}function _emscripten_glReadPixels(e,t,r,n,i,o,a){var s=emscriptenWebGLGetTexPixelData(o,i,r,n,a,i);s?GLctx.readPixels(e,t,r,n,i,o,s):GL.recordError(1280)}function _emscripten_glReleaseShaderCompiler(){}function _emscripten_glRenderbufferStorage(e,t,r,n){GLctx.renderbufferStorage(e,t,r,n)}function _emscripten_glSampleCoverage(e,t){GLctx.sampleCoverage(e,!!t)}function _emscripten_glScissor(e,t,r,n){GLctx.scissor(e,t,r,n)}function _emscripten_glShaderBinary(){GL.recordError(1280)}function _emscripten_glShaderSource(e,t,r,n){var i=GL.getSource(e,t,r,n);GLctx.shaderSource(GL.shaders[e],i)}function _emscripten_glStencilFunc(e,t,r){GLctx.stencilFunc(e,t,r)}function _emscripten_glStencilFuncSeparate(e,t,r,n){GLctx.stencilFuncSeparate(e,t,r,n)}function _emscripten_glStencilMask(e){GLctx.stencilMask(e)}function _emscripten_glStencilMaskSeparate(e,t){GLctx.stencilMaskSeparate(e,t)}function _emscripten_glStencilOp(e,t,r){GLctx.stencilOp(e,t,r)}function _emscripten_glStencilOpSeparate(e,t,r,n){GLctx.stencilOpSeparate(e,t,r,n)}function _emscripten_glTexImage2D(e,t,r,n,i,o,a,s,c){GLctx.texImage2D(e,t,r,n,i,o,a,s,c?emscriptenWebGLGetTexPixelData(s,a,n,i,c,r):null)}function _emscripten_glTexParameterf(e,t,r){GLctx.texParameterf(e,t,r)}function _emscripten_glTexParameterfv(e,t,r){var n=HEAPF32[r>>2];GLctx.texParameterf(e,t,n)}function _emscripten_glTexParameteri(e,t,r){GLctx.texParameteri(e,t,r)}function _emscripten_glTexParameteriv(e,t,r){var n=HEAP32[r>>2];GLctx.texParameteri(e,t,n)}function _emscripten_glTexSubImage2D(e,t,r,n,i,o,a,s,c){var u=null;c&&(u=emscriptenWebGLGetTexPixelData(s,a,i,o,c,0)),GLctx.texSubImage2D(e,t,r,n,i,o,a,s,u)}function _emscripten_glUniform1f(e,t){GLctx.uniform1f(GL.uniforms[e],t)}var miniTempWebGLFloatBuffers=[];function _emscripten_glUniform1fv(e,t,r){if(t<=288)for(var n=miniTempWebGLFloatBuffers[t-1],i=0;i<t;++i)n[i]=HEAPF32[r+4*i>>2];else n=HEAPF32.subarray(r>>2,r+4*t>>2);GLctx.uniform1fv(GL.uniforms[e],n)}function _emscripten_glUniform1i(e,t){GLctx.uniform1i(GL.uniforms[e],t)}var __miniTempWebGLIntBuffers=[];function _emscripten_glUniform1iv(e,t,r){if(t<=288)for(var n=__miniTempWebGLIntBuffers[t-1],i=0;i<t;++i)n[i]=HEAP32[r+4*i>>2];else n=HEAP32.subarray(r>>2,r+4*t>>2);GLctx.uniform1iv(GL.uniforms[e],n)}function _emscripten_glUniform2f(e,t,r){GLctx.uniform2f(GL.uniforms[e],t,r)}function _emscripten_glUniform2fv(e,t,r){if(t<=144)for(var n=miniTempWebGLFloatBuffers[2*t-1],i=0;i<2*t;i+=2)n[i]=HEAPF32[r+4*i>>2],n[i+1]=HEAPF32[r+(4*i+4)>>2];else n=HEAPF32.subarray(r>>2,r+8*t>>2);GLctx.uniform2fv(GL.uniforms[e],n)}function _emscripten_glUniform2i(e,t,r){GLctx.uniform2i(GL.uniforms[e],t,r)}function _emscripten_glUniform2iv(e,t,r){if(t<=144)for(var n=__miniTempWebGLIntBuffers[2*t-1],i=0;i<2*t;i+=2)n[i]=HEAP32[r+4*i>>2],n[i+1]=HEAP32[r+(4*i+4)>>2];else n=HEAP32.subarray(r>>2,r+8*t>>2);GLctx.uniform2iv(GL.uniforms[e],n)}function _emscripten_glUniform3f(e,t,r,n){GLctx.uniform3f(GL.uniforms[e],t,r,n)}function _emscripten_glUniform3fv(e,t,r){if(t<=96)for(var n=miniTempWebGLFloatBuffers[3*t-1],i=0;i<3*t;i+=3)n[i]=HEAPF32[r+4*i>>2],n[i+1]=HEAPF32[r+(4*i+4)>>2],n[i+2]=HEAPF32[r+(4*i+8)>>2];else n=HEAPF32.subarray(r>>2,r+12*t>>2);GLctx.uniform3fv(GL.uniforms[e],n)}function _emscripten_glUniform3i(e,t,r,n){GLctx.uniform3i(GL.uniforms[e],t,r,n)}function _emscripten_glUniform3iv(e,t,r){if(t<=96)for(var n=__miniTempWebGLIntBuffers[3*t-1],i=0;i<3*t;i+=3)n[i]=HEAP32[r+4*i>>2],n[i+1]=HEAP32[r+(4*i+4)>>2],n[i+2]=HEAP32[r+(4*i+8)>>2];else n=HEAP32.subarray(r>>2,r+12*t>>2);GLctx.uniform3iv(GL.uniforms[e],n)}function _emscripten_glUniform4f(e,t,r,n,i){GLctx.uniform4f(GL.uniforms[e],t,r,n,i)}function _emscripten_glUniform4fv(e,t,r){if(t<=72){var n=miniTempWebGLFloatBuffers[4*t-1],i=HEAPF32;r>>=2;for(var o=0;o<4*t;o+=4){var a=r+o;n[o]=i[a],n[o+1]=i[a+1],n[o+2]=i[a+2],n[o+3]=i[a+3]}}else n=HEAPF32.subarray(r>>2,r+16*t>>2);GLctx.uniform4fv(GL.uniforms[e],n)}function _emscripten_glUniform4i(e,t,r,n,i){GLctx.uniform4i(GL.uniforms[e],t,r,n,i)}function _emscripten_glUniform4iv(e,t,r){if(t<=72)for(var n=__miniTempWebGLIntBuffers[4*t-1],i=0;i<4*t;i+=4)n[i]=HEAP32[r+4*i>>2],n[i+1]=HEAP32[r+(4*i+4)>>2],n[i+2]=HEAP32[r+(4*i+8)>>2],n[i+3]=HEAP32[r+(4*i+12)>>2];else n=HEAP32.subarray(r>>2,r+16*t>>2);GLctx.uniform4iv(GL.uniforms[e],n)}function _emscripten_glUniformMatrix2fv(e,t,r,n){if(t<=72)for(var i=miniTempWebGLFloatBuffers[4*t-1],o=0;o<4*t;o+=4)i[o]=HEAPF32[n+4*o>>2],i[o+1]=HEAPF32[n+(4*o+4)>>2],i[o+2]=HEAPF32[n+(4*o+8)>>2],i[o+3]=HEAPF32[n+(4*o+12)>>2];else i=HEAPF32.subarray(n>>2,n+16*t>>2);GLctx.uniformMatrix2fv(GL.uniforms[e],!!r,i)}function _emscripten_glUniformMatrix3fv(e,t,r,n){if(t<=32)for(var i=miniTempWebGLFloatBuffers[9*t-1],o=0;o<9*t;o+=9)i[o]=HEAPF32[n+4*o>>2],i[o+1]=HEAPF32[n+(4*o+4)>>2],i[o+2]=HEAPF32[n+(4*o+8)>>2],i[o+3]=HEAPF32[n+(4*o+12)>>2],i[o+4]=HEAPF32[n+(4*o+16)>>2],i[o+5]=HEAPF32[n+(4*o+20)>>2],i[o+6]=HEAPF32[n+(4*o+24)>>2],i[o+7]=HEAPF32[n+(4*o+28)>>2],i[o+8]=HEAPF32[n+(4*o+32)>>2];else i=HEAPF32.subarray(n>>2,n+36*t>>2);GLctx.uniformMatrix3fv(GL.uniforms[e],!!r,i)}function _emscripten_glUniformMatrix4fv(e,t,r,n){if(t<=18){var i=miniTempWebGLFloatBuffers[16*t-1],o=HEAPF32;n>>=2;for(var a=0;a<16*t;a+=16){var s=n+a;i[a]=o[s],i[a+1]=o[s+1],i[a+2]=o[s+2],i[a+3]=o[s+3],i[a+4]=o[s+4],i[a+5]=o[s+5],i[a+6]=o[s+6],i[a+7]=o[s+7],i[a+8]=o[s+8],i[a+9]=o[s+9],i[a+10]=o[s+10],i[a+11]=o[s+11],i[a+12]=o[s+12],i[a+13]=o[s+13],i[a+14]=o[s+14],i[a+15]=o[s+15]}}else i=HEAPF32.subarray(n>>2,n+64*t>>2);GLctx.uniformMatrix4fv(GL.uniforms[e],!!r,i)}function _emscripten_glUseProgram(e){GLctx.useProgram(GL.programs[e])}function _emscripten_glValidateProgram(e){GLctx.validateProgram(GL.programs[e])}function _emscripten_glVertexAttrib1f(e,t){GLctx.vertexAttrib1f(e,t)}function _emscripten_glVertexAttrib1fv(e,t){GLctx.vertexAttrib1f(e,HEAPF32[t>>2])}function _emscripten_glVertexAttrib2f(e,t,r){GLctx.vertexAttrib2f(e,t,r)}function _emscripten_glVertexAttrib2fv(e,t){GLctx.vertexAttrib2f(e,HEAPF32[t>>2],HEAPF32[t+4>>2])}function _emscripten_glVertexAttrib3f(e,t,r,n){GLctx.vertexAttrib3f(e,t,r,n)}function _emscripten_glVertexAttrib3fv(e,t){GLctx.vertexAttrib3f(e,HEAPF32[t>>2],HEAPF32[t+4>>2],HEAPF32[t+8>>2])}function _emscripten_glVertexAttrib4f(e,t,r,n,i){GLctx.vertexAttrib4f(e,t,r,n,i)}function _emscripten_glVertexAttrib4fv(e,t){GLctx.vertexAttrib4f(e,HEAPF32[t>>2],HEAPF32[t+4>>2],HEAPF32[t+8>>2],HEAPF32[t+12>>2])}function _emscripten_glVertexAttribDivisorANGLE(e,t){GLctx.vertexAttribDivisor(e,t)}function _emscripten_glVertexAttribPointer(e,t,r,n,i,o){GLctx.vertexAttribPointer(e,t,r,!!n,i,o)}function _emscripten_glViewport(e,t,r,n){GLctx.viewport(e,t,r,n)}function _emscripten_has_asyncify(){return 0}function _emscripten_memcpy_big(e,t,r){HEAPU8.copyWithin(e,t,t+r)}function _emscripten_pause_main_loop(){Browser.mainLoop.pause()}function __emscripten_do_request_fullscreen(e,t){return JSEvents.fullscreenEnabled()?(e=findEventTarget(e))?e.requestFullscreen||e.webkitRequestFullscreen?JSEvents.canPerformEventHandlerRequests()?_JSEvents_requestFullscreen(e,t):t.deferUntilInEventHandler?(JSEvents.deferCall(_JSEvents_requestFullscreen,1,[e,t]),1):-2:-3:-4:-1}function _emscripten_request_fullscreen_strategy(e,t,r){return __emscripten_do_request_fullscreen(e,{scaleMode:HEAP32[r>>2],canvasResolutionScaleMode:HEAP32[r+4>>2],filteringMode:HEAP32[r+8>>2],deferUntilInEventHandler:t,canvasResizedCallback:HEAP32[r+12>>2],canvasResizedCallbackUserData:HEAP32[r+16>>2]})}function _emscripten_request_pointerlock(e,t){return(e=findEventTarget(e))?e.requestPointerLock||e.msRequestPointerLock?JSEvents.canPerformEventHandlerRequests()?__requestPointerLock(e):t?(JSEvents.deferCall(__requestPointerLock,2,[e]),1):-2:-1:-4}function _emscripten_get_heap_size(){return HEAPU8.length}function emscripten_realloc_buffer(e){try{return wasmMemory.grow(e-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch(e){}}function _emscripten_resize_heap(e){e>>>=0;var t=_emscripten_get_heap_size(),r=2147483648;if(e>r)return!1;for(var n=1;n<=4;n*=2){var i=t*(1+.2/n);if(i=Math.min(i,e+100663296),emscripten_realloc_buffer(Math.min(r,alignUp(Math.max(16777216,e,i),65536))))return!0}return!1}function _emscripten_resume_main_loop(){Browser.mainLoop.resume()}function _emscripten_sample_gamepad_data(){return(JSEvents.lastGamepadState=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():null)?0:-1}function __registerBeforeUnloadEventCallback(e,t,r,n,i,o){var a={target:findEventTarget(e),eventTypeString:o,callbackfunc:n,handlerFunc:function(e){var r=e||event,o=wasmTable.get(n)(i,0,t);if(o&&(o=UTF8ToString(o)),o)return r.preventDefault(),r.returnValue=o,o},useCapture:r};JSEvents.registerOrRemoveHandler(a)}function _emscripten_set_beforeunload_callback_on_thread(e,t,r){return"undefined"==typeof onbeforeunload?-1:1!==r?-5:(__registerBeforeUnloadEventCallback(2,e,!0,t,28,"beforeunload"),0)}function __registerFocusEventCallback(e,t,r,n,i,o,a){JSEvents.focusEvent||(JSEvents.focusEvent=_malloc(256));var s={target:findEventTarget(e),eventTypeString:o,callbackfunc:n,handlerFunc:function(e){var r=e||event,o=JSEvents.getNodeNameForTarget(r.target),a=r.target.id?r.target.id:"",s=JSEvents.focusEvent;stringToUTF8(o,s+0,128),stringToUTF8(a,s+128,128),wasmTable.get(n)(i,s,t)&&r.preventDefault()},useCapture:r};JSEvents.registerOrRemoveHandler(s)}function _emscripten_set_blur_callback_on_thread(e,t,r,n,i){return __registerFocusEventCallback(e,t,r,n,12,"blur",i),0}function _emscripten_set_element_css_size(e,t,r){return(e=findEventTarget(e))?(e.style.width=t+"px",e.style.height=r+"px",0):-4}function _emscripten_set_focus_callback_on_thread(e,t,r,n,i){return __registerFocusEventCallback(e,t,r,n,13,"focus",i),0}function __fillFullscreenChangeEventData(e){var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement,r=!!t;HEAP32[e>>2]=r,HEAP32[e+4>>2]=JSEvents.fullscreenEnabled();var n=r?t:JSEvents.previousFullscreenElement,i=JSEvents.getNodeNameForTarget(n),o=n&&n.id?n.id:"";stringToUTF8(i,e+8,128),stringToUTF8(o,e+136,128),HEAP32[e+264>>2]=n?n.clientWidth:0,HEAP32[e+268>>2]=n?n.clientHeight:0,HEAP32[e+272>>2]=screen.width,HEAP32[e+276>>2]=screen.height,r&&(JSEvents.previousFullscreenElement=t)}function __registerFullscreenChangeEventCallback(e,t,r,n,i,o,a){JSEvents.fullscreenChangeEvent||(JSEvents.fullscreenChangeEvent=_malloc(280));var s={target:e,eventTypeString:o,callbackfunc:n,handlerFunc:function(e){var r=e||event,o=JSEvents.fullscreenChangeEvent;__fillFullscreenChangeEventData(o),wasmTable.get(n)(i,o,t)&&r.preventDefault()},useCapture:r};JSEvents.registerOrRemoveHandler(s)}function _emscripten_set_fullscreenchange_callback_on_thread(e,t,r,n,i){return JSEvents.fullscreenEnabled()?(e=findEventTarget(e))?(__registerFullscreenChangeEventCallback(e,t,r,n,19,"fullscreenchange",i),__registerFullscreenChangeEventCallback(e,t,r,n,19,"webkitfullscreenchange",i),0):-4:-1}function __registerGamepadEventCallback(e,t,r,n,i,o,a){JSEvents.gamepadEvent||(JSEvents.gamepadEvent=_malloc(1432));var s={target:findEventTarget(e),allowsDeferredCalls:!0,eventTypeString:o,callbackfunc:n,handlerFunc:function(e){var r=e||event,o=JSEvents.gamepadEvent;__fillGamepadEventData(o,r.gamepad),wasmTable.get(n)(i,o,t)&&r.preventDefault()},useCapture:r};JSEvents.registerOrRemoveHandler(s)}function _emscripten_set_gamepadconnected_callback_on_thread(e,t,r,n){return navigator.getGamepads||navigator.webkitGetGamepads?(__registerGamepadEventCallback(2,e,t,r,26,"gamepadconnected",n),0):-1}function _emscripten_set_gamepaddisconnected_callback_on_thread(e,t,r,n){return navigator.getGamepads||navigator.webkitGetGamepads?(__registerGamepadEventCallback(2,e,t,r,27,"gamepaddisconnected",n),0):-1}function __registerKeyEventCallback(e,t,r,n,i,o,a){JSEvents.keyEvent||(JSEvents.keyEvent=_malloc(164));var s={target:findEventTarget(e),allowsDeferredCalls:!0,eventTypeString:o,callbackfunc:n,handlerFunc:function(e){var r=JSEvents.keyEvent,o=r>>2;HEAP32[o+0]=e.location,HEAP32[o+1]=e.ctrlKey,HEAP32[o+2]=e.shiftKey,HEAP32[o+3]=e.altKey,HEAP32[o+4]=e.metaKey,HEAP32[o+5]=e.repeat,HEAP32[o+6]=e.charCode,HEAP32[o+7]=e.keyCode,HEAP32[o+8]=e.which,stringToUTF8(e.key||"",r+36,32),stringToUTF8(e.code||"",r+68,32),stringToUTF8(e.char||"",r+100,32),stringToUTF8(e.locale||"",r+132,32),wasmTable.get(n)(i,r,t)&&e.preventDefault()},useCapture:r};JSEvents.registerOrRemoveHandler(s)}function _emscripten_set_keydown_callback_on_thread(e,t,r,n,i){return __registerKeyEventCallback(e,t,r,n,2,"keydown",i),0}function _emscripten_set_keypress_callback_on_thread(e,t,r,n,i){return __registerKeyEventCallback(e,t,r,n,1,"keypress",i),0}function _emscripten_set_keyup_callback_on_thread(e,t,r,n,i){return __registerKeyEventCallback(e,t,r,n,3,"keyup",i),0}function _emscripten_set_main_loop(e,t,r,n,i){setMainLoop(wasmTable.get(e),t,r,n,i)}function __fillMouseEventData(e,t,r){var n=e>>2;HEAP32[n+0]=t.screenX,HEAP32[n+1]=t.screenY,HEAP32[n+2]=t.clientX,HEAP32[n+3]=t.clientY,HEAP32[n+4]=t.ctrlKey,HEAP32[n+5]=t.shiftKey,HEAP32[n+6]=t.altKey,HEAP32[n+7]=t.metaKey,HEAP16[2*n+16]=t.button,HEAP16[2*n+17]=t.buttons,HEAP32[n+9]=t.movementX,HEAP32[n+10]=t.movementY;var i=__getBoundingClientRect(r);HEAP32[n+11]=t.clientX-i.left,HEAP32[n+12]=t.clientY-i.top}function __registerMouseEventCallback(e,t,r,n,i,o,a){JSEvents.mouseEvent||(JSEvents.mouseEvent=_malloc(64));var s={target:e=findEventTarget(e),allowsDeferredCalls:"mousemove"!=o&&"mouseenter"!=o&&"mouseleave"!=o,eventTypeString:o,callbackfunc:n,handlerFunc:function(r){var o=r||event;__fillMouseEventData(JSEvents.mouseEvent,o,e),wasmTable.get(n)(i,JSEvents.mouseEvent,t)&&o.preventDefault()},useCapture:r};JSEvents.registerOrRemoveHandler(s)}function _emscripten_set_mousedown_callback_on_thread(e,t,r,n,i){return __registerMouseEventCallback(e,t,r,n,5,"mousedown",i),0}function _emscripten_set_mouseenter_callback_on_thread(e,t,r,n,i){return __registerMouseEventCallback(e,t,r,n,33,"mouseenter",i),0}function _emscripten_set_mouseleave_callback_on_thread(e,t,r,n,i){return __registerMouseEventCallback(e,t,r,n,34,"mouseleave",i),0}function _emscripten_set_mousemove_callback_on_thread(e,t,r,n,i){return __registerMouseEventCallback(e,t,r,n,8,"mousemove",i),0}function _emscripten_set_mouseup_callback_on_thread(e,t,r,n,i){return __registerMouseEventCallback(e,t,r,n,6,"mouseup",i),0}function __fillPointerlockChangeEventData(e){var t=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||document.msPointerLockElement,r=!!t;HEAP32[e>>2]=r;var n=JSEvents.getNodeNameForTarget(t),i=t&&t.id?t.id:"";stringToUTF8(n,e+4,128),stringToUTF8(i,e+132,128)}function __registerPointerlockChangeEventCallback(e,t,r,n,i,o,a){JSEvents.pointerlockChangeEvent||(JSEvents.pointerlockChangeEvent=_malloc(260));var s={target:e,eventTypeString:o,callbackfunc:n,handlerFunc:function(e){var r=e||event,o=JSEvents.pointerlockChangeEvent;__fillPointerlockChangeEventData(o),wasmTable.get(n)(i,o,t)&&r.preventDefault()},useCapture:r};JSEvents.registerOrRemoveHandler(s)}function _emscripten_set_pointerlockchange_callback_on_thread(e,t,r,n,i){return document&&document.body&&(document.body.requestPointerLock||document.body.mozRequestPointerLock||document.body.webkitRequestPointerLock||document.body.msRequestPointerLock)?(e=findEventTarget(e))?(__registerPointerlockChangeEventCallback(e,t,r,n,20,"pointerlockchange",i),__registerPointerlockChangeEventCallback(e,t,r,n,20,"mozpointerlockchange",i),__registerPointerlockChangeEventCallback(e,t,r,n,20,"webkitpointerlockchange",i),__registerPointerlockChangeEventCallback(e,t,r,n,20,"mspointerlockchange",i),0):-4:-1}function __registerUiEventCallback(e,t,r,n,i,o,a){JSEvents.uiEvent||(JSEvents.uiEvent=_malloc(36));var s={target:e=findEventTarget(e),eventTypeString:o,callbackfunc:n,handlerFunc:function(r){var o=r||event;if(o.target==e){var a=document.body;if(a){var s=JSEvents.uiEvent;HEAP32[s>>2]=o.detail,HEAP32[s+4>>2]=a.clientWidth,HEAP32[s+8>>2]=a.clientHeight,HEAP32[s+12>>2]=innerWidth,HEAP32[s+16>>2]=innerHeight,HEAP32[s+20>>2]=outerWidth,HEAP32[s+24>>2]=outerHeight,HEAP32[s+28>>2]=pageXOffset,HEAP32[s+32>>2]=pageYOffset,wasmTable.get(n)(i,s,t)&&o.preventDefault()}}},useCapture:r};JSEvents.registerOrRemoveHandler(s)}function _emscripten_set_resize_callback_on_thread(e,t,r,n,i){return __registerUiEventCallback(e,t,r,n,10,"resize",i),0}function __registerTouchEventCallback(e,t,r,n,i,o,a){JSEvents.touchEvent||(JSEvents.touchEvent=_malloc(1684));var s={target:e=findEventTarget(e),allowsDeferredCalls:"touchstart"==o||"touchend"==o,eventTypeString:o,callbackfunc:n,handlerFunc:function(r){for(var o={},a=r.touches,s=0;s<a.length;++s){o[(c=a[s]).identifier]=c}a=r.changedTouches;for(s=0;s<a.length;++s){var c;(c=a[s]).isChanged=1,o[c.identifier]=c}a=r.targetTouches;for(s=0;s<a.length;++s)o[a[s].identifier].onTarget=1;var u=JSEvents.touchEvent,l=u>>2;HEAP32[l+1]=r.ctrlKey,HEAP32[l+2]=r.shiftKey,HEAP32[l+3]=r.altKey,HEAP32[l+4]=r.metaKey,l+=5;var f=__getBoundingClientRect(e),d=0;for(var s in o){var h=o[s];if(HEAP32[l+0]=h.identifier,HEAP32[l+1]=h.screenX,HEAP32[l+2]=h.screenY,HEAP32[l+3]=h.clientX,HEAP32[l+4]=h.clientY,HEAP32[l+5]=h.pageX,HEAP32[l+6]=h.pageY,HEAP32[l+7]=h.isChanged,HEAP32[l+8]=h.onTarget,HEAP32[l+9]=h.clientX-f.left,HEAP32[l+10]=h.clientY-f.top,l+=13,++d>31)break}HEAP32[u>>2]=d,wasmTable.get(n)(i,u,t)&&r.preventDefault()},useCapture:r};JSEvents.registerOrRemoveHandler(s)}function _emscripten_set_touchcancel_callback_on_thread(e,t,r,n,i){return __registerTouchEventCallback(e,t,r,n,25,"touchcancel",i),0}function _emscripten_set_touchend_callback_on_thread(e,t,r,n,i){return __registerTouchEventCallback(e,t,r,n,23,"touchend",i),0}function _emscripten_set_touchmove_callback_on_thread(e,t,r,n,i){return __registerTouchEventCallback(e,t,r,n,24,"touchmove",i),0}function _emscripten_set_touchstart_callback_on_thread(e,t,r,n,i){return __registerTouchEventCallback(e,t,r,n,22,"touchstart",i),0}function __fillVisibilityChangeEventData(e){var t=["hidden","visible","prerender","unloaded"].indexOf(document.visibilityState);HEAP32[e>>2]=document.hidden,HEAP32[e+4>>2]=t}function __registerVisibilityChangeEventCallback(e,t,r,n,i,o,a){JSEvents.visibilityChangeEvent||(JSEvents.visibilityChangeEvent=_malloc(8));var s={target:e,eventTypeString:o,callbackfunc:n,handlerFunc:function(e){var r=e||event,o=JSEvents.visibilityChangeEvent;__fillVisibilityChangeEventData(o),wasmTable.get(n)(i,o,t)&&r.preventDefault()},useCapture:r};JSEvents.registerOrRemoveHandler(s)}function _emscripten_set_visibilitychange_callback_on_thread(e,t,r,n){return specialHTMLTargets[1]?(__registerVisibilityChangeEventCallback(specialHTMLTargets[1],e,t,r,21,"visibilitychange",n),0):-4}function __registerWheelEventCallback(e,t,r,n,i,o,a){JSEvents.wheelEvent||(JSEvents.wheelEvent=_malloc(96));var s={target:e,allowsDeferredCalls:!0,eventTypeString:o,callbackfunc:n,handlerFunc:function(r){var o=r||event,a=JSEvents.wheelEvent;__fillMouseEventData(a,o,e),HEAPF64[a+64>>3]=o.deltaX,HEAPF64[a+72>>3]=o.deltaY,HEAPF64[a+80>>3]=o.deltaZ,HEAP32[a+88>>2]=o.deltaMode,wasmTable.get(n)(i,a,t)&&o.preventDefault()},useCapture:r};JSEvents.registerOrRemoveHandler(s)}function _emscripten_set_wheel_callback_on_thread(e,t,r,n,i){return void 0!==(e=findEventTarget(e)).onwheel?(__registerWheelEventCallback(e,t,r,n,9,"wheel",i),0):-1}function _emscripten_sleep(){throw"Please compile your program with async support in order to use asynchronous operations like emscripten_sleep"}function _emscripten_thread_sleep(e){for(var t=_emscripten_get_now();_emscripten_get_now()-t<e;);}var ENV={};function getExecutableName(){return thisProgram||"./this.program"}function getEnvStrings(){if(!getEnvStrings.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:getExecutableName()};for(var t in ENV)e[t]=ENV[t];var r=[];for(var t in e)r.push(t+"="+e[t]);getEnvStrings.strings=r}return getEnvStrings.strings}function _environ_get(e,t){try{var r=0;return getEnvStrings().forEach((function(n,i){var o=t+r;HEAP32[e+4*i>>2]=o,writeAsciiToMemory(n,o),r+=n.length+1})),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _environ_sizes_get(e,t){try{var r=getEnvStrings();HEAP32[e>>2]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),HEAP32[t>>2]=n,0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _exit(e){exit(e)}function _fd_close(e){try{var t=SYSCALLS.getStreamFromFD(e);return FS.close(t),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _fd_read(e,t,r,n){try{var i=SYSCALLS.getStreamFromFD(e),o=SYSCALLS.doReadv(i,t,r);return HEAP32[n>>2]=o,0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _fd_seek(e,t,r,n,i){try{var o=SYSCALLS.getStreamFromFD(e),a=4294967296*r+(t>>>0),s=9007199254740992;return a<=-s||a>=s?-61:(FS.llseek(o,a,n),tempI64=[o.position>>>0,(tempDouble=o.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],o.getdents&&0===a&&0===n&&(o.getdents=null),0)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _fd_write(e,t,r,n){try{var i=SYSCALLS.getStreamFromFD(e),o=SYSCALLS.doWritev(i,t,r);return HEAP32[n>>2]=o,0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _getentropy(e,t){_getentropy.randomDevice||(_getentropy.randomDevice=getRandomDevice());for(var r=0;r<t;r++)HEAP8[e+r>>0]=_getentropy.randomDevice();return 0}function _gettimeofday(e){var t=Date.now();return HEAP32[e>>2]=t/1e3|0,HEAP32[e+4>>2]=t%1e3*1e3|0,0}function _setTempRet0(e){setTempRet0(0|e)}function _sigaction(e,t,r){return 0}var __sigalrm_handler=0;function _signal(e,t){return 14==e&&(__sigalrm_handler=t),0}function __isLeapYear(e){return e%4==0&&(e%100!=0||e%400==0)}function __arraySum(e,t){for(var r=0,n=0;n<=t;r+=e[n++]);return r}var __MONTH_DAYS_LEAP=[31,29,31,30,31,30,31,31,30,31,30,31],__MONTH_DAYS_REGULAR=[31,28,31,30,31,30,31,31,30,31,30,31];function __addDays(e,t){for(var r=new Date(e.getTime());t>0;){var n=__isLeapYear(r.getFullYear()),i=r.getMonth(),o=(n?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR)[i];if(!(t>o-r.getDate()))return r.setDate(r.getDate()+t),r;t-=o-r.getDate()+1,r.setDate(1),i<11?r.setMonth(i+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1))}return r}function _strftime(e,t,r,n){var i=HEAP32[n+40>>2],o={tm_sec:HEAP32[n>>2],tm_min:HEAP32[n+4>>2],tm_hour:HEAP32[n+8>>2],tm_mday:HEAP32[n+12>>2],tm_mon:HEAP32[n+16>>2],tm_year:HEAP32[n+20>>2],tm_wday:HEAP32[n+24>>2],tm_yday:HEAP32[n+28>>2],tm_isdst:HEAP32[n+32>>2],tm_gmtoff:HEAP32[n+36>>2],tm_zone:i?UTF8ToString(i):""},a=UTF8ToString(r),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in s)a=a.replace(new RegExp(c,"g"),s[c]);var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function f(e,t,r){for(var n="number"==typeof e?e.toString():e||"";n.length<t;)n=r[0]+n;return n}function d(e,t){return f(e,t,"0")}function h(e,t){function r(e){return e<0?-1:e>0?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function p(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function m(e){var t=__addDays(new Date(e.tm_year+1900,0,1),e.tm_yday),r=new Date(t.getFullYear(),0,4),n=new Date(t.getFullYear()+1,0,4),i=p(r),o=p(n);return h(i,t)<=0?h(o,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var _={"%a":function(e){return u[e.tm_wday].substring(0,3)},"%A":function(e){return u[e.tm_wday]},"%b":function(e){return l[e.tm_mon].substring(0,3)},"%B":function(e){return l[e.tm_mon]},"%C":function(e){return d((e.tm_year+1900)/100|0,2)},"%d":function(e){return d(e.tm_mday,2)},"%e":function(e){return f(e.tm_mday,2," ")},"%g":function(e){return m(e).toString().substring(2)},"%G":function(e){return m(e)},"%H":function(e){return d(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),d(t,2)},"%j":function(e){return d(e.tm_mday+__arraySum(__isLeapYear(e.tm_year+1900)?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR,e.tm_mon-1),3)},"%m":function(e){return d(e.tm_mon+1,2)},"%M":function(e){return d(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return d(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),r=0===t.getDay()?t:__addDays(t,7-t.getDay()),n=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(h(r,n)<0){var i=__arraySum(__isLeapYear(n.getFullYear())?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR,n.getMonth()-1)-31,o=31-r.getDate()+i+n.getDate();return d(Math.ceil(o/7),2)}return 0===h(r,t)?"01":"00"},"%V":function(e){var t,r=new Date(e.tm_year+1900,0,4),n=new Date(e.tm_year+1901,0,4),i=p(r),o=p(n),a=__addDays(new Date(e.tm_year+1900,0,1),e.tm_yday);return h(a,i)<0?"53":h(o,a)<=0?"01":(t=i.getFullYear()<e.tm_year+1900?e.tm_yday+32-i.getDate():e.tm_yday+1-i.getDate(),d(Math.ceil(t/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),r=1===t.getDay()?t:__addDays(t,0===t.getDay()?1:7-t.getDay()+1),n=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(h(r,n)<0){var i=__arraySum(__isLeapYear(n.getFullYear())?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR,n.getMonth()-1)-31,o=31-r.getDate()+i+n.getDate();return d(Math.ceil(o/7),2)}return 0===h(r,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,r=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(r?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var c in _)a.indexOf(c)>=0&&(a=a.replace(new RegExp(c,"g"),_[c](o)));var g=intArrayFromString(a,!1);return g.length>t?0:(writeArrayToMemory(g,e),g.length-1)}function _strftime_l(e,t,r,n){return _strftime(e,t,r,n)}function _time(e){var t=Date.now()/1e3|0;return e&&(HEAP32[e>>2]=t),t}function setFileTime(e,t){e=UTF8ToString(e);try{return FS.utime(e,t,t),0}catch(e){if(!(e instanceof FS.ErrnoError))throw e+" : "+stackTrace();return setErrNo(e.errno),-1}}function _utime(e,t){return setFileTime(e,t?1e3*HEAP32[t+4>>2]:Date.now())}var readAsmConstArgsArray=[];function readAsmConstArgs(e,t){var r;for(readAsmConstArgsArray.length=0,t>>=2;r=HEAPU8[e++];){var n=r<105;n&&1&t&&t++,readAsmConstArgsArray.push(n?HEAPF64[t++>>1]:HEAP32[t]),++t}return readAsmConstArgsArray}var GLctx,FSNode=function(e,t,r,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=FS.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n},readMode=365,writeMode=146;Object.defineProperties(FSNode.prototype,{read:{get:function(){return(this.mode&readMode)===readMode},set:function(e){e?this.mode|=readMode:this.mode&=~readMode}},write:{get:function(){return(this.mode&writeMode)===writeMode},set:function(e){e?this.mode|=writeMode:this.mode&=~writeMode}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}}),FS.FSNode=FSNode,FS.staticInit(),embind_init_charCodes(),BindingError=Module.BindingError=extendError(Error,"BindingError"),InternalError=Module.InternalError=extendError(Error,"InternalError"),init_ClassHandle(),init_RegisteredPointer(),init_embind(),UnboundTypeError=Module.UnboundTypeError=extendError(Error,"UnboundTypeError"),init_emval(),Module.requestFullscreen=function(e,t){Browser.requestFullscreen(e,t)},Module.requestAnimationFrame=function(e){Browser.requestAnimationFrame(e)},Module.setCanvasSize=function(e,t,r){Browser.setCanvasSize(e,t,r)},Module.pauseMainLoop=function(){Browser.mainLoop.pause()},Module.resumeMainLoop=function(){Browser.mainLoop.resume()},Module.getUserMedia=function(){Browser.getUserMedia()},Module.createContext=function(e,t,r,n){return Browser.createContext(e,t,r,n)};for(var i=0;i<32;++i)tempFixedLengthArray.push(new Array(i));var miniTempWebGLFloatBuffersStorage=new Float32Array(288);for(i=0;i<288;++i)miniTempWebGLFloatBuffers[i]=miniTempWebGLFloatBuffersStorage.subarray(0,i+1);var __miniTempWebGLIntBuffersStorage=new Int32Array(288);for(i=0;i<288;++i)__miniTempWebGLIntBuffers[i]=__miniTempWebGLIntBuffersStorage.subarray(0,i+1);function intArrayFromString(e,t,r){var n=r>0?r:lengthBytesUTF8(e)+1,i=new Array(n),o=stringToUTF8Array(e,i,0,i.length);return t&&(i.length=o),i}__ATINIT__.push({func:function(){___wasm_call_ctors()}});var calledRun,asmLibraryArg={v:___cxa_allocate_exception,u:___cxa_throw,Yd:___sys__newselect,Td:___sys_access,c:___sys_fcntl64,Wd:___sys_ftruncate64,Xd:___sys_getcwd,Ud:___sys_getdents64,_:___sys_ioctl,Rd:___sys_mkdir,$:___sys_open,Sd:___sys_rename,Qd:___sys_rmdir,b:___sys_socketcall,Vd:___sys_stat64,Zd:___sys_unlink,Nd:__embind_register_bool,Md:__embind_register_class,Y:__embind_register_class_class_function,Ld:__embind_register_class_constructor,Kd:__embind_register_emval,X:__embind_register_float,Jd:__embind_register_function,e:__embind_register_integer,d:__embind_register_memory_view,W:__embind_register_std_string,s:__embind_register_std_wstring,Id:__embind_register_void,r:_abort,q:_clock_gettime,Hd:_dlclose,Gd:_eglBindAPI,Fd:_eglChooseConfig,Ed:_eglCreateContext,Dd:_eglCreateWindowSurface,Cd:_eglDestroyContext,Bd:_eglDestroySurface,Ad:_eglGetConfigAttrib,V:_eglGetDisplay,zd:_eglGetError,yd:_eglGetProcAddress,xd:_eglInitialize,wd:_eglMakeCurrent,vd:_eglQueryString,ud:_eglSwapBuffers,td:_eglSwapInterval,sd:_eglTerminate,rd:_eglWaitGL,qd:_eglWaitNative,a:_emscripten_asm_const_int,pd:_emscripten_cancel_main_loop,od:_emscripten_exit_fullscreen,nd:_emscripten_exit_pointerlock,l:_emscripten_get_device_pixel_ratio,g:_emscripten_get_element_css_size,U:_emscripten_get_gamepad_status,md:_emscripten_get_num_gamepads,ld:_emscripten_glActiveTexture,kd:_emscripten_glAttachShader,jd:_emscripten_glBeginQueryEXT,id:_emscripten_glBindAttribLocation,hd:_emscripten_glBindBuffer,gd:_emscripten_glBindFramebuffer,fd:_emscripten_glBindRenderbuffer,ed:_emscripten_glBindTexture,dd:_emscripten_glBindVertexArrayOES,cd:_emscripten_glBlendColor,bd:_emscripten_glBlendEquation,ad:_emscripten_glBlendEquationSeparate,$c:_emscripten_glBlendFunc,_c:_emscripten_glBlendFuncSeparate,Zc:_emscripten_glBufferData,Yc:_emscripten_glBufferSubData,Xc:_emscripten_glCheckFramebufferStatus,Wc:_emscripten_glClear,Vc:_emscripten_glClearColor,Uc:_emscripten_glClearDepthf,Tc:_emscripten_glClearStencil,Sc:_emscripten_glColorMask,Rc:_emscripten_glCompileShader,Qc:_emscripten_glCompressedTexImage2D,Pc:_emscripten_glCompressedTexSubImage2D,Oc:_emscripten_glCopyTexImage2D,Nc:_emscripten_glCopyTexSubImage2D,Mc:_emscripten_glCreateProgram,Lc:_emscripten_glCreateShader,Kc:_emscripten_glCullFace,Jc:_emscripten_glDeleteBuffers,Ic:_emscripten_glDeleteFramebuffers,Hc:_emscripten_glDeleteProgram,Gc:_emscripten_glDeleteQueriesEXT,Fc:_emscripten_glDeleteRenderbuffers,Ec:_emscripten_glDeleteShader,Dc:_emscripten_glDeleteTextures,Cc:_emscripten_glDeleteVertexArraysOES,Bc:_emscripten_glDepthFunc,Ac:_emscripten_glDepthMask,zc:_emscripten_glDepthRangef,yc:_emscripten_glDetachShader,xc:_emscripten_glDisable,wc:_emscripten_glDisableVertexAttribArray,vc:_emscripten_glDrawArrays,uc:_emscripten_glDrawArraysInstancedANGLE,tc:_emscripten_glDrawBuffersWEBGL,sc:_emscripten_glDrawElements,rc:_emscripten_glDrawElementsInstancedANGLE,qc:_emscripten_glEnable,pc:_emscripten_glEnableVertexAttribArray,oc:_emscripten_glEndQueryEXT,nc:_emscripten_glFinish,mc:_emscripten_glFlush,lc:_emscripten_glFramebufferRenderbuffer,kc:_emscripten_glFramebufferTexture2D,jc:_emscripten_glFrontFace,ic:_emscripten_glGenBuffers,hc:_emscripten_glGenFramebuffers,gc:_emscripten_glGenQueriesEXT,fc:_emscripten_glGenRenderbuffers,ec:_emscripten_glGenTextures,dc:_emscripten_glGenVertexArraysOES,cc:_emscripten_glGenerateMipmap,bc:_emscripten_glGetActiveAttrib,ac:_emscripten_glGetActiveUniform,$b:_emscripten_glGetAttachedShaders,_b:_emscripten_glGetAttribLocation,Zb:_emscripten_glGetBooleanv,Yb:_emscripten_glGetBufferParameteriv,Xb:_emscripten_glGetError,Wb:_emscripten_glGetFloatv,Vb:_emscripten_glGetFramebufferAttachmentParameteriv,Ub:_emscripten_glGetIntegerv,Tb:_emscripten_glGetProgramInfoLog,Sb:_emscripten_glGetProgramiv,Rb:_emscripten_glGetQueryObjecti64vEXT,Qb:_emscripten_glGetQueryObjectivEXT,Pb:_emscripten_glGetQueryObjectui64vEXT,Ob:_emscripten_glGetQueryObjectuivEXT,Nb:_emscripten_glGetQueryivEXT,Mb:_emscripten_glGetRenderbufferParameteriv,Lb:_emscripten_glGetShaderInfoLog,Kb:_emscripten_glGetShaderPrecisionFormat,Jb:_emscripten_glGetShaderSource,Ib:_emscripten_glGetShaderiv,Hb:_emscripten_glGetString,Gb:_emscripten_glGetTexParameterfv,Fb:_emscripten_glGetTexParameteriv,Eb:_emscripten_glGetUniformLocation,Db:_emscripten_glGetUniformfv,Cb:_emscripten_glGetUniformiv,Bb:_emscripten_glGetVertexAttribPointerv,Ab:_emscripten_glGetVertexAttribfv,zb:_emscripten_glGetVertexAttribiv,yb:_emscripten_glHint,xb:_emscripten_glIsBuffer,wb:_emscripten_glIsEnabled,vb:_emscripten_glIsFramebuffer,ub:_emscripten_glIsProgram,tb:_emscripten_glIsQueryEXT,sb:_emscripten_glIsRenderbuffer,rb:_emscripten_glIsShader,qb:_emscripten_glIsTexture,pb:_emscripten_glIsVertexArrayOES,ob:_emscripten_glLineWidth,nb:_emscripten_glLinkProgram,mb:_emscripten_glPixelStorei,lb:_emscripten_glPolygonOffset,kb:_emscripten_glQueryCounterEXT,jb:_emscripten_glReadPixels,ib:_emscripten_glReleaseShaderCompiler,hb:_emscripten_glRenderbufferStorage,gb:_emscripten_glSampleCoverage,fb:_emscripten_glScissor,eb:_emscripten_glShaderBinary,db:_emscripten_glShaderSource,cb:_emscripten_glStencilFunc,bb:_emscripten_glStencilFuncSeparate,ab:_emscripten_glStencilMask,$a:_emscripten_glStencilMaskSeparate,_a:_emscripten_glStencilOp,Za:_emscripten_glStencilOpSeparate,Ya:_emscripten_glTexImage2D,Xa:_emscripten_glTexParameterf,Wa:_emscripten_glTexParameterfv,Va:_emscripten_glTexParameteri,Ua:_emscripten_glTexParameteriv,Ta:_emscripten_glTexSubImage2D,Sa:_emscripten_glUniform1f,Ra:_emscripten_glUniform1fv,Qa:_emscripten_glUniform1i,Pa:_emscripten_glUniform1iv,Oa:_emscripten_glUniform2f,Na:_emscripten_glUniform2fv,Ma:_emscripten_glUniform2i,La:_emscripten_glUniform2iv,Ka:_emscripten_glUniform3f,Ja:_emscripten_glUniform3fv,Ia:_emscripten_glUniform3i,Ha:_emscripten_glUniform3iv,Ga:_emscripten_glUniform4f,Fa:_emscripten_glUniform4fv,Ea:_emscripten_glUniform4i,Da:_emscripten_glUniform4iv,Ca:_emscripten_glUniformMatrix2fv,Ba:_emscripten_glUniformMatrix3fv,Aa:_emscripten_glUniformMatrix4fv,za:_emscripten_glUseProgram,ya:_emscripten_glValidateProgram,xa:_emscripten_glVertexAttrib1f,wa:_emscripten_glVertexAttrib1fv,va:_emscripten_glVertexAttrib2f,ua:_emscripten_glVertexAttrib2fv,ta:_emscripten_glVertexAttrib3f,sa:_emscripten_glVertexAttrib3fv,ra:_emscripten_glVertexAttrib4f,qa:_emscripten_glVertexAttrib4fv,pa:_emscripten_glVertexAttribDivisorANGLE,oa:_emscripten_glVertexAttribPointer,na:_emscripten_glViewport,p:_emscripten_has_asyncify,ma:_emscripten_memcpy_big,la:_emscripten_pause_main_loop,ka:_emscripten_request_fullscreen_strategy,T:_emscripten_request_pointerlock,ja:_emscripten_resize_heap,ia:_emscripten_resume_main_loop,S:_emscripten_sample_gamepad_data,R:_emscripten_set_beforeunload_callback_on_thread,Q:_emscripten_set_blur_callback_on_thread,i:_emscripten_set_canvas_element_size,o:_emscripten_set_element_css_size,P:_emscripten_set_focus_callback_on_thread,O:_emscripten_set_fullscreenchange_callback_on_thread,N:_emscripten_set_gamepadconnected_callback_on_thread,M:_emscripten_set_gamepaddisconnected_callback_on_thread,L:_emscripten_set_keydown_callback_on_thread,K:_emscripten_set_keypress_callback_on_thread,J:_emscripten_set_keyup_callback_on_thread,ha:_emscripten_set_main_loop,I:_emscripten_set_mousedown_callback_on_thread,H:_emscripten_set_mouseenter_callback_on_thread,G:_emscripten_set_mouseleave_callback_on_thread,F:_emscripten_set_mousemove_callback_on_thread,E:_emscripten_set_mouseup_callback_on_thread,D:_emscripten_set_pointerlockchange_callback_on_thread,C:_emscripten_set_resize_callback_on_thread,B:_emscripten_set_touchcancel_callback_on_thread,A:_emscripten_set_touchend_callback_on_thread,z:_emscripten_set_touchmove_callback_on_thread,y:_emscripten_set_touchstart_callback_on_thread,x:_emscripten_set_visibilitychange_callback_on_thread,w:_emscripten_set_wheel_callback_on_thread,n:_emscripten_sleep,ga:_emscripten_thread_sleep,Pd:_environ_get,Od:_environ_sizes_get,fa:_exit,j:_fd_close,Z:_fd_read,da:_fd_seek,t:_fd_write,ea:_getentropy,h:_gettimeofday,m:_setTempRet0,f:_sigaction,ca:_signal,ba:_strftime_l,k:_time,aa:_utime},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.ae).apply(null,arguments)},_main=Module._main=function(){return(_main=Module._main=Module.asm.be).apply(null,arguments)},___errno_location=Module.___errno_location=function(){return(___errno_location=Module.___errno_location=Module.asm.ce).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.de).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.ee).apply(null,arguments)},___getTypeName=Module.___getTypeName=function(){return(___getTypeName=Module.___getTypeName=Module.asm.fe).apply(null,arguments)},___embind_register_native_and_builtin_types=Module.___embind_register_native_and_builtin_types=function(){return(___embind_register_native_and_builtin_types=Module.___embind_register_native_and_builtin_types=Module.asm.ge).apply(null,arguments)},_emscripten_GetProcAddress=Module._emscripten_GetProcAddress=function(){return(_emscripten_GetProcAddress=Module._emscripten_GetProcAddress=Module.asm.he).apply(null,arguments)},_ntohs=Module._ntohs=function(){return(_ntohs=Module._ntohs=Module.asm.ie).apply(null,arguments)},_htons=Module._htons=function(){return(_htons=Module._htons=Module.asm.je).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.ke).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.le).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.me).apply(null,arguments)},dynCall_ji=Module.dynCall_ji=function(){return(dynCall_ji=Module.dynCall_ji=Module.asm.ne).apply(null,arguments)},dynCall_iij=Module.dynCall_iij=function(){return(dynCall_iij=Module.dynCall_iij=Module.asm.oe).apply(null,arguments)},dynCall_jij=Module.dynCall_jij=function(){return(dynCall_jij=Module.dynCall_jij=Module.asm.pe).apply(null,arguments)},dynCall_iiiiiij=Module.dynCall_iiiiiij=function(){return(dynCall_iiiiiij=Module.dynCall_iiiiiij=Module.asm.qe).apply(null,arguments)},dynCall_iijiji=Module.dynCall_iijiji=function(){return(dynCall_iijiji=Module.dynCall_iijiji=Module.asm.re).apply(null,arguments)},dynCall_viijii=Module.dynCall_viijii=function(){return(dynCall_viijii=Module.dynCall_viijii=Module.asm.se).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.te).apply(null,arguments)},dynCall_iiiiij=Module.dynCall_iiiiij=function(){return(dynCall_iiiiij=Module.dynCall_iiiiij=Module.asm.ue).apply(null,arguments)},dynCall_iiiiijj=Module.dynCall_iiiiijj=function(){return(dynCall_iiiiijj=Module.dynCall_iiiiijj=Module.asm.ve).apply(null,arguments)},dynCall_iiiiiijj=Module.dynCall_iiiiiijj=function(){return(dynCall_iiiiiijj=Module.dynCall_iiiiiijj=Module.asm.we).apply(null,arguments)};function ExitStatus(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}Module.addRunDependency=addRunDependency,Module.removeRunDependency=removeRunDependency;var calledMain=!1;function callMain(e){var t=Module._main,r=(e=e||[]).length+1,n=stackAlloc(4*(r+1));HEAP32[n>>2]=allocateUTF8OnStack(thisProgram);for(var i=1;i<r;i++)HEAP32[(n>>2)+i]=allocateUTF8OnStack(e[i-1]);HEAP32[(n>>2)+r]=0;try{exit(t(r,n),!0)}catch(e){if(e instanceof ExitStatus)return;if("unwind"==e)return void(noExitRuntime=!0);var o=e;e&&"object"==typeof e&&e.stack&&(o=[e,e.stack]),err("exception thrown: "+o),quit_(1,e)}finally{calledMain=!0}}function run(e){function t(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(e),postRun()))}e=e||arguments_,runDependencies>0||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout((function(){setTimeout((function(){Module.setStatus("")}),1),t()}),1)):t()))}function exit(e,t){t&&noExitRuntime&&0===e||(noExitRuntime||(EXITSTATUS=e,exitRuntime(),Module.onExit&&Module.onExit(e),ABORT=!0),quit_(e,new ExitStatus(e)))}if(dependenciesFulfilled=function e(){calledRun||run(),calledRun||(dependenciesFulfilled=e)},Module.run=run,Module.preInit)for("function"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),noExitRuntime=!0,run(),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.BrowserFS=t():e.BrowserFS=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){(function(e,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=r(2),c=r(9);!function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EIO=5]="EIO",e[e.EBADF=9]="EBADF",e[e.EACCES=13]="EACCES",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.EROFS=30]="EROFS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ENOTSUP=95]="ENOTSUP"}(a||(a={}));var u={};u[a.EPERM]="Operation not permitted.",u[a.ENOENT]="No such file or directory.",u[a.EIO]="Input/output error.",u[a.EBADF]="Bad file descriptor.",u[a.EACCES]="Permission denied.",u[a.EBUSY]="Resource busy or locked.",u[a.EEXIST]="File exists.",u[a.ENOTDIR]="File is not a directory.",u[a.EISDIR]="File is a directory.",u[a.EINVAL]="Invalid argument.",u[a.EFBIG]="File is too big.",u[a.ENOSPC]="No space left on disk.",u[a.EROFS]="Cannot modify a read-only file system.",u[a.ENOTEMPTY]="Directory is not empty.",u[a.ENOTSUP]="Operation is not supported.";var l,f=function(t){function r(e,r,n){void 0===r&&(r=u[e]),t.call(this,r),this.syscall="",this.errno=e,this.code=a[e],this.path=n,this.stack=(new t).stack,this.message="Error: "+this.code+": "+r+(this.path?", '"+this.path+"'":"")}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.fromJSON=function(e){var t=new r(0);return t.errno=e.errno,t.code=e.code,t.path=e.path,t.stack=e.stack,t.message=e.message,t},r.fromBuffer=function(e,t){return void 0===t&&(t=0),r.fromJSON(JSON.parse(e.toString("utf8",t+4,t+4+e.readUInt32LE(t))))},r.FileError=function(e,t){return new r(e,u[e],t)},r.ENOENT=function(e){return this.FileError(a.ENOENT,e)},r.EEXIST=function(e){return this.FileError(a.EEXIST,e)},r.EISDIR=function(e){return this.FileError(a.EISDIR,e)},r.ENOTDIR=function(e){return this.FileError(a.ENOTDIR,e)},r.EPERM=function(e){return this.FileError(a.EPERM,e)},r.ENOTEMPTY=function(e){return this.FileError(a.ENOTEMPTY,e)},r.prototype.toString=function(){return this.message},r.prototype.toJSON=function(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},r.prototype.writeToBuffer=function(t,r){void 0===t&&(t=e.alloc(this.bufferSize())),void 0===r&&(r=0);var n=t.write(JSON.stringify(this.toJSON()),r+4);return t.writeUInt32LE(n,r),t},r.prototype.bufferSize=function(){return 4+e.byteLength(JSON.stringify(this.toJSON()))},r}(Error),d=Object.freeze({get ErrorCode(){return a},ErrorStrings:u,ApiError:f});!function(e){e[e.NOP=0]="NOP",e[e.THROW_EXCEPTION=1]="THROW_EXCEPTION",e[e.TRUNCATE_FILE=2]="TRUNCATE_FILE",e[e.CREATE_FILE=3]="CREATE_FILE"}(l||(l={}));var h,p=function e(t){if(this.flagStr=t,e.validFlagStrs.indexOf(t)<0)throw new f(a.EINVAL,"Invalid flag: "+t)};p.getFileFlag=function(e){return p.flagCache.hasOwnProperty(e)?p.flagCache[e]:p.flagCache[e]=new p(e)},p.prototype.getFlagString=function(){return this.flagStr},p.prototype.isReadable=function(){return-1!==this.flagStr.indexOf("r")||-1!==this.flagStr.indexOf("+")},p.prototype.isWriteable=function(){return-1!==this.flagStr.indexOf("w")||-1!==this.flagStr.indexOf("a")||-1!==this.flagStr.indexOf("+")},p.prototype.isTruncating=function(){return-1!==this.flagStr.indexOf("w")},p.prototype.isAppendable=function(){return-1!==this.flagStr.indexOf("a")},p.prototype.isSynchronous=function(){return-1!==this.flagStr.indexOf("s")},p.prototype.isExclusive=function(){return-1!==this.flagStr.indexOf("x")},p.prototype.pathExistsAction=function(){return this.isExclusive()?l.THROW_EXCEPTION:this.isTruncating()?l.TRUNCATE_FILE:l.NOP},p.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&"r+"!==this.flagStr?l.CREATE_FILE:l.THROW_EXCEPTION},p.flagCache={},p.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"],function(e){e[e.FILE=32768]="FILE",e[e.DIRECTORY=16384]="DIRECTORY",e[e.SYMLINK=40960]="SYMLINK"}(h||(h={}));var m=function(e,t,r,n,i,o){if(void 0===n&&(n=new Date),void 0===i&&(i=new Date),void 0===o&&(o=new Date),this.size=t,this.atime=n,this.mtime=i,this.ctime=o,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,r)this.mode=r;else switch(e){case h.FILE:this.mode=420;break;case h.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(t/512),this.mode<4096&&(this.mode|=e)};m.fromBuffer=function(e){var t=e.readUInt32LE(0),r=e.readUInt32LE(4),n=e.readDoubleLE(8),i=e.readDoubleLE(16),o=e.readDoubleLE(24);return new m(61440&r,t,4095&r,new Date(n),new Date(i),new Date(o))},m.prototype.toBuffer=function(){var t=e.alloc(32);return t.writeUInt32LE(this.size,0),t.writeUInt32LE(this.mode,4),t.writeDoubleLE(this.atime.getTime(),8),t.writeDoubleLE(this.mtime.getTime(),16),t.writeDoubleLE(this.ctime.getTime(),24),t},m.prototype.clone=function(){return new m(61440&this.mode,this.size,4095&this.mode,this.atime,this.mtime,this.ctime)},m.prototype.isFile=function(){return(61440&this.mode)===h.FILE},m.prototype.isDirectory=function(){return(61440&this.mode)===h.DIRECTORY},m.prototype.isSymbolicLink=function(){return(61440&this.mode)===h.SYMLINK},m.prototype.chmod=function(e){this.mode=61440&this.mode|e},m.prototype.isSocket=function(){return!1},m.prototype.isBlockDevice=function(){return!1},m.prototype.isCharacterDevice=function(){return!1},m.prototype.isFIFO=function(){return!1};var _=function(e,t){return e};function g(e){if(e)return e;throw new f(a.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function y(e,t){switch(typeof e){case"number":return e;case"string":var r=parseInt(e,8);return isNaN(r)?t:r;default:return t}}function v(e){if(e instanceof Date)return e;if("number"==typeof e)return new Date(1e3*e);throw new f(a.EINVAL,"Invalid time.")}function E(e){if(e.indexOf("\0")>=0)throw new f(a.EINVAL,"Path must be a string without null bytes.");if(""===e)throw new f(a.EINVAL,"Path must not be empty.");return c.resolve(e)}function w(e,t,r,n){switch(typeof e){case"object":return{encoding:void 0!==e.encoding?e.encoding:t,flag:void 0!==e.flag?e.flag:r,mode:y(e.mode,n)};case"string":return{encoding:e,flag:r,mode:n};default:return{encoding:t,flag:r,mode:n}}}function S(){}var b=function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100};b.prototype.initialize=function(e){if(!e.constructor.isAvailable())throw new f(a.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=e},b.prototype._toUnixTimestamp=function(e){if("number"==typeof e)return e;if(e instanceof Date)return e.getTime()/1e3;throw new Error("Cannot parse time: "+e)},b.prototype.getRootFS=function(){return this.root?this.root:null},b.prototype.rename=function(e,t,r){void 0===r&&(r=S);var n=_(r,1);try{g(this.root).rename(E(e),E(t),n)}catch(e){n(e)}},b.prototype.renameSync=function(e,t){g(this.root).renameSync(E(e),E(t))},b.prototype.exists=function(e,t){void 0===t&&(t=S);var r=_(t,1);try{return g(this.root).exists(E(e),r)}catch(e){return r(!1)}},b.prototype.existsSync=function(e){try{return g(this.root).existsSync(E(e))}catch(e){return!1}},b.prototype.stat=function(e,t){void 0===t&&(t=S);var r=_(t,2);try{return g(this.root).stat(E(e),!1,r)}catch(e){return r(e)}},b.prototype.statSync=function(e){return g(this.root).statSync(E(e),!1)},b.prototype.lstat=function(e,t){void 0===t&&(t=S);var r=_(t,2);try{return g(this.root).stat(E(e),!0,r)}catch(e){return r(e)}},b.prototype.lstatSync=function(e){return g(this.root).statSync(E(e),!0)},b.prototype.truncate=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=S);var n=0;"function"==typeof t?r=t:"number"==typeof t&&(n=t);var i=_(r,1);try{if(n<0)throw new f(a.EINVAL);return g(this.root).truncate(E(e),n,i)}catch(e){return i(e)}},b.prototype.truncateSync=function(e,t){if(void 0===t&&(t=0),t<0)throw new f(a.EINVAL);return g(this.root).truncateSync(E(e),t)},b.prototype.unlink=function(e,t){void 0===t&&(t=S);var r=_(t,1);try{return g(this.root).unlink(E(e),r)}catch(e){return r(e)}},b.prototype.unlinkSync=function(e){return g(this.root).unlinkSync(E(e))},b.prototype.open=function(e,t,r,n){var i=this;void 0===n&&(n=S);var o=y(r,420),a=_(n="function"==typeof r?r:n,2);try{g(this.root).open(E(e),p.getFileFlag(t),o,(function(e,t){t?a(e,i.getFdForFile(t)):a(e)}))}catch(e){a(e)}},b.prototype.openSync=function(e,t,r){return void 0===r&&(r=420),this.getFdForFile(g(this.root).openSync(E(e),p.getFileFlag(t),y(r,420)))},b.prototype.readFile=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r=S);var n=w(t,null,"r",null),i=_(r="function"==typeof t?t:r,2);try{var o=p.getFileFlag(n.flag);return o.isReadable()?g(this.root).readFile(E(e),n.encoding,o,i):i(new f(a.EINVAL,"Flag passed to readFile must allow for reading."))}catch(e){return i(e)}},b.prototype.readFileSync=function(e,t){void 0===t&&(t={});var r=w(t,null,"r",null),n=p.getFileFlag(r.flag);if(!n.isReadable())throw new f(a.EINVAL,"Flag passed to readFile must allow for reading.");return g(this.root).readFileSync(E(e),r.encoding,n)},b.prototype.writeFile=function(e,t,r,n){void 0===r&&(r={}),void 0===n&&(n=S);var i=w(r,"utf8","w",420),o=_(n="function"==typeof r?r:n,1);try{var s=p.getFileFlag(i.flag);return s.isWriteable()?g(this.root).writeFile(E(e),t,i.encoding,s,i.mode,o):o(new f(a.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(e){return o(e)}},b.prototype.writeFileSync=function(e,t,r){var n=w(r,"utf8","w",420),i=p.getFileFlag(n.flag);if(!i.isWriteable())throw new f(a.EINVAL,"Flag passed to writeFile must allow for writing.");return g(this.root).writeFileSync(E(e),t,n.encoding,i,n.mode)},b.prototype.appendFile=function(e,t,r,n){void 0===n&&(n=S);var i=w(r,"utf8","a",420),o=_(n="function"==typeof r?r:n,1);try{var s=p.getFileFlag(i.flag);if(!s.isAppendable())return o(new f(a.EINVAL,"Flag passed to appendFile must allow for appending."));g(this.root).appendFile(E(e),t,i.encoding,s,i.mode,o)}catch(e){o(e)}},b.prototype.appendFileSync=function(e,t,r){var n=w(r,"utf8","a",420),i=p.getFileFlag(n.flag);if(!i.isAppendable())throw new f(a.EINVAL,"Flag passed to appendFile must allow for appending.");return g(this.root).appendFileSync(E(e),t,n.encoding,i,n.mode)},b.prototype.fstat=function(e,t){void 0===t&&(t=S);var r=_(t,2);try{this.fd2file(e).stat(r)}catch(e){r(e)}},b.prototype.fstatSync=function(e){return this.fd2file(e).statSync()},b.prototype.close=function(e,t){var r=this;void 0===t&&(t=S);var n=_(t,1);try{this.fd2file(e).close((function(t){t||r.closeFd(e),n(t)}))}catch(e){n(e)}},b.prototype.closeSync=function(e){this.fd2file(e).closeSync(),this.closeFd(e)},b.prototype.ftruncate=function(e,t,r){void 0===r&&(r=S);var n="number"==typeof t?t:0,i=_(r="function"==typeof t?t:r,1);try{var o=this.fd2file(e);if(n<0)throw new f(a.EINVAL);o.truncate(n,i)}catch(e){i(e)}},b.prototype.ftruncateSync=function(e,t){void 0===t&&(t=0);var r=this.fd2file(e);if(t<0)throw new f(a.EINVAL);r.truncateSync(t)},b.prototype.fsync=function(e,t){void 0===t&&(t=S);var r=_(t,1);try{this.fd2file(e).sync(r)}catch(e){r(e)}},b.prototype.fsyncSync=function(e){this.fd2file(e).syncSync()},b.prototype.fdatasync=function(e,t){void 0===t&&(t=S);var r=_(t,1);try{this.fd2file(e).datasync(r)}catch(e){r(e)}},b.prototype.fdatasyncSync=function(e){this.fd2file(e).datasyncSync()},b.prototype.write=function(t,r,n,i,o,s){void 0===s&&(s=S);var c,u,l,d=null;if("string"==typeof r){var h="utf8";switch(typeof n){case"function":s=n;break;case"number":d=n,h="string"==typeof i?i:"utf8",s="function"==typeof o?o:s;break;default:return(s="function"==typeof i?i:"function"==typeof o?o:s)(new f(a.EINVAL,"Invalid arguments."))}u=0,l=(c=e.from(r,h)).length}else c=r,u=n,l=i,d="number"==typeof o?o:null,s="function"==typeof o?o:s;var p=_(s,3);try{var m=this.fd2file(t);null==d&&(d=m.getPos()),m.write(c,u,l,d,p)}catch(e){p(e)}},b.prototype.writeSync=function(t,r,n,i,o){var a,s,c,u=0;if("string"==typeof r){c="number"==typeof n?n:null;var l="string"==typeof i?i:"utf8";u=0,s=(a=e.from(r,l)).length}else a=r,u=n,s=i,c="number"==typeof o?o:null;var f=this.fd2file(t);return null==c&&(c=f.getPos()),f.writeSync(a,u,s,c)},b.prototype.read=function(t,r,n,i,o,a){var s,c,u,l,f;if(void 0===a&&(a=S),"number"==typeof r){u=r,s=n;var d=i;a="function"==typeof o?o:a,c=0,l=e.alloc(u),f=_((function(e,t,r){if(e)return a(e);a(e,r.toString(d),t)}),3)}else l=r,c=n,u=i,s=o,f=_(a,3);try{var h=this.fd2file(t);null==s&&(s=h.getPos()),h.read(l,c,u,s,f)}catch(e){f(e)}},b.prototype.readSync=function(t,r,n,i,o){var a,s,c,u,l=!1,f="utf8";"number"==typeof r?(c=r,u=n,f=i,s=0,a=e.alloc(c),l=!0):(a=r,s=n,c=i,u=o);var d=this.fd2file(t);null==u&&(u=d.getPos());var h=d.readSync(a,s,c,u);return l?[a.toString(f),h]:h},b.prototype.fchown=function(e,t,r,n){void 0===n&&(n=S);var i=_(n,1);try{this.fd2file(e).chown(t,r,i)}catch(e){i(e)}},b.prototype.fchownSync=function(e,t,r){this.fd2file(e).chownSync(t,r)},b.prototype.fchmod=function(e,t,r){var n=_(r,1);try{var i="string"==typeof t?parseInt(t,8):t;this.fd2file(e).chmod(i,n)}catch(e){n(e)}},b.prototype.fchmodSync=function(e,t){var r="string"==typeof t?parseInt(t,8):t;this.fd2file(e).chmodSync(r)},b.prototype.futimes=function(e,t,r,n){void 0===n&&(n=S);var i=_(n,1);try{var o=this.fd2file(e);"number"==typeof t&&(t=new Date(1e3*t)),"number"==typeof r&&(r=new Date(1e3*r)),o.utimes(t,r,i)}catch(e){i(e)}},b.prototype.futimesSync=function(e,t,r){this.fd2file(e).utimesSync(v(t),v(r))},b.prototype.rmdir=function(e,t){void 0===t&&(t=S);var r=_(t,1);try{e=E(e),g(this.root).rmdir(e,r)}catch(e){r(e)}},b.prototype.rmdirSync=function(e){return e=E(e),g(this.root).rmdirSync(e)},b.prototype.mkdir=function(e,t,r){void 0===r&&(r=S),"function"==typeof t&&(r=t,t=511);var n=_(r,1);try{e=E(e),g(this.root).mkdir(e,t,n)}catch(e){n(e)}},b.prototype.mkdirSync=function(e,t){g(this.root).mkdirSync(E(e),y(t,511))},b.prototype.readdir=function(e,t){void 0===t&&(t=S);var r=_(t,2);try{e=E(e),g(this.root).readdir(e,r)}catch(e){r(e)}},b.prototype.readdirSync=function(e){return e=E(e),g(this.root).readdirSync(e)},b.prototype.link=function(e,t,r){void 0===r&&(r=S);var n=_(r,1);try{e=E(e),t=E(t),g(this.root).link(e,t,n)}catch(e){n(e)}},b.prototype.linkSync=function(e,t){return e=E(e),t=E(t),g(this.root).linkSync(e,t)},b.prototype.symlink=function(e,t,r,n){void 0===n&&(n=S);var i="string"==typeof r?r:"file",o=_(n="function"==typeof r?r:n,1);try{if("file"!==i&&"dir"!==i)return o(new f(a.EINVAL,"Invalid type: "+i));e=E(e),t=E(t),g(this.root).symlink(e,t,i,o)}catch(e){o(e)}},b.prototype.symlinkSync=function(e,t,r){if(r){if("file"!==r&&"dir"!==r)throw new f(a.EINVAL,"Invalid type: "+r)}else r="file";return e=E(e),t=E(t),g(this.root).symlinkSync(e,t,r)},b.prototype.readlink=function(e,t){void 0===t&&(t=S);var r=_(t,2);try{e=E(e),g(this.root).readlink(e,r)}catch(e){r(e)}},b.prototype.readlinkSync=function(e){return e=E(e),g(this.root).readlinkSync(e)},b.prototype.chown=function(e,t,r,n){void 0===n&&(n=S);var i=_(n,1);try{e=E(e),g(this.root).chown(e,!1,t,r,i)}catch(e){i(e)}},b.prototype.chownSync=function(e,t,r){e=E(e),g(this.root).chownSync(e,!1,t,r)},b.prototype.lchown=function(e,t,r,n){void 0===n&&(n=S);var i=_(n,1);try{e=E(e),g(this.root).chown(e,!0,t,r,i)}catch(e){i(e)}},b.prototype.lchownSync=function(e,t,r){e=E(e),g(this.root).chownSync(e,!0,t,r)},b.prototype.chmod=function(e,t,r){void 0===r&&(r=S);var n=_(r,1);try{var i=y(t,-1);if(i<0)throw new f(a.EINVAL,"Invalid mode.");g(this.root).chmod(E(e),!1,i,n)}catch(e){n(e)}},b.prototype.chmodSync=function(e,t){var r=y(t,-1);if(r<0)throw new f(a.EINVAL,"Invalid mode.");e=E(e),g(this.root).chmodSync(e,!1,r)},b.prototype.lchmod=function(e,t,r){void 0===r&&(r=S);var n=_(r,1);try{var i=y(t,-1);if(i<0)throw new f(a.EINVAL,"Invalid mode.");g(this.root).chmod(E(e),!0,i,n)}catch(e){n(e)}},b.prototype.lchmodSync=function(e,t){var r=y(t,-1);if(r<1)throw new f(a.EINVAL,"Invalid mode.");g(this.root).chmodSync(E(e),!0,r)},b.prototype.utimes=function(e,t,r,n){void 0===n&&(n=S);var i=_(n,1);try{g(this.root).utimes(E(e),v(t),v(r),i)}catch(e){i(e)}},b.prototype.utimesSync=function(e,t,r){g(this.root).utimesSync(E(e),v(t),v(r))},b.prototype.realpath=function(e,t,r){void 0===r&&(r=S);var n="object"==typeof t?t:{},i=_(r="function"==typeof t?t:S,2);try{e=E(e),g(this.root).realpath(e,n,i)}catch(e){i(e)}},b.prototype.realpathSync=function(e,t){return void 0===t&&(t={}),e=E(e),g(this.root).realpathSync(e,t)},b.prototype.watchFile=function(e,t,r){throw void 0===r&&(r=S),new f(a.ENOTSUP)},b.prototype.unwatchFile=function(e,t){throw void 0===t&&(t=S),new f(a.ENOTSUP)},b.prototype.watch=function(e,t,r){throw void 0===r&&(r=S),new f(a.ENOTSUP)},b.prototype.access=function(e,t,r){throw void 0===r&&(r=S),new f(a.ENOTSUP)},b.prototype.accessSync=function(e,t){throw new f(a.ENOTSUP)},b.prototype.createReadStream=function(e,t){throw new f(a.ENOTSUP)},b.prototype.createWriteStream=function(e,t){throw new f(a.ENOTSUP)},b.prototype.wrapCallbacks=function(e){_=e},b.prototype.getFdForFile=function(e){var t=this.nextFd++;return this.fdMap[t]=e,t},b.prototype.fd2file=function(e){var t=this.fdMap[e];if(t)return t;throw new f(a.EBADF,"Invalid file descriptor.")},b.prototype.closeFd=function(e){delete this.fdMap[e]},b.Stats=m;var F=new b,k={},A=b.prototype;function L(e,t,r,n,i){return e<t||r<t?e>r?r+1:e+1:n===i?t:t+1}function x(e,t){if(e===t)return 0;if(e.length>t.length){var r=e;e=t,t=r}for(var n=e.length,i=t.length;n>0&&e.charCodeAt(n-1)===t.charCodeAt(i-1);)n--,i--;for(var o=0;o<n&&e.charCodeAt(o)===t.charCodeAt(o);)o++;if(i-=o,0===(n-=o)||1===i)return i;for(var a,s,c,u,l,f=new Array(n<<1),d=0;d<n;)f[n+d]=e.charCodeAt(o+d),f[d]=++d;for(a=0;a+3<i;)for(var h=t.charCodeAt(o+(s=a)),p=t.charCodeAt(o+(c=a+1)),m=t.charCodeAt(o+(u=a+2)),_=t.charCodeAt(o+(l=a+3)),g=a+=4,y=0;y<n;){var v=f[n+y],E=f[y];s=L(E,s,c,h,v),c=L(s,c,u,p,v),u=L(c,u,l,m,v),g=L(u,l,g,_,v),f[y++]=g,l=u,u=c,c=s,s=E}for(var w=0;a<i;){var S=t.charCodeAt(o+(s=a));w=++a;for(var b=0;b<n;b++){var F=f[b];f[b]=w=F<s||w<s?F>w?w+1:F+1:S===f[n+b]?s:s+1,s=F}}return w}function T(e,t,r){e&&console.warn("["+t+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+t+".Create("+JSON.stringify(r)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.")}Object.keys(A).forEach((function(e){"function"==typeof F[e]?k[e]=function(){return F[e].apply(F,arguments)}:k[e]=F[e]})),k.changeFSModule=function(e){F=e},k.getFSModule=function(){return F},k.FS=b;var P="undefined"!=typeof navigator&&!(!/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())&&-1===navigator.userAgent.indexOf("Trident")),C="undefined"==typeof window;function O(){throw new Error("BFS has reached an impossible code path; please file a bug.")}function R(e,t,r){r.existsSync(e)||(R(c.dirname(e),t,r),r.mkdirSync(e,t))}function D(e){var t=I(e),r=t.byteOffset,n=t.byteLength;return 0===r&&n===t.buffer.byteLength?t.buffer:t.buffer.slice(r,r+n)}function I(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function N(t){return t instanceof e?t:t instanceof Uint8Array?M(t):e.from(t)}function M(t){return t instanceof e?t:0===t.byteOffset&&t.byteLength===t.buffer.byteLength?B(t.buffer):e.from(t.buffer,t.byteOffset,t.byteLength)}function B(t){return e.from(t)}function U(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=e.length),t<0||r<0||r>e.length||t>r)throw new TypeError("Invalid slice bounds on buffer of length "+e.length+": ["+t+", "+r+"]");if(0===e.length)return G();var n=I(e),i=e[0],o=(i+1)%255;return e[0]=o,n[0]===o?(n[0]=i,M(n.slice(t,r))):(e[0]=i,M(n.subarray(t,r)))}var H=null;function G(){return H||(H=e.alloc(0))}function z(t,r){e.isBuffer(t)?r():r(new f(a.EINVAL,"option must be a Buffer."))}function j(e,t,r){var n=e.Options,i=e.Name,o=0,s=!1,c=!1;function u(e){s||(e&&(s=!0,r(e)),0===--o&&c&&r())}var l=function(e){if(n.hasOwnProperty(e)){var c=n[e],l=t[e];if(null==l){if(!c.optional){var d=Object.keys(t).filter((function(e){return!(e in n)})).map((function(t){return{str:t,distance:x(e,t)}})).filter((function(e){return e.distance<5})).sort((function(e,t){return e.distance-t.distance}));return s?{}:(s=!0,{v:r(new f(a.EINVAL,"["+i+"] Required option '"+e+"' not provided."+(d.length>0?" You provided unrecognized option '"+d[0].str+"'; perhaps you meant to type '"+e+"'.":"")+"\nOption description: "+c.description))})}}else{if(!(Array.isArray(c.type)?-1!==c.type.indexOf(typeof l):typeof l===c.type))return s?{}:(s=!0,{v:r(new f(a.EINVAL,"["+i+"] Value provided for option "+e+" is not the proper type. Expected "+(Array.isArray(c.type)?"one of {"+c.type.join(", ")+"}":c.type)+", but received "+typeof l+"\nOption description: "+c.description))});c.validator&&(o++,c.validator(l,u))}}};for(var d in n){var h=l(d);if(h)return h.v}c=!0,0!==o||s||r()}var W=Object.freeze({deprecationMessage:T,isIE:P,isWebWorker:C,fail:O,mkdirpSync:R,buffer2ArrayBuffer:D,buffer2Uint8array:I,arrayish2Buffer:N,uint8Array2Buffer:M,arrayBuffer2Buffer:B,copyingSlice:U,emptyBuffer:G,bufferValidator:z,checkOptions:j}),q=function(e){this.fs=e,this.nodefs=e.getNodeFS(),this.FS=e.getFS(),this.PATH=e.getPATH(),this.ERRNO_CODES=e.getERRNO_CODES()};q.prototype.open=function(e){var t=this.fs.realPath(e.node),r=this.FS;try{r.isFile(e.node.mode)&&(e.nfd=this.nodefs.openSync(t,this.fs.flagsToPermissionString(e.flags)))}catch(e){if(!e.code)throw e;throw new r.ErrnoError(this.ERRNO_CODES[e.code])}},q.prototype.close=function(e){var t=this.FS;try{t.isFile(e.node.mode)&&e.nfd&&this.nodefs.closeSync(e.nfd)}catch(e){if(!e.code)throw e;throw new t.ErrnoError(this.ERRNO_CODES[e.code])}},q.prototype.read=function(e,t,r,n,i){try{return this.nodefs.readSync(e.nfd,M(t),r,n,i)}catch(e){throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},q.prototype.write=function(e,t,r,n,i){try{return this.nodefs.writeSync(e.nfd,M(t),r,n,i)}catch(e){throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},q.prototype.llseek=function(e,t,r){var n=t;if(1===r)n+=e.position;else if(2===r&&this.FS.isFile(e.node.mode))try{n+=this.nodefs.fstatSync(e.nfd).size}catch(e){throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}if(n<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return e.position=n,n};var V=function(e){this.fs=e,this.nodefs=e.getNodeFS(),this.FS=e.getFS(),this.PATH=e.getPATH(),this.ERRNO_CODES=e.getERRNO_CODES()};V.prototype.getattr=function(e){var t,r=this.fs.realPath(e);try{t=this.nodefs.lstatSync(r)}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}return{dev:t.dev,ino:t.ino,mode:t.mode,nlink:t.nlink,uid:t.uid,gid:t.gid,rdev:t.rdev,size:t.size,atime:t.atime,mtime:t.mtime,ctime:t.ctime,blksize:t.blksize,blocks:t.blocks}},V.prototype.setattr=function(e,t){var r=this.fs.realPath(e);try{if(void 0!==t.mode&&(this.nodefs.chmodSync(r,t.mode),e.mode=t.mode),void 0!==t.timestamp){var n=new Date(t.timestamp);this.nodefs.utimesSync(r,n,n)}}catch(e){if(!e.code)throw e;if("ENOTSUP"!==e.code)throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}if(void 0!==t.size)try{this.nodefs.truncateSync(r,t.size)}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},V.prototype.lookup=function(e,t){var r=this.PATH.join2(this.fs.realPath(e),t),n=this.fs.getMode(r);return this.fs.createNode(e,t,n)},V.prototype.mknod=function(e,t,r,n){var i=this.fs.createNode(e,t,r,n),o=this.fs.realPath(i);try{this.FS.isDir(i.mode)?this.nodefs.mkdirSync(o,i.mode):this.nodefs.writeFileSync(o,"",{mode:i.mode})}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}return i},V.prototype.rename=function(e,t,r){var n=this.fs.realPath(e),i=this.PATH.join2(this.fs.realPath(t),r);try{this.nodefs.renameSync(n,i),e.name=r,e.parent=t}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},V.prototype.unlink=function(e,t){var r=this.PATH.join2(this.fs.realPath(e),t);try{this.nodefs.unlinkSync(r)}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},V.prototype.rmdir=function(e,t){var r=this.PATH.join2(this.fs.realPath(e),t);try{this.nodefs.rmdirSync(r)}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},V.prototype.readdir=function(e){var t=this.fs.realPath(e);try{var r=this.nodefs.readdirSync(t);return r.push(".",".."),r}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},V.prototype.symlink=function(e,t,r){var n=this.PATH.join2(this.fs.realPath(e),t);try{this.nodefs.symlinkSync(r,n)}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}},V.prototype.readlink=function(e){var t=this.fs.realPath(e);try{return this.nodefs.readlinkSync(t)}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}};var Y=function(e,t,r,n){void 0===e&&(e=self.FS),void 0===t&&(t=self.PATH),void 0===r&&(r=self.ERRNO_CODES),void 0===n&&(n=k),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=n,this.FS=e,this.PATH=t,this.ERRNO_CODES=r,this.node_ops=new V(this),this.stream_ops=new q(this)};Y.prototype.mount=function(e){return this.createNode(null,"/",this.getMode(e.opts.root),0)},Y.prototype.createNode=function(e,t,r,n){var i=this.FS;if(!i.isDir(r)&&!i.isFile(r)&&!i.isLink(r))throw new i.ErrnoError(this.ERRNO_CODES.EINVAL);var o=i.createNode(e,t,r);return o.node_ops=this.node_ops,o.stream_ops=this.stream_ops,o},Y.prototype.getMode=function(e){var t;try{t=this.nodefs.lstatSync(e)}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code])}return t.mode},Y.prototype.realPath=function(e){for(var t=[];e.parent!==e;)t.push(e.name),e=e.parent;return t.push(e.mount.opts.root),t.reverse(),this.PATH.join.apply(null,t)},Y.prototype.flagsToPermissionString=function(e){var t="string"==typeof e?parseInt(e,10):e;return(t&=8191)in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[t]:e},Y.prototype.getNodeFS=function(){return this.nodefs},Y.prototype.getFS=function(){return this.FS},Y.prototype.getPATH=function(){return this.PATH},Y.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES};var X=function(){};X.prototype.supportsLinks=function(){return!1},X.prototype.diskSpace=function(e,t){t(0,0)},X.prototype.openFile=function(e,t,r){throw new f(a.ENOTSUP)},X.prototype.createFile=function(e,t,r,n){throw new f(a.ENOTSUP)},X.prototype.open=function(e,t,r,n){var i=this;this.stat(e,!1,(function(o,s){if(o)switch(t.pathNotExistsAction()){case l.CREATE_FILE:return i.stat(c.dirname(e),!1,(function(o,a){o?n(o):a&&!a.isDirectory()?n(f.ENOTDIR(c.dirname(e))):i.createFile(e,t,r,n)}));case l.THROW_EXCEPTION:return n(f.ENOENT(e));default:return n(new f(a.EINVAL,"Invalid FileFlag object."))}else{if(s&&s.isDirectory())return n(f.EISDIR(e));switch(t.pathExistsAction()){case l.THROW_EXCEPTION:return n(f.EEXIST(e));case l.TRUNCATE_FILE:return i.openFile(e,t,(function(e,t){e?n(e):t?t.truncate(0,(function(){t.sync((function(){n(null,t)}))})):O()}));case l.NOP:return i.openFile(e,t,n);default:return n(new f(a.EINVAL,"Invalid FileFlag object."))}}}))},X.prototype.rename=function(e,t,r){r(new f(a.ENOTSUP))},X.prototype.renameSync=function(e,t){throw new f(a.ENOTSUP)},X.prototype.stat=function(e,t,r){r(new f(a.ENOTSUP))},X.prototype.statSync=function(e,t){throw new f(a.ENOTSUP)},X.prototype.openFileSync=function(e,t,r){throw new f(a.ENOTSUP)},X.prototype.createFileSync=function(e,t,r){throw new f(a.ENOTSUP)},X.prototype.openSync=function(e,t,r){var n;try{n=this.statSync(e,!1)}catch(n){switch(t.pathNotExistsAction()){case l.CREATE_FILE:if(!this.statSync(c.dirname(e),!1).isDirectory())throw f.ENOTDIR(c.dirname(e));return this.createFileSync(e,t,r);case l.THROW_EXCEPTION:throw f.ENOENT(e);default:throw new f(a.EINVAL,"Invalid FileFlag object.")}}if(n.isDirectory())throw f.EISDIR(e);switch(t.pathExistsAction()){case l.THROW_EXCEPTION:throw f.EEXIST(e);case l.TRUNCATE_FILE:return this.unlinkSync(e),this.createFileSync(e,t,n.mode);case l.NOP:return this.openFileSync(e,t,r);default:throw new f(a.EINVAL,"Invalid FileFlag object.")}},X.prototype.unlink=function(e,t){t(new f(a.ENOTSUP))},X.prototype.unlinkSync=function(e){throw new f(a.ENOTSUP)},X.prototype.rmdir=function(e,t){t(new f(a.ENOTSUP))},X.prototype.rmdirSync=function(e){throw new f(a.ENOTSUP)},X.prototype.mkdir=function(e,t,r){r(new f(a.ENOTSUP))},X.prototype.mkdirSync=function(e,t){throw new f(a.ENOTSUP)},X.prototype.readdir=function(e,t){t(new f(a.ENOTSUP))},X.prototype.readdirSync=function(e){throw new f(a.ENOTSUP)},X.prototype.exists=function(e,t){this.stat(e,null,(function(e){t(!e)}))},X.prototype.existsSync=function(e){try{return this.statSync(e,!0),!0}catch(e){return!1}},X.prototype.realpath=function(e,t,r){if(this.supportsLinks())for(var n=e.split(c.sep),i=0;i<n.length;i++){var o=n.slice(0,i+1);n[i]=c.join.apply(null,o)}else this.exists(e,(function(t){t?r(null,e):r(f.ENOENT(e))}))},X.prototype.realpathSync=function(e,t){if(this.supportsLinks()){for(var r=e.split(c.sep),n=0;n<r.length;n++){var i=r.slice(0,n+1);r[n]=c.join.apply(c,i)}return r.join(c.sep)}if(this.existsSync(e))return e;throw f.ENOENT(e)},X.prototype.truncate=function(e,t,r){this.open(e,p.getFileFlag("r+"),420,(function(e,n){if(e)return r(e);n.truncate(t,(function(e){n.close((function(t){r(e||t)}))}))}))},X.prototype.truncateSync=function(e,t){var r=this.openSync(e,p.getFileFlag("r+"),420);try{r.truncateSync(t)}catch(e){throw e}finally{r.closeSync()}},X.prototype.readFile=function(t,r,n,i){var o=i;this.open(t,n,420,(function(t,n){if(t)return i(t);i=function(e,t){n.close((function(r){return e||(e=r),o(e,t)}))},n.stat((function(t,o){if(t)return i(t);var a=e.alloc(o.size);n.read(a,0,o.size,0,(function(e){if(e)return i(e);if(null===r)return i(e,a);try{i(null,a.toString(r))}catch(e){i(e)}}))}))}))},X.prototype.readFileSync=function(t,r,n){var i=this.openSync(t,n,420);try{var o=i.statSync(),a=e.alloc(o.size);return i.readSync(a,0,o.size,0),i.closeSync(),null===r?a:a.toString(r)}finally{i.closeSync()}},X.prototype.writeFile=function(t,r,n,i,o,a){var s=a;this.open(t,i,420,(function(t,i){if(t)return a(t);a=function(e){i.close((function(t){s(e||t)}))};try{"string"==typeof r&&(r=e.from(r,n))}catch(e){return a(e)}i.write(r,0,r.length,0,a)}))},X.prototype.writeFileSync=function(t,r,n,i,o){var a=this.openSync(t,i,o);try{"string"==typeof r&&(r=e.from(r,n)),a.writeSync(r,0,r.length,0)}finally{a.closeSync()}},X.prototype.appendFile=function(t,r,n,i,o,a){var s=a;this.open(t,i,o,(function(t,i){if(t)return a(t);a=function(e){i.close((function(t){s(e||t)}))},"string"==typeof r&&(r=e.from(r,n)),i.write(r,0,r.length,null,a)}))},X.prototype.appendFileSync=function(t,r,n,i,o){var a=this.openSync(t,i,o);try{"string"==typeof r&&(r=e.from(r,n)),a.writeSync(r,0,r.length,null)}finally{a.closeSync()}},X.prototype.chmod=function(e,t,r,n){n(new f(a.ENOTSUP))},X.prototype.chmodSync=function(e,t,r){throw new f(a.ENOTSUP)},X.prototype.chown=function(e,t,r,n,i){i(new f(a.ENOTSUP))},X.prototype.chownSync=function(e,t,r,n){throw new f(a.ENOTSUP)},X.prototype.utimes=function(e,t,r,n){n(new f(a.ENOTSUP))},X.prototype.utimesSync=function(e,t,r){throw new f(a.ENOTSUP)},X.prototype.link=function(e,t,r){r(new f(a.ENOTSUP))},X.prototype.linkSync=function(e,t){throw new f(a.ENOTSUP)},X.prototype.symlink=function(e,t,r,n){n(new f(a.ENOTSUP))},X.prototype.symlinkSync=function(e,t,r){throw new f(a.ENOTSUP)},X.prototype.readlink=function(e,t){t(new f(a.ENOTSUP))},X.prototype.readlinkSync=function(e){throw new f(a.ENOTSUP)};var Z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.supportsSynch=function(){return!0},t.prototype.rename=function(e,t,r){try{this.renameSync(e,t),r()}catch(e){r(e)}},t.prototype.stat=function(e,t,r){try{r(null,this.statSync(e,t))}catch(e){r(e)}},t.prototype.open=function(e,t,r,n){try{n(null,this.openSync(e,t,r))}catch(e){n(e)}},t.prototype.unlink=function(e,t){try{this.unlinkSync(e),t()}catch(e){t(e)}},t.prototype.rmdir=function(e,t){try{this.rmdirSync(e),t()}catch(e){t(e)}},t.prototype.mkdir=function(e,t,r){try{this.mkdirSync(e,t),r()}catch(e){r(e)}},t.prototype.readdir=function(e,t){try{t(null,this.readdirSync(e))}catch(e){t(e)}},t.prototype.chmod=function(e,t,r,n){try{this.chmodSync(e,t,r),n()}catch(e){n(e)}},t.prototype.chown=function(e,t,r,n,i){try{this.chownSync(e,t,r,n),i()}catch(e){i(e)}},t.prototype.utimes=function(e,t,r,n){try{this.utimesSync(e,t,r),n()}catch(e){n(e)}},t.prototype.link=function(e,t,r){try{this.linkSync(e,t),r()}catch(e){r(e)}},t.prototype.symlink=function(e,t,r,n){try{this.symlinkSync(e,t,r),n()}catch(e){n(e)}},t.prototype.readlink=function(e,t){try{t(null,this.readlinkSync(e))}catch(e){t(e)}},t}(X),J=function(){};J.prototype.sync=function(e){e(new f(a.ENOTSUP))},J.prototype.syncSync=function(){throw new f(a.ENOTSUP)},J.prototype.datasync=function(e){this.sync(e)},J.prototype.datasyncSync=function(){return this.syncSync()},J.prototype.chown=function(e,t,r){r(new f(a.ENOTSUP))},J.prototype.chownSync=function(e,t){throw new f(a.ENOTSUP)},J.prototype.chmod=function(e,t){t(new f(a.ENOTSUP))},J.prototype.chmodSync=function(e){throw new f(a.ENOTSUP)},J.prototype.utimes=function(e,t,r){r(new f(a.ENOTSUP))},J.prototype.utimesSync=function(e,t){throw new f(a.ENOTSUP)};var K=function(t){function r(e,r,n,i,o){if(t.call(this),this._pos=0,this._dirty=!1,this._fs=e,this._path=r,this._flag=n,this._stat=i,this._buffer=o||G(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.getBuffer=function(){return this._buffer},r.prototype.getStats=function(){return this._stat},r.prototype.getFlag=function(){return this._flag},r.prototype.getPath=function(){return this._path},r.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},r.prototype.advancePos=function(e){return this._pos+=e},r.prototype.setPos=function(e){return this._pos=e},r.prototype.sync=function(e){try{this.syncSync(),e()}catch(t){e(t)}},r.prototype.syncSync=function(){throw new f(a.ENOTSUP)},r.prototype.close=function(e){try{this.closeSync(),e()}catch(t){e(t)}},r.prototype.closeSync=function(){throw new f(a.ENOTSUP)},r.prototype.stat=function(e){try{e(null,this._stat.clone())}catch(t){e(t)}},r.prototype.statSync=function(){return this._stat.clone()},r.prototype.truncate=function(e,t){try{this.truncateSync(e),this._flag.isSynchronous()&&!k.getRootFS().supportsSynch()&&this.sync(t),t()}catch(e){return t(e)}},r.prototype.truncateSync=function(t){if(this._dirty=!0,!this._flag.isWriteable())throw new f(a.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,t>this._buffer.length){var r=e.alloc(t-this._buffer.length,0);return this.writeSync(r,0,r.length,this._buffer.length),void(this._flag.isSynchronous()&&k.getRootFS().supportsSynch()&&this.syncSync())}this._stat.size=t;var n=e.alloc(t);this._buffer.copy(n,0,0,t),this._buffer=n,this._flag.isSynchronous()&&k.getRootFS().supportsSynch()&&this.syncSync()},r.prototype.write=function(e,t,r,n,i){try{i(null,this.writeSync(e,t,r,n),e)}catch(e){i(e)}},r.prototype.writeSync=function(t,r,n,i){if(this._dirty=!0,null==i&&(i=this.getPos()),!this._flag.isWriteable())throw new f(a.EPERM,"File not opened with a writeable mode.");var o=i+n;if(o>this._stat.size&&(this._stat.size=o,o>this._buffer.length)){var s=e.alloc(o);this._buffer.copy(s),this._buffer=s}var c=t.copy(this._buffer,i,r,r+n);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),c):(this.setPos(i+c),c)},r.prototype.read=function(e,t,r,n,i){try{i(null,this.readSync(e,t,r,n),e)}catch(e){i(e)}},r.prototype.readSync=function(e,t,r,n){if(!this._flag.isReadable())throw new f(a.EPERM,"File not opened with a readable mode.");null==n&&(n=this.getPos()),n+r>this._stat.size&&(r=this._stat.size-n);var i=this._buffer.copy(e,t,n,n+r);return this._stat.atime=new Date,this._pos=n+r,i},r.prototype.chmod=function(e,t){try{this.chmodSync(e),t()}catch(e){t(e)}},r.prototype.chmodSync=function(e){if(!this._fs.supportsProps())throw new f(a.ENOTSUP);this._dirty=!0,this._stat.chmod(e),this.syncSync()},r.prototype.isDirty=function(){return this._dirty},r.prototype.resetDirty=function(){this._dirty=!1},r}(J),$=function(e){function t(t,r,n,i,o){e.call(this,t,r,n,i,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.close=function(e){e()},t.prototype.closeSync=function(){},t}(K),Q=function(e){function t(t,r,n,i,o){e.call(this,t,r,n,i,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(K),ee=function(e){function t(r,n,i){if(void 0===i&&(i=!0),e.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=r,this._async=n,!r.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");T(i,t.Name,{sync:"sync file system instance",async:"async file system instance"})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,r){try{var n=new t(e.sync,e.async,!1);n.initialize((function(e){e?r(e):r(null,n)}),!1)}catch(e){r(e)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){return t.Name},t.prototype._syncSync=function(e){this._sync.writeFileSync(e.getPath(),e.getBuffer(),null,p.getFileFlag("w"),e.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[e.getPath(),e.getBuffer(),null,e.getFlag(),e.getStats().mode]})},t.prototype.initialize=function(e,t){var r=this;void 0===t&&(t=!0),t&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var n=this._initializeCallbacks;if(this._isInitialized)e();else if(1===n.push(e)){var i=function(e,t,n){"/"!==e&&r._sync.mkdirSync(e,t),r._async.readdir(e,(function(t,r){var i=0;t?n(t):function t(a){a?n(a):i<r.length?(o(c.join(e,r[i]),t),i++):n()}()}))},o=function(e,t){r._async.stat(e,!1,(function(n,o){n?t(n):o.isDirectory()?i(e,o.mode,t):function(e,t,n){r._async.readFile(e,null,p.getFileFlag("r"),(function(i,o){if(i)n(i);else try{r._sync.writeFileSync(e,o,null,p.getFileFlag("w"),t)}catch(e){i=e}finally{n(i)}}))}(e,o.mode,t)}))};i("/",0,(function(e){r._isInitialized=!e,r._initializeCallbacks=[],n.forEach((function(t){return t(e)}))}))}},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},t.prototype.renameSync=function(e,t){this.checkInitialized(),this._sync.renameSync(e,t),this.enqueueOp({apiMethod:"rename",arguments:[e,t]})},t.prototype.statSync=function(e,t){return this.checkInitialized(),this._sync.statSync(e,t)},t.prototype.openSync=function(e,t,r){return this.checkInitialized(),this._sync.openSync(e,t,r).closeSync(),new Q(this,e,t,this._sync.statSync(e,!1),this._sync.readFileSync(e,null,p.getFileFlag("r")))},t.prototype.unlinkSync=function(e){this.checkInitialized(),this._sync.unlinkSync(e),this.enqueueOp({apiMethod:"unlink",arguments:[e]})},t.prototype.rmdirSync=function(e){this.checkInitialized(),this._sync.rmdirSync(e),this.enqueueOp({apiMethod:"rmdir",arguments:[e]})},t.prototype.mkdirSync=function(e,t){this.checkInitialized(),this._sync.mkdirSync(e,t),this.enqueueOp({apiMethod:"mkdir",arguments:[e,t]})},t.prototype.readdirSync=function(e){return this.checkInitialized(),this._sync.readdirSync(e)},t.prototype.existsSync=function(e){return this.checkInitialized(),this._sync.existsSync(e)},t.prototype.chmodSync=function(e,t,r){this.checkInitialized(),this._sync.chmodSync(e,t,r),this.enqueueOp({apiMethod:"chmod",arguments:[e,t,r]})},t.prototype.chownSync=function(e,t,r,n){this.checkInitialized(),this._sync.chownSync(e,t,r,n),this.enqueueOp({apiMethod:"chown",arguments:[e,t,r,n]})},t.prototype.utimesSync=function(e,t,r){this.checkInitialized(),this._sync.utimesSync(e,t,r),this.enqueueOp({apiMethod:"utimes",arguments:[e,t,r]})},t.prototype.checkInitialized=function(){if(!this._isInitialized)throw new f(a.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},t.prototype.enqueueOp=function(e){var t=this;if(this._queue.push(e),!this._queueRunning){this._queueRunning=!0;var r=function(e){if(e&&console.error("WARNING: File system has desynchronized. Received following error: "+e+"\n$"),t._queue.length>0){var n=t._queue.shift(),i=n.arguments;i.push(r),t._async[n.apiMethod].apply(t._async,i)}else t._queueRunning=!1};r()}},t}(Z);function te(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}ee.Name="AsyncMirror",ee.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};var re=Math.max;function ne(e){return e}function ie(e,t){return function(e,t,r){return t=re(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=re(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),te(e,this,s)}}(e,t,ne)}var oe=function(e){return ie((function(t){var r=t.pop();e.call(this,t,r)}))};function ae(e){return ie((function(t,r){var n=oe((function(r,n){var i=this;return e(t,(function(e,t){e.apply(i,r.concat(t))}),n)}));return r.length?n.apply(this,r):n}))}var se="object"==typeof n&&n&&n.Object===Object&&n,ce="object"==typeof self&&self&&self.Object===Object&&self,ue=se||ce||Function("return this")(),le=ue.Symbol,fe=Object.prototype,de=fe.hasOwnProperty,he=fe.toString,pe=le?le.toStringTag:void 0;var me=Object.prototype.toString;var _e=le?le.toStringTag:void 0;function ge(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":_e&&_e in Object(e)?function(e){var t=de.call(e,pe),r=e[pe];try{e[pe]=void 0;var n=!0}catch(e){}var i=he.call(e);return n&&(t?e[pe]=r:delete e[pe]),i}(e):function(e){return me.call(e)}(e)}function ye(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function ve(e){return null!=e&&ye(e.length)&&!function(e){if(!function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}(e))return!1;var t=ge(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(e)}var Ee={};function we(){}function Se(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}var be="function"==typeof Symbol&&Symbol.iterator;function Fe(e){return null!=e&&"object"==typeof e}function ke(e){return Fe(e)&&"[object Arguments]"==ge(e)}var Ae=Object.prototype,Le=Ae.hasOwnProperty,xe=Ae.propertyIsEnumerable,Te=ke(function(){return arguments}())?ke:function(e){return Fe(e)&&Le.call(e,"callee")&&!xe.call(e,"callee")},Pe=Array.isArray;var Ce="object"==typeof t&&t&&!t.nodeType&&t,Oe=Ce&&"object"==typeof i&&i&&!i.nodeType&&i,Re=Oe&&Oe.exports===Ce?ue.Buffer:void 0,De=(Re?Re.isBuffer:void 0)||function(){return!1},Ie=/^(?:0|[1-9]\d*)$/;function Ne(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||Ie.test(e))&&e>-1&&e%1==0&&e<t}var Me={};Me["[object Float32Array]"]=Me["[object Float64Array]"]=Me["[object Int8Array]"]=Me["[object Int16Array]"]=Me["[object Int32Array]"]=Me["[object Uint8Array]"]=Me["[object Uint8ClampedArray]"]=Me["[object Uint16Array]"]=Me["[object Uint32Array]"]=!0,Me["[object Arguments]"]=Me["[object Array]"]=Me["[object ArrayBuffer]"]=Me["[object Boolean]"]=Me["[object DataView]"]=Me["[object Date]"]=Me["[object Error]"]=Me["[object Function]"]=Me["[object Map]"]=Me["[object Number]"]=Me["[object Object]"]=Me["[object RegExp]"]=Me["[object Set]"]=Me["[object String]"]=Me["[object WeakMap]"]=!1;var Be,Ue="object"==typeof t&&t&&!t.nodeType&&t,He=Ue&&"object"==typeof i&&i&&!i.nodeType&&i,Ge=He&&He.exports===Ue&&se.process,ze=function(){try{return Ge&&Ge.binding&&Ge.binding("util")}catch(e){}}(),je=ze&&ze.isTypedArray,We=je?(Be=je,function(e){return Be(e)}):function(e){return Fe(e)&&ye(e.length)&&!!Me[ge(e)]},qe=Object.prototype.hasOwnProperty;function Ve(e,t){var r=Pe(e),n=!r&&Te(e),i=!r&&!n&&De(e),o=!r&&!n&&!i&&We(e),a=r||n||i||o,s=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=s.length;for(var u in e)!t&&!qe.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ne(u,c))||s.push(u);return s}var Ye=Object.prototype;var Xe=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),Ze=Object.prototype.hasOwnProperty;function Je(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||Ye))return Xe(e);var t,r,n=[];for(var i in Object(e))Ze.call(e,i)&&"constructor"!=i&&n.push(i);return n}function Ke(e){return ve(e)?Ve(e):Je(e)}function $e(e){if(ve(e))return function(e){var t=-1,r=e.length;return function(){return++t<r?{value:e[t],key:t}:null}}(e);var t=function(e){return be&&e[be]&&e[be]()}(e);return t?function(e){var t=-1;return function(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}(t):function(e){var t=Ke(e),r=-1,n=t.length;return function(){var i=t[++r];return r<n?{value:e[i],key:i}:null}}(e)}function Qe(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function et(e){return function(t,r,n){if(n=Se(n||we),e<=0||!t)return n(null);var i=$e(t),o=!1,a=0;function s(e,t){if(a-=1,e)o=!0,n(e);else{if(t===Ee||o&&a<=0)return o=!0,n(null);c()}}function c(){for(;a<e&&!o;){var t=i();if(null===t)return o=!0,void(a<=0&&n(null));a+=1,r(t.value,t.key,Qe(s))}}c()}}function tt(e,t,r,n){et(t)(e,r,n)}function rt(e,t){return function(r,n,i){return e(r,t,n,i)}}function nt(e,t,r){r=Se(r||we);var n=0,i=0,o=e.length;function a(e,t){e?r(e):++i!==o&&t!==Ee||r(null)}for(0===o&&r(null);n<o;n++)t(e[n],n,Qe(a))}var it,ot=rt(tt,1/0),at=function(e,t,r){(ve(e)?nt:ot)(e,t,r)};function st(e,t,r,n){n=n||we;var i=[],o=0;e(t=t||[],(function(e,t,n){var a=o++;r(e,(function(e,t){i[a]=t,n(e)}))}),(function(e){n(e,i)}))}ae((it=st,function(e,t,r){return it(at,e,t,r)}));var ct=function(e){return function(t,r,n,i){return e(et(r),t,n,i)}}(st);ae(rt(ct,1)),ie((function(e,t){return ie((function(r){return e.apply(null,t.concat(r))}))}));var ut="[\\ud800-\\udfff]",lt="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ft="[^\\ud800-\\udfff]",dt="(?:\\ud83c[\\udde6-\\uddff]){2}",ht="[\\ud800-\\udbff][\\udc00-\\udfff]",pt="(?:"+lt+"|\\ud83c[\\udffb-\\udfff])"+"?",mt="[\\ufe0e\\ufe0f]?",_t=([ft,dt,ht].join("|"),[ft+lt+"?",lt,dt,ht,ut].join("|"),"function"==typeof setImmediate&&setImmediate),gt="object"==typeof o&&"function"==typeof o.nextTick;function yt(e){setTimeout(e,0)}function vt(e){return ie((function(t,r){e((function(){t.apply(null,r)}))}))}vt(_t?setImmediate:gt?o.nextTick:yt);var Et=rt(tt,1);var wt=ie((function(e){return ie((function(t){var r,n,i,o,a=this,s=t[t.length-1];"function"==typeof s?t.pop():s=we,r=e,n=t,i=function(e,t,r){t.apply(a,e.concat(ie((function(e,t){r(e,t)}))))},o=function(e,t){s.apply(a,[e].concat(t))},o=Se(o||we),Et(r,(function(e,t,r){i(n,e,(function(e,t){n=t,r(e)}))}),(function(e){o(e,n)}))}))}));function St(e){return ie((function(t,r){t.apply(null,r.concat(ie((function(t,r){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););}(r,(function(t){console[e](t)})))}))))}))}function bt(e,t,r){at(e,function(e){return function(t,r,n){return e(t,n)}}(t),r)}ie((function(e){return wt.apply(null,e.reverse())})),ie((function(e){var t=[null].concat(e);return oe((function(e,r){return r.apply(this,t)}))})),St("dir"),St("log"),vt(gt?o.nextTick:_t?setImmediate:yt);var Ft;Math.ceil,Math.max;var kt=function(e){this._cache={},this._client=e};kt.prototype.readdir=function(e,t){var r=this,n=this.getCachedDirInfo(e);this._wrap((function(t){null!==n&&n.contents?r._client.readdir(e,{contentHash:n.stat.contentHash},t):r._client.readdir(e,t)}),(function(i,o,a,s){i?i.status===Dropbox.ApiError.NO_CONTENT&&null!==n?t(null,n.contents.slice(0)):t(i):(r.updateCachedDirInfo(e,a,o.slice(0)),s.forEach((function(t){r.updateCachedInfo(c.join(e,t.name),t)})),t(null,o))}))},kt.prototype.remove=function(e,t){var r=this;this._wrap((function(t){r._client.remove(e,t)}),(function(n,i){n||r.updateCachedInfo(e,i),t(n)}))},kt.prototype.move=function(e,t,r){var n=this;this._wrap((function(r){n._client.move(e,t,r)}),(function(i,o){i||(n.deleteCachedInfo(e),n.updateCachedInfo(t,o)),r(i)}))},kt.prototype.stat=function(e,t){var r=this;this._wrap((function(t){r._client.stat(e,t)}),(function(n,i){n||r.updateCachedInfo(e,i),t(n,i)}))},kt.prototype.readFile=function(e,t){var r=this,n=this.getCachedFileInfo(e);null!==n&&null!==n.contents?this.stat(e,(function(i,o){i?t(i):o.contentHash===n.stat.contentHash?t(i,n.contents.slice(0),n.stat):r.readFile(e,t)})):this._wrap((function(t){r._client.readFile(e,{arrayBuffer:!0},t)}),(function(n,i,o){n||r.updateCachedInfo(e,o,i.slice(0)),t(n,i,o)}))},kt.prototype.writeFile=function(e,t,r){var n=this;this._wrap((function(r){n._client.writeFile(e,t,r)}),(function(i,o){i||n.updateCachedInfo(e,o,t.slice(0)),r(i,o)}))},kt.prototype.mkdir=function(e,t){var r=this;this._wrap((function(t){r._client.mkdir(e,t)}),(function(n,i){n||r.updateCachedInfo(e,i,[]),t(n)}))},kt.prototype._wrap=function(e,t){var r=0,n=function(i){var o=2;if(i&&3>++r)switch(i.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout((function(){e(n)}),1e3*o);break;default:t.apply(null,arguments)}else t.apply(null,arguments)};e(n)},kt.prototype.getCachedInfo=function(e){return this._cache[e.toLowerCase()]},kt.prototype.putCachedInfo=function(e,t){this._cache[e.toLowerCase()]=t},kt.prototype.deleteCachedInfo=function(e){delete this._cache[e.toLowerCase()]},kt.prototype.getCachedDirInfo=function(e){var t,r=this.getCachedInfo(e);return(t=r)&&t.stat.isFolder?r:null},kt.prototype.getCachedFileInfo=function(e){var t,r=this.getCachedInfo(e);return(t=r)&&t.stat.isFile?r:null},kt.prototype.updateCachedDirInfo=function(e,t,r){void 0===r&&(r=null);var n=this.getCachedInfo(e);null===t.contentHash||void 0!==n&&n.stat.contentHash===t.contentHash||this.putCachedInfo(e,{stat:t,contents:r})},kt.prototype.updateCachedFileInfo=function(e,t,r){void 0===r&&(r=null);var n=this.getCachedInfo(e);null===t.versionTag||void 0!==n&&n.stat.versionTag===t.versionTag||this.putCachedInfo(e,{stat:t,contents:r})},kt.prototype.updateCachedInfo=function(e,t,r){var n;void 0===r&&(r=null),t.isFile&&(null==(n=r)||"object"==typeof n&&"number"==typeof n.byteLength)?this.updateCachedFileInfo(e,t,r):t.isFolder&&Array.isArray(r)&&this.updateCachedDirInfo(e,t,r)};var At=function(e){function t(t,r,n,i,o){e.call(this,t,r,n,i,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var t=this;if(this.isDirty()){var r=D(this.getBuffer());this._fs._writeFileStrict(this.getPath(),r,(function(r){r||t.resetDirty(),e(r)}))}else e()},t.prototype.close=function(e){this.sync(e)},t}(K),Lt=function(e){function t(r,n){void 0===n&&(n=!0),e.call(this),this._client=new kt(r),T(n,t.Name,{client:"authenticated dropbox client instance"}),Ft||((Ft={})[Dropbox.ApiError.NETWORK_ERROR]=a.EIO,Ft[Dropbox.ApiError.INVALID_PARAM]=a.EINVAL,Ft[Dropbox.ApiError.INVALID_TOKEN]=a.EPERM,Ft[Dropbox.ApiError.OAUTH_ERROR]=a.EPERM,Ft[Dropbox.ApiError.NOT_FOUND]=a.ENOENT,Ft[Dropbox.ApiError.INVALID_METHOD]=a.EINVAL,Ft[Dropbox.ApiError.NOT_ACCEPTABLE]=a.EINVAL,Ft[Dropbox.ApiError.CONFLICT]=a.EINVAL,Ft[Dropbox.ApiError.RATE_LIMITED]=a.EBUSY,Ft[Dropbox.ApiError.SERVER_ERROR]=a.EBUSY,Ft[Dropbox.ApiError.OVER_QUOTA]=a.ENOSPC)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,r){r(null,new t(e.client,!1))},t.isAvailable=function(){return"undefined"!=typeof Dropbox},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.empty=function(e){var t=this;this._client.readdir("/",(function(r,n){if(r)e(t.convert(r,"/"));else{bt(n,(function(e,r){var n=c.join("/",e);t._client.remove(n,(function(e){r(e?t.convert(e,n):null)}))}),(function(t){t?e(t):e()}))}}))},t.prototype.rename=function(e,t,r){var n=this;this._client.move(e,t,(function(i){i?n._client.stat(t,(function(o,a){if(o||a.isFolder){var s=i.response.error.indexOf(e)>-1?e:t;r(n.convert(i,s))}else n._client.remove(t,(function(i){i?r(n.convert(i,t)):n.rename(e,t,r)}))})):r()}))},t.prototype.stat=function(e,t,r){var n=this;this._client.stat(e,(function(t,i){if(t)r(n.convert(t,e));else{if(!i||!i.isRemoved){var o=new m(n._statType(i),i.size);return r(null,o)}r(f.FileError(a.ENOENT,e))}}))},t.prototype.open=function(e,t,r,n){var i=this;this._client.readFile(e,(function(r,o,a){if(!r){var s;s=null===o?G():B(o);var c=i._makeFile(e,t,a,s);return n(null,c)}if(!t.isReadable()){if(r.status===Dropbox.ApiError.NOT_FOUND){var u=new ArrayBuffer(0);return i._writeFileStrict(e,u,(function(r,o){if(r)n(r);else{var a=i._makeFile(e,t,o,B(u));n(null,a)}}))}return n(i.convert(r,e))}n(i.convert(r,e))}))},t.prototype._writeFileStrict=function(e,t,r){var n=this,i=c.dirname(e);this.stat(i,!1,(function(o,s){o?r(f.FileError(a.ENOENT,i)):n._client.writeFile(e,t,(function(t,i){t?r(n.convert(t,e)):r(null,i)}))}))},t.prototype._statType=function(e){return e.isFile?h.FILE:h.DIRECTORY},t.prototype._makeFile=function(e,t,r,n){var i=this._statType(r),o=new m(i,r.size);return new At(this,e,t,o,n)},t.prototype._remove=function(e,t,r){var n=this;this._client.stat(e,(function(i,o){i?t(n.convert(i,e)):o.isFile&&!r?t(f.FileError(a.ENOTDIR,e)):!o.isFile&&r?t(f.FileError(a.EISDIR,e)):n._client.remove(e,(function(r){t(r?n.convert(r,e):null)}))}))},t.prototype.unlink=function(e,t){this._remove(e,t,!0)},t.prototype.rmdir=function(e,t){this._remove(e,t,!1)},t.prototype.mkdir=function(e,t,r){var n=this,i=c.dirname(e);this._client.stat(i,(function(t,o){t?r(n.convert(t,i)):n._client.mkdir(e,(function(t){r(t?f.FileError(a.EEXIST,e):null)}))}))},t.prototype.readdir=function(e,t){var r=this;this._client.readdir(e,(function(e,n){return e?t(r.convert(e)):t(null,n)}))},t.prototype.convert=function(e,t){void 0===t&&(t=null);var r=Ft[e.status];return void 0===r&&(r=a.EIO),t?f.FileError(r,t):new f(r)},t}(X);function xt(e,t){void 0===t&&(t="");for(var r=e.errno,n=e.node,i=[];n&&(i.unshift(n.name),n!==n.parent);)n=n.parent;return new f(r,u[r],i.length>0?"/"+i.join("/"):t)}Lt.Name="Dropbox",Lt.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(e,t){e.isAuthenticated&&e.isAuthenticated()?t():t(new f(a.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."))}}};var Tt=function(e){function t(t,r,n,i){e.call(this),this._fs=t,this._FS=r,this._path=n,this._stream=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getPos=function(){},t.prototype.close=function(e){var t=null;try{this.closeSync()}catch(e){t=e}finally{e(t)}},t.prototype.closeSync=function(){try{this._FS.close(this._stream)}catch(e){throw xt(e,this._path)}},t.prototype.stat=function(e){try{e(null,this.statSync())}catch(t){e(t)}},t.prototype.statSync=function(){try{return this._fs.statSync(this._path,!1)}catch(e){throw xt(e,this._path)}},t.prototype.truncate=function(e,t){var r=null;try{this.truncateSync(e)}catch(e){r=e}finally{t(r)}},t.prototype.truncateSync=function(e){try{this._FS.ftruncate(this._stream.fd,e)}catch(e){throw xt(e,this._path)}},t.prototype.write=function(e,t,r,n,i){try{i(null,this.writeSync(e,t,r,n),e)}catch(e){i(e)}},t.prototype.writeSync=function(e,t,r,n){try{var i=I(e),o=null===n?void 0:n;return this._FS.write(this._stream,i,t,r,o)}catch(e){throw xt(e,this._path)}},t.prototype.read=function(e,t,r,n,i){try{i(null,this.readSync(e,t,r,n),e)}catch(e){i(e)}},t.prototype.readSync=function(e,t,r,n){try{var i=I(e),o=null===n?void 0:n;return this._FS.read(this._stream,i,t,r,o)}catch(e){throw xt(e,this._path)}},t.prototype.sync=function(e){e()},t.prototype.syncSync=function(){},t.prototype.chown=function(e,t,r){var n=null;try{this.chownSync(e,t)}catch(e){n=e}finally{r(n)}},t.prototype.chownSync=function(e,t){try{this._FS.fchown(this._stream.fd,e,t)}catch(e){throw xt(e,this._path)}},t.prototype.chmod=function(e,t){var r=null;try{this.chmodSync(e)}catch(e){r=e}finally{t(r)}},t.prototype.chmodSync=function(e){try{this._FS.fchmod(this._stream.fd,e)}catch(e){throw xt(e,this._path)}},t.prototype.utimes=function(e,t,r){var n=null;try{this.utimesSync(e,t)}catch(e){n=e}finally{r(n)}},t.prototype.utimesSync=function(e,t){this._fs.utimesSync(this._path,e,t)},t}(J),Pt=function(t){function r(e){t.call(this),this._FS=e}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.Create=function(e,t){t(null,new r(e.FS))},r.isAvailable=function(){return!0},r.prototype.getName=function(){return this._FS.DB_NAME()},r.prototype.isReadOnly=function(){return!1},r.prototype.supportsLinks=function(){return!0},r.prototype.supportsProps=function(){return!0},r.prototype.supportsSynch=function(){return!0},r.prototype.renameSync=function(e,t){try{this._FS.rename(e,t)}catch(r){throw r.errno===a.ENOENT?xt(r,this.existsSync(e)?t:e):xt(r)}},r.prototype.statSync=function(e,t){try{var r=t?this._FS.lstat(e):this._FS.stat(e),n=this.modeToFileType(r.mode);return new m(n,r.size,r.mode,r.atime,r.mtime,r.ctime)}catch(t){throw xt(t,e)}},r.prototype.openSync=function(e,t,r){try{var n=this._FS.open(e,t.getFlagString(),r);if(this._FS.isDir(n.node.mode))throw this._FS.close(n),f.EISDIR(e);return new Tt(this,this._FS,e,n)}catch(t){throw xt(t,e)}},r.prototype.unlinkSync=function(e){try{this._FS.unlink(e)}catch(t){throw xt(t,e)}},r.prototype.rmdirSync=function(e){try{this._FS.rmdir(e)}catch(t){throw xt(t,e)}},r.prototype.mkdirSync=function(e,t){try{this._FS.mkdir(e,t)}catch(t){throw xt(t,e)}},r.prototype.readdirSync=function(e){try{return this._FS.readdir(e).filter((function(e){return"."!==e&&".."!==e}))}catch(t){throw xt(t,e)}},r.prototype.truncateSync=function(e,t){try{this._FS.truncate(e,t)}catch(t){throw xt(t,e)}},r.prototype.readFileSync=function(e,t,r){try{var n=M(this._FS.readFile(e,{flags:r.getFlagString()}));return t?n.toString(t):n}catch(t){throw xt(t,e)}},r.prototype.writeFileSync=function(t,r,n,i,o){try{n&&(r=e.from(r,n));var a=I(r);this._FS.writeFile(t,a,{flags:i.getFlagString(),encoding:"binary"}),this._FS.chmod(t,o)}catch(e){throw xt(e,t)}},r.prototype.chmodSync=function(e,t,r){try{t?this._FS.lchmod(e,r):this._FS.chmod(e,r)}catch(t){throw xt(t,e)}},r.prototype.chownSync=function(e,t,r,n){try{t?this._FS.lchown(e,r,n):this._FS.chown(e,r,n)}catch(t){throw xt(t,e)}},r.prototype.symlinkSync=function(e,t,r){try{this._FS.symlink(e,t)}catch(e){throw xt(e)}},r.prototype.readlinkSync=function(e){try{return this._FS.readlink(e)}catch(t){throw xt(t,e)}},r.prototype.utimesSync=function(e,t,r){try{this._FS.utime(e,t.getTime(),r.getTime())}catch(t){throw xt(t,e)}},r.prototype.modeToFileType=function(e){if(this._FS.isDir(e))return h.DIRECTORY;if(this._FS.isFile(e))return h.FILE;if(this._FS.isLink(e))return h.SYMLINK;throw f.EPERM("Invalid mode: "+e)},r}(Z);Pt.Name="EmscriptenFileSystem",Pt.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var Ct=function(e){function t(t,r){e.call(this),this._folder=t,this._wrapped=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,r){r(null,new t(e.folder,e.wrapped))},t.isAvailable=function(){return!0},t.prototype.initialize=function(e){var t=this;this._wrapped.exists(this._folder,(function(r){r?e():t._wrapped.isReadOnly()?e(f.ENOENT(t._folder)):t._wrapped.mkdir(t._folder,511,e)}))},t.prototype.getName=function(){return this._wrapped.getName()},t.prototype.isReadOnly=function(){return this._wrapped.isReadOnly()},t.prototype.supportsProps=function(){return this._wrapped.supportsProps()},t.prototype.supportsSynch=function(){return this._wrapped.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t}(X);function Ot(e,t){if(null!==t&&"object"==typeof t){var r=t,n=r.path;n&&(n="/"+c.relative(e,n),r.message=r.message.replace(r.path,n),r.path=n)}return t}function Rt(e,t){return"function"==typeof t?function(r){arguments.length>0&&(arguments[0]=Ot(e,r)),t.apply(null,arguments)}:t}function Dt(e,t,r){return"Sync"!==e.slice(e.length-4)?function(){return arguments.length>0&&(t&&(arguments[0]=c.join(this._folder,arguments[0])),r&&(arguments[1]=c.join(this._folder,arguments[1])),arguments[arguments.length-1]=Rt(this._folder,arguments[arguments.length-1])),this._wrapped[e].apply(this._wrapped,arguments)}:function(){try{return t&&(arguments[0]=c.join(this._folder,arguments[0])),r&&(arguments[1]=c.join(this._folder,arguments[1])),this._wrapped[e].apply(this._wrapped,arguments)}catch(e){throw Ot(this._folder,e)}}}Ct.Name="FolderAdapter",Ct.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}},["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach((function(e){Ct.prototype[e]=Dt(e,!0,!1)})),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach((function(e){Ct.prototype[e]=Dt(e,!0,!0)}));var It="undefined"!=typeof window?window:"undefined"!=typeof self?self:n;var Nt=It.webkitRequestFileSystem||It.requestFileSystem||null;function Mt(e,t,r){switch(e.name){case"PathExistsError":return f.EEXIST(t);case"QuotaExceededError":return f.FileError(a.ENOSPC,t);case"NotFoundError":return f.ENOENT(t);case"SecurityError":return f.FileError(a.EACCES,t);case"InvalidModificationError":return f.FileError(a.EPERM,t);case"TypeMismatchError":return f.FileError(r?a.ENOTDIR:a.EISDIR,t);default:return f.FileError(a.EINVAL,t)}}var Bt=function(e){function t(t,r,n,i,o,a){e.call(this,t,n,i,o,a),this._entry=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var t=this;if(!this.isDirty())return e();this._entry.createWriter((function(r){var n=t.getBuffer(),i=new Blob([D(n)]),o=i.size;r.onwriteend=function(n){r.onwriteend=null,r.onerror=null,r.truncate(o),t.resetDirty(),e()},r.onerror=function(r){e(Mt(r,t.getPath(),!1))},r.write(i)}))},t.prototype.close=function(e){this.sync(e)},t}(K),Ut=function(e){function t(r,n,i){void 0===r&&(r=5),void 0===n&&(n=It.PERSISTENT),void 0===i&&(i=!0),e.call(this),this.size=1048576*r,this.type=n,T(i,t.Name,{size:r,type:n})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,r){var n=new t(e.size,e.type,!1);n.allocate((function(e){return e?r(e):r(null,n)}),!1)},t.isAvailable=function(){return!!Nt},t.prototype.getName=function(){return t.Name},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSymlinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!1},t.prototype.allocate=function(e,t){var r=this;void 0===e&&(e=function(){}),void 0===t&&(t=!0),t&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var n=function(t){r.fs=t,e()},i=function(t){e(Mt(t,"/",!0))};this.type===It.PERSISTENT?function(e,t,r,n){if(void 0!==navigator.webkitPersistentStorage)switch(e){case It.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(t,r,n);break;case It.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(t,r,n);break;default:n(new TypeError("Invalid storage type: "+e))}else It.webkitStorageInfo.requestQuota(e,t,r,n)}(this.type,this.size,(function(e){Nt(r.type,e,n,i)}),i):Nt(this.type,this.size,n,i)},t.prototype.empty=function(e){this._readdir("/",(function(t,r){if(t)console.error("Failed to empty FS"),e(t);else{bt(r,(function(e,t){var r=function(){t()},n=function(r){t(Mt(r,e.fullPath,!e.isDirectory))};!function(e){return e.isDirectory}(e)?e.remove(r,n):e.removeRecursively(r,n)}),(function(r){t?(console.error("Failed to empty FS"),e(t)):e()}))}}))},t.prototype.rename=function(e,t,r){var n=this,i=2,o=0,s=this.fs.root,u=e,l=function(e){--i<=0&&r(Mt(e,u,!1))},d=function(i){return 2==++o?r(new f(a.EINVAL,"Something was identified as both a file and a directory. This should never happen.")):e===t?r():(u=c.dirname(t),void s.getDirectory(u,{},(function(o){u=c.basename(t),i.moveTo(o,u,(function(e){r()}),(function(o){i.isDirectory?(u=t,n.unlink(t,(function(i){i?l(o):n.rename(e,t,r)}))):l(o)}))}),l))};s.getFile(e,{},d,l),s.getDirectory(e,{},d,l)},t.prototype.stat=function(e,t,r){var n=this,i={create:!1},o=function(e){var t=new m(h.DIRECTORY,4096);r(null,t)},a=function(t){r(Mt(t,e,!1))};this.fs.root.getFile(e,i,(function(e){e.file((function(e){var t=new m(h.FILE,e.size);r(null,t)}),a)}),(function(){n.fs.root.getDirectory(e,i,o,a)}))},t.prototype.open=function(e,t,r,n){var i=this,o=function(r){"InvalidModificationError"===r.name&&t.isExclusive()?n(f.EEXIST(e)):n(Mt(r,e,!1))};this.fs.root.getFile(e,{create:t.pathNotExistsAction()===l.CREATE_FILE,exclusive:t.isExclusive()},(function(r){r.file((function(a){var s=new FileReader;s.onloadend=function(o){var c=i._makeFile(e,r,t,a,s.result);n(null,c)},s.onerror=function(e){o(s.error)},s.readAsArrayBuffer(a)}),o)}),o)},t.prototype.unlink=function(e,t){this._remove(e,t,!0)},t.prototype.rmdir=function(e,t){var r=this;this.readdir(e,(function(n,i){n?t(n):i.length>0?t(f.ENOTEMPTY(e)):r._remove(e,t,!1)}))},t.prototype.mkdir=function(e,t,r){this.fs.root.getDirectory(e,{create:!0,exclusive:!0},(function(e){r()}),(function(t){r(Mt(t,e,!0))}))},t.prototype.readdir=function(e,t){this._readdir(e,(function(e,r){if(!r)return t(e);for(var n=[],i=0,o=r;i<o.length;i+=1){var a=o[i];n.push(a.name)}t(null,n)}))},t.prototype._makeFile=function(e,t,r,n,i){void 0===i&&(i=new ArrayBuffer(0));var o=new m(h.FILE,n.size),a=B(i);return new Bt(this,t,e,r,o,a)},t.prototype._readdir=function(e,t){var r=function(r){t(Mt(r,e,!0))};this.fs.root.getDirectory(e,{create:!1},(function(e){var n=e.createReader(),i=[],o=function(){n.readEntries((function(e){e.length?(i=i.concat(function(e){return Array.prototype.slice.call(e||[],0)}(e)),o()):t(null,i)}),r)};o()}),r)},t.prototype._remove=function(e,t,r){var n=function(n){n.remove((function(){t()}),(function(n){t(Mt(n,e,!r))}))},i=function(n){t(Mt(n,e,!r))},o={create:!1};r?this.fs.root.getFile(e,o,n,i):this.fs.root.getDirectory(e,o,n,i)},t}(X);Ut.Name="HTML5FS",Ut.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var Ht=function(e,t,r,n,i,o){this.id=e,this.size=t,this.mode=r,this.atime=n,this.mtime=i,this.ctime=o};Ht.fromBuffer=function(e){if(void 0===e)throw new Error("NO");return new Ht(e.toString("ascii",30),e.readUInt32LE(0),e.readUInt16LE(4),e.readDoubleLE(6),e.readDoubleLE(14),e.readDoubleLE(22))},Ht.prototype.toStats=function(){return new m((61440&this.mode)===h.DIRECTORY?h.DIRECTORY:h.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},Ht.prototype.getSize=function(){return 30+this.id.length},Ht.prototype.toBuffer=function(t){return void 0===t&&(t=e.alloc(this.getSize())),t.writeUInt32LE(this.size,0),t.writeUInt16LE(this.mode,4),t.writeDoubleLE(this.atime,6),t.writeDoubleLE(this.mtime,14),t.writeDoubleLE(this.ctime,22),t.write(this.id,30,this.id.length,"ascii"),t},Ht.prototype.update=function(e){var t=!1;this.size!==e.size&&(this.size=e.size,t=!0),this.mode!==e.mode&&(this.mode=e.mode,t=!0);var r=e.atime.getTime();this.atime!==r&&(this.atime=r,t=!0);var n=e.mtime.getTime();this.mtime!==n&&(this.mtime=n,t=!0);var i=e.ctime.getTime();return this.ctime!==i&&(this.ctime=i,t=!0),t},Ht.prototype.isFile=function(){return(61440&this.mode)===h.FILE},Ht.prototype.isDirectory=function(){return(61440&this.mode)===h.DIRECTORY};var Gt="/",zt=null;function jt(){return zt||(zt=e.from("{}"))}function Wt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function qt(e,t){return!e||(t(e),!1)}function Vt(e,t,r){return!e||(t.abort((function(){r(e)})),!1)}var Yt=function(e){this.store=e,this.originalData={},this.modifiedKeys=[]};Yt.prototype.get=function(e){var t=this.store.get(e);return this.stashOldValue(e,t),t},Yt.prototype.put=function(e,t,r){return this.markModified(e),this.store.put(e,t,r)},Yt.prototype.del=function(e){this.markModified(e),this.store.del(e)},Yt.prototype.commit=function(){},Yt.prototype.abort=function(){for(var e=this,t=0,r=e.modifiedKeys;t<r.length;t+=1){var n=r[t],i=e.originalData[n];i?e.store.put(n,i,!0):e.store.del(n)}},Yt.prototype.stashOldValue=function(e,t){this.originalData.hasOwnProperty(e)||(this.originalData[e]=t)},Yt.prototype.markModified=function(e){-1===this.modifiedKeys.indexOf(e)&&(this.modifiedKeys.push(e),this.originalData.hasOwnProperty(e)||(this.originalData[e]=this.store.get(e)))};var Xt=function(e){function t(t,r,n,i,o){e.call(this,t,r,n,i,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},t.prototype.closeSync=function(){this.syncSync()},t}(K),Zt=function(t){function r(e){t.call(this),this.store=e.store,this.makeRootDirectory()}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.isAvailable=function(){return!0},r.prototype.getName=function(){return this.store.name()},r.prototype.isReadOnly=function(){return!1},r.prototype.supportsSymlinks=function(){return!1},r.prototype.supportsProps=function(){return!1},r.prototype.supportsSynch=function(){return!0},r.prototype.empty=function(){this.store.clear(),this.makeRootDirectory()},r.prototype.renameSync=function(t,r){var n=this.store.beginTransaction("readwrite"),i=c.dirname(t),o=c.basename(t),s=c.dirname(r),u=c.basename(r),l=this.findINode(n,i),d=this.getDirListing(n,i,l);if(!d[o])throw f.ENOENT(t);var h,p,m=d[o];if(delete d[o],0===(s+"/").indexOf(t+"/"))throw new f(a.EBUSY,i);if(s===i?(h=l,p=d):(h=this.findINode(n,s),p=this.getDirListing(n,s,h)),p[u]){var _=this.getINode(n,r,p[u]);if(!_.isFile())throw f.EPERM(r);try{n.del(_.id),n.del(p[u])}catch(e){throw n.abort(),e}}p[u]=m;try{n.put(l.id,e.from(JSON.stringify(d)),!0),n.put(h.id,e.from(JSON.stringify(p)),!0)}catch(e){throw n.abort(),e}n.commit()},r.prototype.statSync=function(e,t){return this.findINode(this.store.beginTransaction("readonly"),e).toStats()},r.prototype.createFileSync=function(e,t,r){var n=this.store.beginTransaction("readwrite"),i=G(),o=this.commitNewFile(n,e,h.FILE,r,i);return new Xt(this,e,t,o.toStats(),i)},r.prototype.openFileSync=function(e,t){var r=this.store.beginTransaction("readonly"),n=this.findINode(r,e),i=r.get(n.id);if(void 0===i)throw f.ENOENT(e);return new Xt(this,e,t,n.toStats(),i)},r.prototype.unlinkSync=function(e){this.removeEntry(e,!1)},r.prototype.rmdirSync=function(e){if(this.readdirSync(e).length>0)throw f.ENOTEMPTY(e);this.removeEntry(e,!0)},r.prototype.mkdirSync=function(t,r){var n=this.store.beginTransaction("readwrite"),i=e.from("{}");this.commitNewFile(n,t,h.DIRECTORY,r,i)},r.prototype.readdirSync=function(e){var t=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(t,e,this.findINode(t,e)))},r.prototype._syncSync=function(e,t,r){var n=this.store.beginTransaction("readwrite"),i=this._findINode(n,c.dirname(e),c.basename(e)),o=this.getINode(n,e,i),a=o.update(r);try{n.put(o.id,t,!0),a&&n.put(i,o.toBuffer(),!0)}catch(e){throw n.abort(),e}n.commit()},r.prototype.makeRootDirectory=function(){var e=this.store.beginTransaction("readwrite");if(void 0===e.get(Gt)){var t=(new Date).getTime(),r=new Ht(Wt(),4096,511|h.DIRECTORY,t,t,t);e.put(r.id,jt(),!1),e.put(Gt,r.toBuffer(),!1),e.commit()}},r.prototype._findINode=function(e,t,r){var n=this,i=function(i){var o=n.getDirListing(e,t,i);if(o[r])return o[r];throw f.ENOENT(c.resolve(t,r))};return"/"===t?""===r?Gt:i(this.getINode(e,t,Gt)):i(this.getINode(e,t+c.sep+r,this._findINode(e,c.dirname(t),c.basename(t))))},r.prototype.findINode=function(e,t){return this.getINode(e,t,this._findINode(e,c.dirname(t),c.basename(t)))},r.prototype.getINode=function(e,t,r){var n=e.get(r);if(void 0===n)throw f.ENOENT(t);return Ht.fromBuffer(n)},r.prototype.getDirListing=function(e,t,r){if(!r.isDirectory())throw f.ENOTDIR(t);var n=e.get(r.id);if(void 0===n)throw f.ENOENT(t);return JSON.parse(n.toString())},r.prototype.addNewNode=function(e,t){for(var r;;)try{return r=Wt(),e.put(r,t,!1),r}catch(e){}throw new f(a.EIO,"Unable to commit data to key-value store.")},r.prototype.commitNewFile=function(t,r,n,i,o){var a,s=c.dirname(r),u=c.basename(r),l=this.findINode(t,s),d=this.getDirListing(t,s,l),h=(new Date).getTime();if("/"===r)throw f.EEXIST(r);if(d[u])throw f.EEXIST(r);try{var p=this.addNewNode(t,o);a=new Ht(p,o.length,i|n,h,h,h);var m=this.addNewNode(t,a.toBuffer());d[u]=m,t.put(l.id,e.from(JSON.stringify(d)),!0)}catch(e){throw t.abort(),e}return t.commit(),a},r.prototype.removeEntry=function(t,r){var n=this.store.beginTransaction("readwrite"),i=c.dirname(t),o=this.findINode(n,i),a=this.getDirListing(n,i,o),s=c.basename(t);if(!a[s])throw f.ENOENT(t);var u=a[s];delete a[s];var l=this.getINode(n,t,u);if(!r&&l.isDirectory())throw f.EISDIR(t);if(r&&!l.isDirectory())throw f.ENOTDIR(t);try{n.del(l.id),n.del(u),n.put(o.id,e.from(JSON.stringify(a)),!0)}catch(e){throw n.abort(),e}n.commit()},r}(Z),Jt=function(e){function t(t,r,n,i,o){e.call(this,t,r,n,i,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var t=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),(function(r){r||t.resetDirty(),e(r)})):e()},t.prototype.close=function(e){this.sync(e)},t}(K),Kt=function(t){function r(){t.apply(this,arguments)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.isAvailable=function(){return!0},r.prototype.init=function(e,t){this.store=e,this.makeRootDirectory(t)},r.prototype.getName=function(){return this.store.name()},r.prototype.isReadOnly=function(){return!1},r.prototype.supportsSymlinks=function(){return!1},r.prototype.supportsProps=function(){return!1},r.prototype.supportsSynch=function(){return!1},r.prototype.empty=function(e){var t=this;this.store.clear((function(r){qt(r,e)&&t.makeRootDirectory(e)}))},r.prototype.rename=function(t,r,n){var i=this,o=this.store.beginTransaction("readwrite"),s=c.dirname(t),u=c.basename(t),l=c.dirname(r),d=c.basename(r),h={},p={},m=!1;if(0===(l+"/").indexOf(t+"/"))return n(new f(a.EBUSY,s));var _=function(a){i.findINodeAndDirListing(o,a,(function(c,_,g){c?m||(m=!0,o.abort((function(){n(c)}))):(h[a]=_,p[a]=g,function(){if(!m&&p.hasOwnProperty(s)&&p.hasOwnProperty(l)){var a=p[s],c=h[s],_=p[l],g=h[l];if(a[u]){var y=a[u];delete a[u];var v=function(){_[d]=y,o.put(c.id,e.from(JSON.stringify(a)),!0,(function(t){Vt(t,o,n)&&(s===l?o.commit(n):o.put(g.id,e.from(JSON.stringify(_)),!0,(function(e){Vt(e,o,n)&&o.commit(n)})))}))};_[d]?i.getINode(o,r,_[d],(function(e,t){Vt(e,o,n)&&(t.isFile()?o.del(t.id,(function(e){Vt(e,o,n)&&o.del(_[d],(function(e){Vt(e,o,n)&&v()}))})):o.abort((function(e){n(f.EPERM(r))})))})):v()}else n(f.ENOENT(t))}}())}))};_(s),s!==l&&_(l)},r.prototype.stat=function(e,t,r){var n=this.store.beginTransaction("readonly");this.findINode(n,e,(function(e,t){qt(e,r)&&r(null,t.toStats())}))},r.prototype.createFile=function(e,t,r,n){console.log({p:e,flag:t,mode:r,cb:n});var i=this,o=this.store.beginTransaction("readwrite"),a=G();this.commitNewFile(o,e,h.FILE,r,a,(function(r,o){qt(r,n)&&n(null,new Jt(i,e,t,o.toStats(),a))}))},r.prototype.openFile=function(e,t,r){var n=this,i=this.store.beginTransaction("readonly");this.findINode(i,e,(function(o,a){qt(o,r)&&i.get(a.id,(function(i,o){qt(i,r)&&(void 0===o?r(f.ENOENT(e)):r(null,new Jt(n,e,t,a.toStats(),o)))}))}))},r.prototype.unlink=function(e,t){this.removeEntry(e,!1,t)},r.prototype.rmdir=function(e,t){var r=this;this.readdir(e,(function(n,i){n?t(n):i.length>0?t(f.ENOTEMPTY(e)):r.removeEntry(e,!0,t)}))},r.prototype.mkdir=function(t,r,n){var i=this.store.beginTransaction("readwrite"),o=e.from("{}");this.commitNewFile(i,t,h.DIRECTORY,r,o,n)},r.prototype.readdir=function(e,t){var r=this,n=this.store.beginTransaction("readonly");this.findINode(n,e,(function(i,o){qt(i,t)&&r.getDirListing(n,e,o,(function(e,r){qt(e,t)&&t(null,Object.keys(r))}))}))},r.prototype._sync=function(e,t,r,n){var i=this,o=this.store.beginTransaction("readwrite");this._findINode(o,c.dirname(e),c.basename(e),(function(a,s){Vt(a,o,n)&&i.getINode(o,e,s,(function(e,i){if(Vt(e,o,n)){var a=i.update(r);o.put(i.id,t,!0,(function(e){Vt(e,o,n)&&(a?o.put(s,i.toBuffer(),!0,(function(e){Vt(e,o,n)&&o.commit(n)})):o.commit(n))}))}}))}))},r.prototype.makeRootDirectory=function(e){var t=this.store.beginTransaction("readwrite");t.get(Gt,(function(r,n){if(r||void 0===n){var i=(new Date).getTime(),o=new Ht(Wt(),4096,511|h.DIRECTORY,i,i,i);t.put(o.id,jt(),!1,(function(r){Vt(r,t,e)&&t.put(Gt,o.toBuffer(),!1,(function(r){r?t.abort((function(){e(r)})):t.commit(e)}))}))}else t.commit(e)}))},r.prototype._findINode=function(e,t,r,n){var i=this,o=function(e,i,o){e?n(e):o[r]?n(null,o[r]):n(f.ENOENT(c.resolve(t,r)))};"/"===t?""===r?n(null,Gt):this.getINode(e,t,Gt,(function(r,a){qt(r,n)&&i.getDirListing(e,t,a,(function(e,t){o(e,0,t)}))})):this.findINodeAndDirListing(e,t,o)},r.prototype.findINode=function(e,t,r){var n=this;this._findINode(e,c.dirname(t),c.basename(t),(function(i,o){qt(i,r)&&n.getINode(e,t,o,r)}))},r.prototype.getINode=function(e,t,r,n){e.get(r,(function(e,r){qt(e,n)&&(void 0===r?n(f.ENOENT(t)):n(null,Ht.fromBuffer(r)))}))},r.prototype.getDirListing=function(e,t,r,n){r.isDirectory()?e.get(r.id,(function(e,r){if(qt(e,n))try{n(null,JSON.parse(r.toString()))}catch(e){n(f.ENOENT(t))}})):n(f.ENOTDIR(t))},r.prototype.findINodeAndDirListing=function(e,t,r){var n=this;this.findINode(e,t,(function(i,o){qt(i,r)&&n.getDirListing(e,t,o,(function(e,t){qt(e,r)&&r(null,o,t)}))}))},r.prototype.addNewNode=function(e,t,r){var n,i=0,o=function(){5==++i?r(new f(a.EIO,"Unable to commit data to key-value store.")):(n=Wt(),e.put(n,t,!1,(function(e,t){e||!t?o():r(null,n)})))};o()},r.prototype.commitNewFile=function(t,r,n,i,o,a){var s=this,u=c.dirname(r),l=c.basename(r),d=(new Date).getTime();if("/"===r)return a(f.EEXIST(r));this.findINodeAndDirListing(t,u,(function(c,u,h){Vt(c,t,a)&&(h[l]?t.abort((function(){a(f.EEXIST(r))})):s.addNewNode(t,o,(function(r,c){if(Vt(r,t,a)){var f=new Ht(c,o.length,i|n,d,d,d);s.addNewNode(t,f.toBuffer(),(function(r,n){Vt(r,t,a)&&(h[l]=n,t.put(u.id,e.from(JSON.stringify(h)),!0,(function(e){Vt(e,t,a)&&t.commit((function(e){Vt(e,t,a)&&a(null,f)}))})))}))}})))}))},r.prototype.removeEntry=function(t,r,n){var i=this,o=this.store.beginTransaction("readwrite"),a=c.dirname(t),s=c.basename(t);this.findINodeAndDirListing(o,a,(function(a,c,u){if(Vt(a,o,n))if(u[s]){var l=u[s];delete u[s],i.getINode(o,t,l,(function(i,a){Vt(i,o,n)&&(!r&&a.isDirectory()?o.abort((function(){n(f.EISDIR(t))})):r&&!a.isDirectory()?o.abort((function(){n(f.ENOTDIR(t))})):o.del(a.id,(function(t){Vt(t,o,n)&&o.del(l,(function(t){Vt(t,o,n)&&o.put(c.id,e.from(JSON.stringify(u)),!0,(function(e){Vt(e,o,n)&&o.commit(n)}))}))})))}))}else o.abort((function(){n(f.ENOENT(t))}))}))},r}(X),$t=function(){this.store={}};$t.prototype.name=function(){return Qt.Name},$t.prototype.clear=function(){this.store={}},$t.prototype.beginTransaction=function(e){return new Yt(this)},$t.prototype.get=function(e){return this.store[e]},$t.prototype.put=function(e,t,r){return!(!r&&this.store.hasOwnProperty(e))&&(this.store[e]=t,!0)},$t.prototype.del=function(e){delete this.store[e]};var Qt=function(e){function t(){e.call(this,{store:new $t})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,r){r(null,new t)},t}(Zt);Qt.Name="InMemory",Qt.Options={};var er=It.indexedDB||It.mozIndexedDB||It.webkitIndexedDB||It.msIndexedDB;function tr(e,t){switch(void 0===t&&(t=e.toString()),e.name){case"NotFoundError":return new f(a.ENOENT,t);case"QuotaExceededError":return new f(a.ENOSPC,t);default:return new f(a.EIO,t)}}function rr(e,t,r){return void 0===t&&(t=a.EIO),void 0===r&&(r=null),function(n){n.preventDefault(),e(new f(t,null!==r?r:void 0))}}var nr=function(e,t){this.tx=e,this.store=t};nr.prototype.get=function(e,t){try{var r=this.store.get(e);r.onerror=rr(t),r.onsuccess=function(e){var r=e.target.result;t(null,void 0===r?r:B(r))}}catch(e){t(tr(e))}};var ir=function(e){function t(t,r){e.call(this,t,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.put=function(e,t,r,n){try{var i,o=D(t);(i=r?this.store.put(o,e):this.store.add(o,e)).onerror=rr(n),i.onsuccess=function(e){n(null,!0)}}catch(e){n(tr(e))}},t.prototype.del=function(e,t){try{var r=this.store.delete(e);r.onerror=rr(t),r.onsuccess=function(e){t()}}catch(e){t(tr(e))}},t.prototype.commit=function(e){setTimeout(e,0)},t.prototype.abort=function(e){var t=null;try{this.tx.abort()}catch(e){t=tr(e)}finally{e(t)}},t}(nr),or=function(e,t){var r=this;void 0===t&&(t="browserfs"),this.storeName=t;var n=er.open(this.storeName,1);n.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains(r.storeName)&&t.deleteObjectStore(r.storeName),t.createObjectStore(r.storeName)},n.onsuccess=function(t){r.db=t.target.result,e(null,r)},n.onerror=rr(e,a.EACCES)};or.prototype.name=function(){return ar.Name+" - "+this.storeName},or.prototype.clear=function(e){try{var t=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).clear();t.onsuccess=function(t){setTimeout(e,0)},t.onerror=rr(e)}catch(t){e(tr(t))}},or.prototype.beginTransaction=function(e){void 0===e&&(e="readonly");var t=this.db.transaction(this.storeName,e),r=t.objectStore(this.storeName);if("readwrite"===e)return new ir(t,r);if("readonly"===e)return new nr(t,r);throw new f(a.EINVAL,"Invalid transaction type.")};var ar=function(e){function t(r,n,i){var o=this;void 0===i&&(i=!0),e.call(this),this.store=new or((function(e){e?r(e):o.init(o.store,(function(e){r(e,o)}))}),n),T(i,t.Name,{storeName:n})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,r){new t(r,e.storeName,!1)},t.isAvailable=function(){try{return void 0!==er&&null!==er.open("__browserfs_test__")}catch(e){return!1}},t}(Kt);ar.Name="IndexedDB",ar.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var sr,cr=!1;try{It.localStorage.setItem("__test__",String.fromCharCode(55296)),cr=It.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch(e){cr=!1}sr=cr?"binary_string":"binary_string_ie",e.isEncoding(sr)||(sr="base64");var ur=function(){};ur.prototype.name=function(){return lr.Name},ur.prototype.clear=function(){It.localStorage.clear()},ur.prototype.beginTransaction=function(e){return new Yt(this)},ur.prototype.get=function(t){try{var r=It.localStorage.getItem(t);if(null!==r)return e.from(r,sr)}catch(e){}},ur.prototype.put=function(e,t,r){try{return!(!r&&null!==It.localStorage.getItem(e))&&(It.localStorage.setItem(e,t.toString(sr)),!0)}catch(e){throw new f(a.ENOSPC,"LocalStorage is full.")}},ur.prototype.del=function(e){try{It.localStorage.removeItem(e)}catch(t){throw new f(a.EIO,"Unable to delete key "+e+": "+t)}};var lr=function(e){function t(){e.call(this,{store:new ur})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,r){r(null,new t)},t.isAvailable=function(){return void 0!==It.localStorage},t}(Zt);lr.Name="LocalStorage",lr.Options={};var fr=function(e){function t(){e.call(this),this.mountList=[],this.mntMap={},this.rootFs=new Qt}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,r){var n=new t;Object.keys(e).forEach((function(t){n.mount(t,e[t])})),r(null,n)},t.isAvailable=function(){return!0},t.prototype.mount=function(e,t){if("/"!==e[0]&&(e="/"+e),e=c.resolve(e),this.mntMap[e])throw new f(a.EINVAL,"Mount point "+e+" is already taken.");R(e,511,this.rootFs),this.mntMap[e]=t,this.mountList.push(e),this.mountList=this.mountList.sort((function(e,t){return t.length-e.length}))},t.prototype.umount=function(e){if("/"!==e[0]&&(e="/"+e),e=c.resolve(e),!this.mntMap[e])throw new f(a.EINVAL,"Mount point "+e+" is already unmounted.");for(delete this.mntMap[e],this.mountList.splice(this.mountList.indexOf(e),1);"/"!==e&&0===this.rootFs.readdirSync(e).length;)this.rootFs.rmdirSync(e),e=c.dirname(e)},t.prototype._getFs=function(e){for(var t=this.mountList,r=t.length,n=0;n<r;n++){var i=t[n];if(i.length<=e.length&&0===e.indexOf(i))return""===(e=e.substr(i.length>1?i.length:0))&&(e="/"),{fs:this.mntMap[i],path:e}}return{fs:this.rootFs,path:e}},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,t){t(0,0)},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.standardizeError=function(e,t,r){var n=e.message.indexOf(t);return-1!==n&&(e.message=e.message.substr(0,n)+r+e.message.substr(n+t.length),e.path=r),e},t.prototype.rename=function(e,t,r){var n=this,i=this._getFs(e),o=this._getFs(t);return i.fs===o.fs?i.fs.rename(i.path,o.path,(function(a){a&&n.standardizeError(n.standardizeError(a,i.path,e),o.path,t),r(a)})):k.readFile(e,(function(n,i){if(n)return r(n);k.writeFile(t,i,(function(t){if(t)return r(t);k.unlink(e,r)}))}))},t.prototype.renameSync=function(e,t){var r=this._getFs(e),n=this._getFs(t);if(r.fs===n.fs)try{return r.fs.renameSync(r.path,n.path)}catch(i){throw this.standardizeError(this.standardizeError(i,r.path,e),n.path,t),i}var i=k.readFileSync(e);return k.writeFileSync(t,i),k.unlinkSync(e)},t.prototype.readdirSync=function(e){var t=this._getFs(e),r=null;if(t.fs!==this.rootFs)try{r=this.rootFs.readdirSync(e)}catch(e){}try{var n=t.fs.readdirSync(t.path);return null===r?n:n.concat(r.filter((function(e){return-1===n.indexOf(e)})))}catch(n){if(null===r)throw this.standardizeError(n,t.path,e);return r}},t.prototype.readdir=function(e,t){var r=this,n=this._getFs(e);n.fs.readdir(n.path,(function(i,o){if(n.fs!==r.rootFs)try{var a=r.rootFs.readdirSync(e);o=o?o.concat(a.filter((function(e){return-1===o.indexOf(e)}))):a}catch(o){if(i)return t(r.standardizeError(i,n.path,e))}else if(i)return t(r.standardizeError(i,n.path,e));t(null,o)}))},t.prototype.rmdirSync=function(e){var t=this._getFs(e);if(this._containsMountPt(e))throw f.ENOTEMPTY(e);try{t.fs.rmdirSync(t.path)}catch(r){throw this.standardizeError(r,t.path,e)}},t.prototype.rmdir=function(e,t){var r=this,n=this._getFs(e);this._containsMountPt(e)?t(f.ENOTEMPTY(e)):n.fs.rmdir(n.path,(function(i){t(i?r.standardizeError(i,n.path,e):null)}))},t.prototype._containsMountPt=function(e){for(var t=this.mountList,r=t.length,n=0;n<r;n++){var i=t[n];if(i.length>=e.length&&i.slice(0,e.length)===e)return!0}return!1},t}(X);function dr(e,t,r){return t?function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=t[0],i=this._getFs(n);t[0]=i.path;try{return i.fs[e].apply(i.fs,t)}catch(e){throw this.standardizeError(e,i.path,n),e}}:function(){for(var t=this,r=[],n=arguments.length;n--;)r[n]=arguments[n];var i=r[0],o=this._getFs(i);if(r[0]=o.path,"function"==typeof r[r.length-1]){var a=r[r.length-1];r[r.length-1]=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];e.length>0&&e[0]instanceof f&&t.standardizeError(e[0],o.path,i),a.apply(null,e)}}return o.fs[e].apply(o.fs,r)}}fr.Name="MountableFileSystem",fr.Options={};for(var hr,pr=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],mr=0;mr<pr.length;mr++)for(var _r=0,gr=pr[mr];_r<gr.length;_r+=1){var yr=gr[_r];fr.prototype[yr]=dr(yr,!1),fr.prototype[yr+"Sync"]=dr(yr+"Sync",!0)}if("undefined"!=typeof setImmediate)hr=setImmediate;else{var vr=It,Er=[],wr="zero-timeout-message";if(function(){if(void 0!==vr.importScripts||!vr.postMessage)return!1;var e=!0,t=vr.onmessage;return vr.onmessage=function(){e=!1},vr.postMessage("","*"),vr.onmessage=t,e}()){hr=function(e){Er.push(e),vr.postMessage(wr,"*")};var Sr=function(e){if(e.source===self&&e.data===wr&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,Er.length>0))return Er.shift()()};vr.addEventListener?vr.addEventListener("message",Sr,!0):vr.attachEvent("onmessage",Sr)}else if(vr.MessageChannel){var br=new vr.MessageChannel;br.port1.onmessage=function(e){if(Er.length>0)return Er.shift()()},hr=function(e){Er.push(e),br.port2.postMessage("")}}else hr=function(e){return setTimeout(e,0)}}var Fr=hr,kr=function(){this._locked=!1,this._waiters=[]};kr.prototype.lock=function(e){this._locked?this._waiters.push(e):(this._locked=!0,e())},kr.prototype.unlock=function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var e=this._waiters.shift();e?Fr(e):this._locked=!1},kr.prototype.tryLock=function(){return!this._locked&&(this._locked=!0,!0)},kr.prototype.isLocked=function(){return this._locked};var Ar=function(e){this._fs=e,this._mu=new kr};Ar.prototype.getName=function(){return"LockedFS<"+this._fs.getName()+">"},Ar.prototype.getFSUnlocked=function(){return this._fs},Ar.prototype.initialize=function(e){this._fs.initialize(e)},Ar.prototype.diskSpace=function(e,t){this._fs.diskSpace(e,t)},Ar.prototype.isReadOnly=function(){return this._fs.isReadOnly()},Ar.prototype.supportsLinks=function(){return this._fs.supportsLinks()},Ar.prototype.supportsProps=function(){return this._fs.supportsProps()},Ar.prototype.supportsSynch=function(){return this._fs.supportsSynch()},Ar.prototype.rename=function(e,t,r){var n=this;this._mu.lock((function(){n._fs.rename(e,t,(function(e){n._mu.unlock(),r(e)}))}))},Ar.prototype.renameSync=function(e,t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(e,t)},Ar.prototype.stat=function(e,t,r){var n=this;this._mu.lock((function(){n._fs.stat(e,t,(function(e,t){n._mu.unlock(),r(e,t)}))}))},Ar.prototype.statSync=function(e,t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(e,t)},Ar.prototype.open=function(e,t,r,n){var i=this;this._mu.lock((function(){i._fs.open(e,t,r,(function(e,t){i._mu.unlock(),n(e,t)}))}))},Ar.prototype.openSync=function(e,t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(e,t,r)},Ar.prototype.unlink=function(e,t){var r=this;this._mu.lock((function(){r._fs.unlink(e,(function(e){r._mu.unlock(),t(e)}))}))},Ar.prototype.unlinkSync=function(e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(e)},Ar.prototype.rmdir=function(e,t){var r=this;this._mu.lock((function(){r._fs.rmdir(e,(function(e){r._mu.unlock(),t(e)}))}))},Ar.prototype.rmdirSync=function(e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(e)},Ar.prototype.mkdir=function(e,t,r){var n=this;this._mu.lock((function(){n._fs.mkdir(e,t,(function(e){n._mu.unlock(),r(e)}))}))},Ar.prototype.mkdirSync=function(e,t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(e,t)},Ar.prototype.readdir=function(e,t){var r=this;this._mu.lock((function(){r._fs.readdir(e,(function(e,n){r._mu.unlock(),t(e,n)}))}))},Ar.prototype.readdirSync=function(e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(e)},Ar.prototype.exists=function(e,t){var r=this;this._mu.lock((function(){r._fs.exists(e,(function(e){r._mu.unlock(),t(e)}))}))},Ar.prototype.existsSync=function(e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(e)},Ar.prototype.realpath=function(e,t,r){var n=this;this._mu.lock((function(){n._fs.realpath(e,t,(function(e,t){n._mu.unlock(),r(e,t)}))}))},Ar.prototype.realpathSync=function(e,t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(e,t)},Ar.prototype.truncate=function(e,t,r){var n=this;this._mu.lock((function(){n._fs.truncate(e,t,(function(e){n._mu.unlock(),r(e)}))}))},Ar.prototype.truncateSync=function(e,t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(e,t)},Ar.prototype.readFile=function(e,t,r,n){var i=this;this._mu.lock((function(){i._fs.readFile(e,t,r,(function(e,t){i._mu.unlock(),n(e,t)}))}))},Ar.prototype.readFileSync=function(e,t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(e,t,r)},Ar.prototype.writeFile=function(e,t,r,n,i,o){var a=this;this._mu.lock((function(){a._fs.writeFile(e,t,r,n,i,(function(e){a._mu.unlock(),o(e)}))}))},Ar.prototype.writeFileSync=function(e,t,r,n,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(e,t,r,n,i)},Ar.prototype.appendFile=function(e,t,r,n,i,o){var a=this;this._mu.lock((function(){a._fs.appendFile(e,t,r,n,i,(function(e){a._mu.unlock(),o(e)}))}))},Ar.prototype.appendFileSync=function(e,t,r,n,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(e,t,r,n,i)},Ar.prototype.chmod=function(e,t,r,n){var i=this;this._mu.lock((function(){i._fs.chmod(e,t,r,(function(e){i._mu.unlock(),n(e)}))}))},Ar.prototype.chmodSync=function(e,t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(e,t,r)},Ar.prototype.chown=function(e,t,r,n,i){var o=this;this._mu.lock((function(){o._fs.chown(e,t,r,n,(function(e){o._mu.unlock(),i(e)}))}))},Ar.prototype.chownSync=function(e,t,r,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(e,t,r,n)},Ar.prototype.utimes=function(e,t,r,n){var i=this;this._mu.lock((function(){i._fs.utimes(e,t,r,(function(e){i._mu.unlock(),n(e)}))}))},Ar.prototype.utimesSync=function(e,t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(e,t,r)},Ar.prototype.link=function(e,t,r){var n=this;this._mu.lock((function(){n._fs.link(e,t,(function(e){n._mu.unlock(),r(e)}))}))},Ar.prototype.linkSync=function(e,t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(e,t)},Ar.prototype.symlink=function(e,t,r,n){var i=this;this._mu.lock((function(){i._fs.symlink(e,t,r,(function(e){i._mu.unlock(),n(e)}))}))},Ar.prototype.symlinkSync=function(e,t,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(e,t,r)},Ar.prototype.readlink=function(e,t){var r=this;this._mu.lock((function(){r._fs.readlink(e,(function(e,n){r._mu.unlock(),t(e,n)}))}))},Ar.prototype.readlinkSync=function(e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(e)};var Lr="/.deletedFiles.log";function xr(e){return 146|e}function Tr(e){return p.getFileFlag(e)}var Pr,Cr=function(e){function t(t,r,n,i,o){e.call(this,t,r,n,i,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.sync=function(e){var t=this;this.isDirty()?this._fs._syncAsync(this,(function(r){t.resetDirty(),e(r)})):e(null)},t.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},t.prototype.close=function(e){this.sync(e)},t.prototype.closeSync=function(){this.syncSync()},t}(K),Or=function(e){function t(t,r){if(e.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=t,this._readable=r,this._writable.isReadOnly())throw new f(a.EINVAL,"Writable file system must be writable.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.isAvailable=function(){return!0},t.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},t.prototype._syncAsync=function(e,t){var r=this;this.createParentDirectoriesAsync(e.getPath(),(function(n){if(n)return t(n);r._writable.writeFile(e.getPath(),e.getBuffer(),null,Tr("w"),e.getStats().mode,t)}))},t.prototype._syncSync=function(e){this.createParentDirectories(e.getPath()),this._writable.writeFileSync(e.getPath(),e.getBuffer(),null,Tr("w"),e.getStats().mode)},t.prototype.getName=function(){return Rr.Name},t.prototype.initialize=function(e){var t=this,r=this._initializeCallbacks,n=function(e){t._isInitialized=!e,t._initializeCallbacks=[],r.forEach((function(t){return t(e)}))};if(this._isInitialized)return e();r.push(e),1===r.length&&this._writable.readFile(Lr,"utf8",Tr("r"),(function(e,r){if(e){if(e.errno!==a.ENOENT)return n(e)}else t._deleteLog=r;t._reparseDeletionLog(),n()}))},t.prototype.isReadOnly=function(){return!1},t.prototype.supportsSynch=function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},t.prototype.getDeletionLog=function(){return this._deleteLog},t.prototype.restoreDeletionLog=function(e){this._deleteLog=e,this._reparseDeletionLog(),this.updateLog("")},t.prototype.rename=function(e,t,r){var n=this;if(this.checkInitAsync(r)&&!this.checkPathAsync(e,r)&&!this.checkPathAsync(t,r))return e===Lr||t===Lr?r(f.EPERM("Cannot rename deletion log.")):e===t?r():void this.stat(e,!1,(function(i,o){return i?r(i):n.stat(t,!1,(function(i,s){var u=n;function l(n){var i=n.shift();if(!i)return r();var o=c.resolve(e,i),a=c.resolve(t,i);u.rename(o,a,(function(e){if(e)return r(e);l(n)}))}var d=511;if(o.isDirectory()){if(i)return i.errno!==a.ENOENT?r(i):n._writable.exists(e,(function(i){if(i)return n._writable.rename(e,t,r);n._writable.mkdir(t,d,(function(t){if(t)return r(t);n._readable.readdir(e,(function(e,t){if(e)return r();l(t)}))}))}));if(d=s.mode,!s.isDirectory())return r(f.ENOTDIR(t));n.readdir(t,(function(i,o){if(o&&o.length)return r(f.ENOTEMPTY(t));n._readable.readdir(e,(function(e,t){if(e)return r();l(t)}))}))}if(s&&s.isDirectory())return r(f.EISDIR(t));n.readFile(e,null,Tr("r"),(function(i,a){return i?r(i):n.writeFile(t,a,null,Tr("w"),o.mode,(function(t){return t?r(t):n.unlink(e,r)}))}))}))}))},t.prototype.renameSync=function(e,t){var r=this;if(this.checkInitialized(),this.checkPath(e),this.checkPath(t),e===Lr||t===Lr)throw f.EPERM("Cannot rename deletion log.");var n=this.statSync(e,!1);if(n.isDirectory()){if(e===t)return;var i=511;if(this.existsSync(t)){var o=this.statSync(t,!1);if(i=o.mode,!o.isDirectory())throw f.ENOTDIR(t);if(this.readdirSync(t).length>0)throw f.ENOTEMPTY(t)}this._writable.existsSync(e)?this._writable.renameSync(e,t):this._writable.existsSync(t)||this._writable.mkdirSync(t,i),this._readable.existsSync(e)&&this._readable.readdirSync(e).forEach((function(n){r.renameSync(c.resolve(e,n),c.resolve(t,n))}))}else{if(this.existsSync(t)&&this.statSync(t,!1).isDirectory())throw f.EISDIR(t);this.writeFileSync(t,this.readFileSync(e,null,Tr("r")),null,Tr("w"),n.mode)}e!==t&&this.existsSync(e)&&this.unlinkSync(e)},t.prototype.stat=function(e,t,r){var n=this;this.checkInitAsync(r)&&this._writable.stat(e,t,(function(i,o){i&&i.errno===a.ENOENT?(n._deletedFiles[e]&&r(f.ENOENT(e)),n._readable.stat(e,t,(function(e,t){t&&((t=t.clone()).mode=xr(t.mode)),r(e,t)}))):r(i,o)}))},t.prototype.statSync=function(e,t){this.checkInitialized();try{return this._writable.statSync(e,t)}catch(n){if(this._deletedFiles[e])throw f.ENOENT(e);var r=this._readable.statSync(e,t).clone();return r.mode=xr(r.mode),r}},t.prototype.open=function(e,t,r,n){var i=this;this.checkInitAsync(n)&&!this.checkPathAsync(e,n)&&this.stat(e,!1,(function(o,a){if(!a)return t.pathNotExistsAction()===l.CREATE_FILE?i.createParentDirectoriesAsync(e,(function(o){return o?n(o):i._writable.open(e,t,r,n)})):n(f.ENOENT(e));switch(t.pathExistsAction()){case l.TRUNCATE_FILE:return i.createParentDirectoriesAsync(e,(function(o){if(o)return n(o);i._writable.open(e,t,r,n)}));case l.NOP:return i._writable.exists(e,(function(o){o?i._writable.open(e,t,r,n):((a=a.clone()).mode=r,i._readable.readFile(e,null,Tr("r"),(function(r,o){if(r)return n(r);-1===a.size&&(a.size=o.length);var s=new Cr(i,e,t,a,o);n(null,s)})))}));default:return n(f.EEXIST(e))}}))},t.prototype.openSync=function(e,t,r){if(this.checkInitialized(),this.checkPath(e),e===Lr)throw f.EPERM("Cannot open deletion log.");if(!this.existsSync(e)){if(t.pathNotExistsAction()===l.CREATE_FILE)return this.createParentDirectories(e),this._writable.openSync(e,t,r);throw f.ENOENT(e)}switch(t.pathExistsAction()){case l.TRUNCATE_FILE:return this.createParentDirectories(e),this._writable.openSync(e,t,r);case l.NOP:if(this._writable.existsSync(e))return this._writable.openSync(e,t,r);var n=this._readable.readFileSync(e,null,Tr("r")),i=this._readable.statSync(e,!1).clone();return i.mode=r,new Cr(this,e,t,i,n);default:throw f.EEXIST(e)}},t.prototype.unlink=function(e,t){var r=this;this.checkInitAsync(t)&&!this.checkPathAsync(e,t)&&this.exists(e,(function(n){if(!n)return t(f.ENOENT(e));r._writable.exists(e,(function(n){if(n)return r._writable.unlink(e,(function(n){if(n)return t(n);r.exists(e,(function(n){n&&r.deletePath(e),t(null)}))}));r.deletePath(e),t(null)}))}))},t.prototype.unlinkSync=function(e){if(this.checkInitialized(),this.checkPath(e),!this.existsSync(e))throw f.ENOENT(e);this._writable.existsSync(e)&&this._writable.unlinkSync(e),this.existsSync(e)&&this.deletePath(e)},t.prototype.rmdir=function(e,t){var r=this;if(this.checkInitAsync(t)){var n=function(){r.readdir(e,(function(n,i){return n?t(n):i.length?t(f.ENOTEMPTY(e)):(r.deletePath(e),void t(null))}))};this.exists(e,(function(i){if(!i)return t(f.ENOENT(e));r._writable.exists(e,(function(i){i?r._writable.rmdir(e,(function(i){if(i)return t(i);r._readable.exists(e,(function(e){e?n():t()}))})):n()}))}))}},t.prototype.rmdirSync=function(e){if(this.checkInitialized(),!this.existsSync(e))throw f.ENOENT(e);if(this._writable.existsSync(e)&&this._writable.rmdirSync(e),this.existsSync(e)){if(this.readdirSync(e).length>0)throw f.ENOTEMPTY(e);this.deletePath(e)}},t.prototype.mkdir=function(e,t,r){var n=this;this.checkInitAsync(r)&&this.exists(e,(function(i){if(i)return r(f.EEXIST(e));n.createParentDirectoriesAsync(e,(function(i){if(i)return r(i);n._writable.mkdir(e,t,r)}))}))},t.prototype.mkdirSync=function(e,t){if(this.checkInitialized(),this.existsSync(e))throw f.EEXIST(e);this.createParentDirectories(e),this._writable.mkdirSync(e,t)},t.prototype.readdir=function(e,t){var r=this;this.checkInitAsync(t)&&this.stat(e,!1,(function(n,i){return n?t(n):i.isDirectory()?void r._writable.readdir(e,(function(n,i){if(n&&"ENOENT"!==n.code)return t(n);!n&&i||(i=[]),r._readable.readdir(e,(function(n,o){!n&&o||(o=[]);var a={},s=i.concat(o.filter((function(t){return!r._deletedFiles[e+"/"+t]}))).filter((function(e){var t=!a[e];return a[e]=!0,t}));t(null,s)}))})):t(f.ENOTDIR(e))}))},t.prototype.readdirSync=function(e){var t=this;if(this.checkInitialized(),!this.statSync(e,!1).isDirectory())throw f.ENOTDIR(e);var r=[];try{r=r.concat(this._writable.readdirSync(e))}catch(e){}try{r=r.concat(this._readable.readdirSync(e).filter((function(r){return!t._deletedFiles[e+"/"+r]})))}catch(e){}var n={};return r.filter((function(e){var t=!n[e];return n[e]=!0,t}))},t.prototype.exists=function(e,t){var r=this;this.checkInitialized(),this._writable.exists(e,(function(n){if(n)return t(!0);r._readable.exists(e,(function(n){t(n&&!0!==r._deletedFiles[e])}))}))},t.prototype.existsSync=function(e){return this.checkInitialized(),this._writable.existsSync(e)||this._readable.existsSync(e)&&!0!==this._deletedFiles[e]},t.prototype.chmod=function(e,t,r,n){var i=this;this.checkInitAsync(n)&&this.operateOnWritableAsync(e,(function(o){if(o)return n(o);i._writable.chmod(e,t,r,n)}))},t.prototype.chmodSync=function(e,t,r){var n=this;this.checkInitialized(),this.operateOnWritable(e,(function(){n._writable.chmodSync(e,t,r)}))},t.prototype.chown=function(e,t,r,n,i){var o=this;this.checkInitAsync(i)&&this.operateOnWritableAsync(e,(function(a){if(a)return i(a);o._writable.chown(e,t,r,n,i)}))},t.prototype.chownSync=function(e,t,r,n){var i=this;this.checkInitialized(),this.operateOnWritable(e,(function(){i._writable.chownSync(e,t,r,n)}))},t.prototype.utimes=function(e,t,r,n){var i=this;this.checkInitAsync(n)&&this.operateOnWritableAsync(e,(function(o){if(o)return n(o);i._writable.utimes(e,t,r,n)}))},t.prototype.utimesSync=function(e,t,r){var n=this;this.checkInitialized(),this.operateOnWritable(e,(function(){n._writable.utimesSync(e,t,r)}))},t.prototype.deletePath=function(e){this._deletedFiles[e]=!0,this.updateLog("d"+e+"\n")},t.prototype.updateLog=function(e){var t=this;this._deleteLog+=e,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(Lr,this._deleteLog,"utf8",p.getFileFlag("w"),420,(function(e){t._deleteLogUpdatePending=!1,e?t._deleteLogError=e:t._deleteLogUpdateNeeded&&(t._deleteLogUpdateNeeded=!1,t.updateLog(""))})))},t.prototype._reparseDeletionLog=function(){var e=this;this._deletedFiles={},this._deleteLog.split("\n").forEach((function(t){e._deletedFiles[t.slice(1)]="d"===t.slice(0,1)}))},t.prototype.checkInitialized=function(){if(!this._isInitialized)throw new f(a.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.");if(null!==this._deleteLogError){var e=this._deleteLogError;throw this._deleteLogError=null,e}},t.prototype.checkInitAsync=function(e){if(!this._isInitialized)return e(new f(a.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;if(null!==this._deleteLogError){var t=this._deleteLogError;return this._deleteLogError=null,e(t),!1}return!0},t.prototype.checkPath=function(e){if(e===Lr)throw f.EPERM(e)},t.prototype.checkPathAsync=function(e,t){return e===Lr&&(t(f.EPERM(e)),!0)},t.prototype.createParentDirectoriesAsync=function(e,t){var r=c.dirname(e),n=[],i=this;function o(){if(!n.length)return t();var e=n.pop();i._readable.stat(e,!1,(function(r,n){if(!n)return t();i._writable.mkdir(e,n.mode,(function(e){if(e)return t(e);o()}))}))}this._writable.stat(r,!1,(function e(t,a){t?(n.push(r),r=c.dirname(r),i._writable.stat(r,!1,e)):o()}))},t.prototype.createParentDirectories=function(e){for(var t=this,r=c.dirname(e),n=[];!this._writable.existsSync(r);)n.push(r),r=c.dirname(r);(n=n.reverse()).forEach((function(e){t._writable.mkdirSync(e,t.statSync(e,!1).mode)}))},t.prototype.operateOnWritable=function(e,t){if(!this.existsSync(e))throw f.ENOENT(e);this._writable.existsSync(e)||this.copyToWritable(e),t()},t.prototype.operateOnWritableAsync=function(e,t){var r=this;this.exists(e,(function(n){if(!n)return t(f.ENOENT(e));r._writable.exists(e,(function(n){if(!n)return r.copyToWritableAsync(e,t);t()}))}))},t.prototype.copyToWritable=function(e){var t=this.statSync(e,!1);t.isDirectory()?this._writable.mkdirSync(e,t.mode):this.writeFileSync(e,this._readable.readFileSync(e,null,Tr("r")),null,Tr("w"),this.statSync(e,!1).mode)},t.prototype.copyToWritableAsync=function(e,t){var r=this;this.stat(e,!1,(function(n,i){return n?t(n):i.isDirectory()?r._writable.mkdir(e,i.mode,t):void r._readable.readFile(e,null,Tr("r"),(function(n,o){if(n)return t(n);r.writeFile(e,o,null,Tr("w"),i.mode,t)}))}))},t}(X),Rr=function(e){function t(r,n,i){void 0===i&&(i=!0),e.call(this,new Or(r,n)),T(i,t.Name,{readable:"readable file system",writable:"writable file system"})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,r){try{var n=new t(e.writable,e.readable,!1);n.initialize((function(e){r(e,n)}),!1)}catch(e){r(e)}},t.isAvailable=function(){return Or.isAvailable()},t.prototype.initialize=function(t,r){void 0===r&&(r=!0),r&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),e.prototype.initialize.call(this,t)},t.prototype.getOverlayedFileSystems=function(){return e.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},t.prototype.unwrap=function(){return e.prototype.getFSUnlocked.call(this)},t}(Ar);Rr.Name="OverlayFS",Rr.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}},function(e){e[e.CB=0]="CB",e[e.FD=1]="FD",e[e.API_ERROR=2]="API_ERROR",e[e.STATS=3]="STATS",e[e.PROBE=4]="PROBE",e[e.FILEFLAG=5]="FILEFLAG",e[e.BUFFER=6]="BUFFER",e[e.ERROR=7]="ERROR"}(Pr||(Pr={}));var Dr=function(){this._callbacks={},this._nextId=0};Dr.prototype.toRemoteArg=function(e){var t=this._nextId++;return this._callbacks[t]=e,{type:Pr.CB,id:t}},Dr.prototype.toLocalArg=function(e){var t=this._callbacks[e];return delete this._callbacks[e],t};var Ir=function(){this._fileDescriptors={},this._nextId=0};function Nr(e){return{type:Pr.API_ERROR,errorData:Wr(e.writeToBuffer())}}function Mr(e){return f.fromBuffer(qr(e.errorData))}function Br(e){return{type:Pr.ERROR,name:e.name,message:e.message,stack:e.stack}}function Ur(e){var t=It[e.name];"function"!=typeof t&&(t=Error);var r=new t(e.message);return r.stack=e.stack,r}function Hr(e){return{type:Pr.STATS,statsData:Wr(e.toBuffer())}}function Gr(e){return m.fromBuffer(qr(e.statsData))}function zr(e){return{type:Pr.FILEFLAG,flagStr:e.getFlagString()}}function jr(e){return p.getFileFlag(e.flagStr)}function Wr(e){return D(e)}function qr(e){return B(e)}function Vr(e){return{type:Pr.BUFFER,data:Wr(e)}}function Yr(e){return qr(e.data)}Ir.prototype.toRemoteArg=function(t,r,n,i){var o,a,s=this._nextId++;this._fileDescriptors[s]=t,t.stat((function(c,u){c?i(c):(a=Wr(u.toBuffer()),n.isReadable()?t.read(e.alloc(u.size),0,u.size,0,(function(e,t,c){e?i(e):(o=Wr(c),i(null,{type:Pr.FD,id:s,data:o,stat:a,path:r,flag:n.getFlagString()}))})):i(null,{type:Pr.FD,id:s,data:new ArrayBuffer(0),stat:a,path:r,flag:n.getFlagString()}))}))},Ir.prototype.applyFdAPIRequest=function(e,t){var r=this,n=e.args[0];this._applyFdChanges(n,(function(i,o){i?t(i):o[e.method]((function(i){"close"===e.method&&delete r._fileDescriptors[n.id],t(i)}))}))},Ir.prototype._applyFdChanges=function(e,t){var r=this._fileDescriptors[e.id],n=qr(e.data),i=m.fromBuffer(qr(e.stat)),o=p.getFileFlag(e.flag);o.isWriteable()?r.write(n,0,n.length,o.isAppendable()?r.getPos():0,(function(e){function a(){r.stat((function(e,n){e?t(e):n.mode!==i.mode?r.chmod(i.mode,(function(e){t(e,r)})):t(e,r)}))}e?t(e):o.isAppendable()?a():r.truncate(n.length,(function(){a()}))})):t(null,r)};var Xr=function(e){function t(t,r,n,i,o,a){e.call(this,t,r,n,i,a),this._remoteFdId=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getRemoteFdId=function(){return this._remoteFdId},t.prototype.toRemoteArg=function(){return{type:Pr.FD,id:this._remoteFdId,data:Wr(this.getBuffer()),stat:Wr(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},t.prototype.sync=function(e){this._syncClose("sync",e)},t.prototype.close=function(e){this._syncClose("close",e)},t.prototype._syncClose=function(e,t){var r=this;this.isDirty()?this._fs.syncClose(e,this,(function(e){e||r.resetDirty(),t(e)})):t()},t}(K),Zr=function(t){function r(e,n){var i=this;void 0===n&&(n=!0),t.call(this),this._callbackConverter=new Dr,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=e,T(n,r.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",(function(e){var t,r=e.data;if((t=r)&&"object"==typeof t&&t.hasOwnProperty("browserfsMessage")&&t.browserfsMessage){var n,o=r.args,a=new Array(o.length);for(n=0;n<a.length;n++)a[n]=i._argRemote2Local(o[n]);i._callbackConverter.toLocalArg(r.cbId).apply(null,a)}}))}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.Create=function(e,t){var n=new r(e.worker,!1);n.initialize((function(){t(null,n)}))},r.isAvailable=function(){return"undefined"!=typeof importScripts||"undefined"!=typeof Worker},r.attachRemoteListener=function(t){var r=new Ir;function n(t,n,i){if("object"==typeof t)t instanceof m?i(null,Hr(t)):t instanceof f?i(null,Nr(t)):t instanceof J?i(null,r.toRemoteArg(t,n[0],n[1],i)):t instanceof p?i(null,zr(t)):t instanceof e?i(null,Vr(t)):t instanceof Error?i(null,Br(t)):i(null,t);else i(null,t)}function i(e,r){if(!e)return e;if("object"==typeof e){if("number"!=typeof e.type)return e;var i=e;switch(i.type){case Pr.CB:var o=e.id;return function(){var e,i,a=arguments,s=new Array(arguments.length),c=arguments.length;function u(e){c>0&&(c=-1,i={browserfsMessage:!0,cbId:o,args:[Nr(e)]},t.postMessage(i))}for(e=0;e<arguments.length;e++)!function(e,a){n(a,r,(function(r,n){s[e]=n,r?u(r):0==--c&&(i={browserfsMessage:!0,cbId:o,args:s},t.postMessage(i))}))}(e,a[e]);0===arguments.length&&(i={browserfsMessage:!0,cbId:o,args:s},t.postMessage(i))};case Pr.API_ERROR:return Mr(i);case Pr.STATS:return Gr(i);case Pr.FILEFLAG:return jr(i);case Pr.BUFFER:return Yr(i);case Pr.ERROR:return Ur(i);default:return e}}return e}t.addEventListener("message",(function(e){var n,o,a=e.data;if((o=a)&&"object"==typeof o&&o.hasOwnProperty("browserfsMessage")&&o.browserfsMessage){var s=a.args,c=new Array(s.length);switch(a.method){case"close":case"sync":n=s[1],r.applyFdAPIRequest(a,(function(e){var r={browserfsMessage:!0,cbId:n.id,args:e?[Nr(e)]:[]};t.postMessage(r)}));break;case"probe":!function(){var e=k.getRootFS(),r=s[1],n={type:Pr.PROBE,isReadOnly:e.isReadOnly(),supportsLinks:e.supportsLinks(),supportsProps:e.supportsProps()},i={browserfsMessage:!0,cbId:r.id,args:[n]};t.postMessage(i)}();break;default:for(var u=0;u<s.length;u++)c[u]=i(s[u],c);var l=k.getRootFS();l[a.method].apply(l,c)}}}))},r.prototype.getName=function(){return r.Name},r.prototype.initialize=function(e){var t=this;if(this._isInitialized)e();else{var r={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(G()),this._callbackConverter.toRemoteArg((function(r){t._isInitialized=!0,t._isReadOnly=r.isReadOnly,t._supportLinks=r.supportsLinks,t._supportProps=r.supportsProps,e()}))]};this._worker.postMessage(r)}},r.prototype.isReadOnly=function(){return this._isReadOnly},r.prototype.supportsSynch=function(){return!1},r.prototype.supportsLinks=function(){return this._supportLinks},r.prototype.supportsProps=function(){return this._supportProps},r.prototype.rename=function(e,t,r){this._rpc("rename",arguments)},r.prototype.stat=function(e,t,r){this._rpc("stat",arguments)},r.prototype.open=function(e,t,r,n){this._rpc("open",arguments)},r.prototype.unlink=function(e,t){this._rpc("unlink",arguments)},r.prototype.rmdir=function(e,t){this._rpc("rmdir",arguments)},r.prototype.mkdir=function(e,t,r){this._rpc("mkdir",arguments)},r.prototype.readdir=function(e,t){this._rpc("readdir",arguments)},r.prototype.exists=function(e,t){this._rpc("exists",arguments)},r.prototype.realpath=function(e,t,r){this._rpc("realpath",arguments)},r.prototype.truncate=function(e,t,r){this._rpc("truncate",arguments)},r.prototype.readFile=function(e,t,r,n){this._rpc("readFile",arguments)},r.prototype.writeFile=function(e,t,r,n,i,o){this._rpc("writeFile",arguments)},r.prototype.appendFile=function(e,t,r,n,i,o){this._rpc("appendFile",arguments)},r.prototype.chmod=function(e,t,r,n){this._rpc("chmod",arguments)},r.prototype.chown=function(e,t,r,n,i){this._rpc("chown",arguments)},r.prototype.utimes=function(e,t,r,n){this._rpc("utimes",arguments)},r.prototype.link=function(e,t,r){this._rpc("link",arguments)},r.prototype.symlink=function(e,t,r,n){this._rpc("symlink",arguments)},r.prototype.readlink=function(e,t){this._rpc("readlink",arguments)},r.prototype.syncClose=function(e,t,r){this._worker.postMessage({browserfsMessage:!0,method:e,args:[t.toRemoteArg(),this._callbackConverter.toRemoteArg(r)]})},r.prototype._argRemote2Local=function(e){if(!e)return e;if("object"==typeof e){if("number"!=typeof e.type)return e;var t=e;switch(t.type){case Pr.API_ERROR:return Mr(t);case Pr.FD:var r=t;return new Xr(this,r.path,p.getFileFlag(r.flag),m.fromBuffer(qr(r.stat)),r.id,qr(r.data));case Pr.STATS:return Gr(t);case Pr.FILEFLAG:return jr(t);case Pr.BUFFER:return Yr(t);case Pr.ERROR:return Ur(t);default:return e}}return e},r.prototype._rpc=function(e,t){for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=this._argLocal2Remote(t[n]);var i={browserfsMessage:!0,method:e,args:r};this._worker.postMessage(i)},r.prototype._argLocal2Remote=function(t){if(!t)return t;switch(typeof t){case"object":return t instanceof m?Hr(t):t instanceof f?Nr(t):t instanceof Xr?t.toRemoteArg():t instanceof p?zr(t):t instanceof e?Vr(t):t instanceof Error?Br(t):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(t);default:return t}},r}(X);function Jr(e,t,r){var n=new XMLHttpRequest;n.open("HEAD",t,e),n.onreadystatechange=function(e){if(4===n.readyState){if(200!==n.status)return r(new f(n.status,"XHR HEAD error."));try{return r(null,parseInt(n.getResponseHeader("Content-Length")||"-1",10))}catch(e){return r(new f(a.EIO,"XHR HEAD error: Could not read content-length."))}}},n.send()}Zr.Name="WorkerFS",Zr.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(e,t){e.postMessage?t():t(new f(a.EINVAL,"option must be a Web Worker instance."))}}};var Kr=function(t,r,n){var i=new XMLHttpRequest;i.open("GET",t,!0);var o=!0;switch(r){case"buffer":i.responseType="arraybuffer";break;case"json":try{i.responseType="json",o="json"===i.responseType}catch(e){o=!1}break;default:return n(new f(a.EINVAL,"Invalid download type: "+r))}i.onreadystatechange=function(t){if(4===i.readyState){if(200!==i.status)return n(new f(i.status,"XHR error."));switch(r){case"buffer":return n(null,i.response?e.from(i.response):G());case"json":return n(null,o?i.response:JSON.parse(i.responseText))}}},i.send()},$r=P&&"undefined"!=typeof Blob?function(t,r){var n,i,o=new XMLHttpRequest;switch(o.open("GET",t,!1),r){case"buffer":o.responseType="arraybuffer";break;case"json":break;default:throw new f(a.EINVAL,"Invalid download type: "+r)}if(o.onreadystatechange=function(t){if(4===o.readyState)if(200===o.status)switch(r){case"buffer":n=e.from(o.response);break;case"json":n=JSON.parse(o.response)}else i=new f(o.status,"XHR error.")},o.send(),i)throw i;return n}:function(t,r){var n=new XMLHttpRequest;n.open("GET",t,!1);var i=null,o=null;if(n.overrideMimeType("text/plain; charset=x-user-defined"),n.onreadystatechange=function(t){if(4===n.readyState){if(200!==n.status)return void(o=new f(n.status,"XHR error."));switch(r){case"buffer":var a=n.responseText;i=e.alloc(a.length);for(var s=0;s<a.length;s++)i[s]=a.charCodeAt(s);return;case"json":return void(i=JSON.parse(n.responseText))}}},n.send(),o)throw o;return i};var Qr=function(){this._index={},this.addPath("/",new tn)};Qr.fromListing=function(e){var t=new Qr,r=new tn;t._index["/"]=r;for(var n=[["",e,r]];n.length>0;){var i=void 0,o=n.pop(),a=o[0],s=o[1],c=o[2];for(var u in s)if(s.hasOwnProperty(u)){var l=s[u],f=a+"/"+u;l?(t._index[f]=i=new tn,n.push([f,l,i])):i=new en(new m(h.FILE,-1,365)),c&&(c._ls[u]=i)}}return t},Qr.prototype.fileIterator=function(e){var t=this;for(var r in t._index)if(t._index.hasOwnProperty(r))for(var n=t._index[r],i=0,o=n.getListing();i<o.length;i+=1){var a=o[i],s=n.getItem(a);rn(s)&&e(s.getData())}},Qr.prototype.addPath=function(e,t){if(!t)throw new Error("Inode must be specified");if("/"!==e[0])throw new Error("Path must be absolute, got: "+e);if(this._index.hasOwnProperty(e))return this._index[e]===t;var r=this._split_path(e),n=r[0],i=r[1],o=this._index[n];return!(void 0===o&&"/"!==e&&(o=new tn,!this.addPath(n,o)))&&(!("/"!==e&&!o.addItem(i,t))&&(nn(t)&&(this._index[e]=t),!0))},Qr.prototype.addPathFast=function(e,t){var r=e.lastIndexOf("/"),n=0===r?"/":e.substring(0,r),i=e.substring(r+1),o=this._index[n];return void 0===o&&(o=new tn,this.addPathFast(n,o)),!!o.addItem(i,t)&&(t.isDir()&&(this._index[e]=t),!0)},Qr.prototype.removePath=function(e){var t=this._split_path(e),r=t[0],n=t[1],i=this._index[r];if(void 0===i)return null;var o=i.remItem(n);if(null===o)return null;if(nn(o)){for(var a=0,s=o.getListing();a<s.length;a+=1){var c=s[a];this.removePath(e+"/"+c)}"/"!==e&&delete this._index[e]}return o},Qr.prototype.ls=function(e){var t=this._index[e];return void 0===t?null:t.getListing()},Qr.prototype.getInode=function(e){var t=this._split_path(e),r=t[0],n=t[1],i=this._index[r];return void 0===i?null:r===e?i:i.getItem(n)},Qr.prototype._split_path=function(e){var t=c.dirname(e);return[t,e.substr(t.length+("/"===t?0:1))]};var en=function(e){this.data=e};en.prototype.isFile=function(){return!0},en.prototype.isDir=function(){return!1},en.prototype.getData=function(){return this.data},en.prototype.setData=function(e){this.data=e};var tn=function(e){void 0===e&&(e=null),this.data=e,this._ls={}};function rn(e){return!!e&&e.isFile()}function nn(e){return!!e&&e.isDir()}tn.prototype.isFile=function(){return!1},tn.prototype.isDir=function(){return!0},tn.prototype.getData=function(){return this.data},tn.prototype.getStats=function(){return new m(h.DIRECTORY,4096,365)},tn.prototype.getListing=function(){return Object.keys(this._ls)},tn.prototype.getItem=function(e){var t=this._ls[e];return t||null},tn.prototype.addItem=function(e,t){return!(e in this._ls)&&(this._ls[e]=t,!0)},tn.prototype.remItem=function(e){var t=this._ls[e];return void 0===t?null:(delete this._ls[e],t)};var on=function(e){function t(r,n,i){void 0===n&&(n=""),void 0===i&&(i=!0),e.call(this),r||(r="index.json"),n.length>0&&"/"!==n.charAt(n.length-1)&&(n+="/"),this.prefixUrl=n;var o=null;if("string"==typeof r){if(!(o=this._requestFileSync(r,"json")))throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else o=r;T(i,t.Name,{index:"string"==typeof r?r:"file index as an object",baseUrl:n}),this._index=Qr.fromListing(o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,r){void 0===e.index&&(e.index="index.json"),"string"==typeof e.index?t.FromURL(e.index,r,e.baseUrl,!1):r(null,new t(e.index,e.baseUrl,!1))},t.isAvailable=function(){return"undefined"!=typeof XMLHttpRequest&&null!==XMLHttpRequest},t.FromURL=function(e,r,n,i){void 0===n&&(n=e.slice(0,e.lastIndexOf("/")+1)),void 0===i&&(i=!0),i&&console.warn("[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: \""+e+'", baseUrl: "'+n+"\" }, cb)' instead."),Kr(e,"json",(function(e,i){e?r(e):r(null,new t(i,n,!1))}))},t.prototype.empty=function(){this._index.fileIterator((function(e){e.fileData=null}))},t.prototype.getName=function(){return t.Name},t.prototype.diskSpace=function(e,t){t(0,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.preloadFile=function(e,t){var r=this._index.getInode(e);if(!rn(r))throw f.EISDIR(e);if(null===r)throw f.ENOENT(e);var n=r.getData();n.size=t.length,n.fileData=t},t.prototype.stat=function(e,t,r){var n,i=this._index.getInode(e);if(null===i)return r(f.ENOENT(e));rn(i)?(n=i.getData()).size<0?this._requestFileSizeAsync(e,(function(e,t){if(e)return r(e);n.size=t,r(null,n.clone())})):r(null,n.clone()):nn(i)?(n=i.getStats(),r(null,n)):r(f.FileError(a.EINVAL,e))},t.prototype.statSync=function(e,t){var r,n=this._index.getInode(e);if(null===n)throw f.ENOENT(e);if(rn(n))(r=n.getData()).size<0&&(r.size=this._requestFileSizeSync(e));else{if(!nn(n))throw f.FileError(a.EINVAL,e);r=n.getStats()}return r},t.prototype.open=function(e,t,r,n){if(t.isWriteable())return n(new f(a.EPERM,e));var i=this,o=this._index.getInode(e);if(null===o)return n(f.ENOENT(e));if(!rn(o))return n(f.EISDIR(e));var s=o.getData();switch(t.pathExistsAction()){case l.THROW_EXCEPTION:case l.TRUNCATE_FILE:return n(f.EEXIST(e));case l.NOP:if(s.fileData)return n(null,new $(i,e,t,s.clone(),s.fileData));this._requestFileAsync(e,"buffer",(function(r,o){return r?n(r):(s.size=o.length,s.fileData=o,n(null,new $(i,e,t,s.clone(),o)))}));break;default:return n(new f(a.EINVAL,"Invalid FileMode object."))}},t.prototype.openSync=function(e,t,r){if(t.isWriteable())throw new f(a.EPERM,e);var n=this._index.getInode(e);if(null===n)throw f.ENOENT(e);if(!rn(n))throw f.EISDIR(e);var i=n.getData();switch(t.pathExistsAction()){case l.THROW_EXCEPTION:case l.TRUNCATE_FILE:throw f.EEXIST(e);case l.NOP:if(i.fileData)return new $(this,e,t,i.clone(),i.fileData);var o=this._requestFileSync(e,"buffer");return i.size=o.length,i.fileData=o,new $(this,e,t,i.clone(),o);default:throw new f(a.EINVAL,"Invalid FileMode object.")}},t.prototype.readdir=function(e,t){try{t(null,this.readdirSync(e))}catch(e){t(e)}},t.prototype.readdirSync=function(e){var t=this._index.getInode(e);if(null===t)throw f.ENOENT(e);if(nn(t))return t.getListing();throw f.ENOTDIR(e)},t.prototype.readFile=function(e,t,r,n){var i=n;this.open(e,r,420,(function(e,r){if(e)return n(e);n=function(e,t){r.close((function(r){return e||(e=r),i(e,t)}))};var o=r.getBuffer();null===t?n(e,U(o)):function(e,t,r){try{r(null,e.toString(t))}catch(e){r(e)}}(o,t,n)}))},t.prototype.readFileSync=function(e,t,r){var n=this.openSync(e,r,420);try{var i=n.getBuffer();return null===t?U(i):i.toString(t)}finally{n.closeSync()}},t.prototype.getXhrPath=function(e){return"/"===e.charAt(0)&&(e=e.slice(1)),this.prefixUrl+e},t.prototype._requestFileAsync=function(e,t,r){Kr(this.getXhrPath(e),t,r)},t.prototype._requestFileSync=function(e,t){return $r(this.getXhrPath(e),t)},t.prototype._requestFileSizeAsync=function(e,t){!function(e,t){Jr(!0,e,t)}(this.getXhrPath(e),t)},t.prototype._requestFileSizeSync=function(e){return t=this.getXhrPath(e),r=-1,Jr(!1,t,(function(e,t){if(e)throw e;r=t})),r;var t,r},t}(X);on.Name="XmlHttpRequest",on.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var an=function(){};an.str2byte=function(e,t){for(var r=e.length>t.length?t.length:e.length,n=0;n<r;n++){var i=e.charCodeAt(n);if(i>127){var o=an.extendedChars.indexOf(e.charAt(n));o>-1&&(i=o+128)}t[i]=n}return r},an.byte2str=function(e){for(var t=new Array(e.length),r=0;r<e.length;r++){var n=e[r];t[r]=n>127?an.extendedChars[n-128]:String.fromCharCode(n)}return t.join("")},an.byteLength=function(e){return e.length},an.extendedChars=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "];var sn,cn,un=r(31).inflateRaw,ln={};function fn(e,t){return new Date(1980+(t>>9),(t>>5&15)-1,31&t,e>>11,e>>5&63,31&e)}function dn(e,t,r,n){return 0===n?"":t?e.toString("utf8",r,r+n):an.byte2str(e.slice(r,r+n))}!function(e){e[e.MSDOS=0]="MSDOS",e[e.AMIGA=1]="AMIGA",e[e.OPENVMS=2]="OPENVMS",e[e.UNIX=3]="UNIX",e[e.VM_CMS=4]="VM_CMS",e[e.ATARI_ST=5]="ATARI_ST",e[e.OS2_HPFS=6]="OS2_HPFS",e[e.MAC=7]="MAC",e[e.Z_SYSTEM=8]="Z_SYSTEM",e[e.CP_M=9]="CP_M",e[e.NTFS=10]="NTFS",e[e.MVS=11]="MVS",e[e.VSE=12]="VSE",e[e.ACORN_RISC=13]="ACORN_RISC",e[e.VFAT=14]="VFAT",e[e.ALT_MVS=15]="ALT_MVS",e[e.BEOS=16]="BEOS",e[e.TANDEM=17]="TANDEM",e[e.OS_400=18]="OS_400",e[e.OSX=19]="OSX"}(sn||(sn={})),function(e){e[e.STORED=0]="STORED",e[e.SHRUNK=1]="SHRUNK",e[e.REDUCED_1=2]="REDUCED_1",e[e.REDUCED_2=3]="REDUCED_2",e[e.REDUCED_3=4]="REDUCED_3",e[e.REDUCED_4=5]="REDUCED_4",e[e.IMPLODE=6]="IMPLODE",e[e.DEFLATE=8]="DEFLATE",e[e.DEFLATE64=9]="DEFLATE64",e[e.TERSE_OLD=10]="TERSE_OLD",e[e.BZIP2=12]="BZIP2",e[e.LZMA=14]="LZMA",e[e.TERSE_NEW=18]="TERSE_NEW",e[e.LZ77=19]="LZ77",e[e.WAVPACK=97]="WAVPACK",e[e.PPMD=98]="PPMD"}(cn||(cn={}));var hn=function(e){if(this.data=e,67324752!==e.readUInt32LE(0))throw new f(a.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};hn.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},hn.prototype.flags=function(){return this.data.readUInt16LE(6)},hn.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},hn.prototype.lastModFileTime=function(){return fn(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},hn.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(10)},hn.prototype.crc32=function(){return this.data.readUInt32LE(14)},hn.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},hn.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},hn.prototype.fileName=function(){return dn(this.data,this.useUTF8(),30,this.fileNameLength())},hn.prototype.extraField=function(){var e=30+this.fileNameLength();return this.data.slice(e,e+this.extraFieldLength())},hn.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},hn.prototype.useUTF8=function(){return 2048==(2048&this.flags())};var pn=function(e,t,r){this.header=e,this.record=t,this.data=r};pn.prototype.decompress=function(){var e=this.header.compressionMethod(),t=ln[e];if(t)return t(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var r=cn[e];throw r||(r="Unknown: "+e),new f(a.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+r)},pn.prototype.getHeader=function(){return this.header},pn.prototype.getRecord=function(){return this.record},pn.prototype.getRawData=function(){return this.data};var mn=function(e){this.data=e};mn.prototype.crc32=function(){return this.data.readUInt32LE(0)},mn.prototype.compressedSize=function(){return this.data.readUInt32LE(4)},mn.prototype.uncompressedSize=function(){return this.data.readUInt32LE(8)};var _n=function(e){if(this.data=e,134630224!==this.data.readUInt32LE(0))throw new f(a.EINVAL,"Invalid archive extra data record signature: "+this.data.readUInt32LE(0))};_n.prototype.length=function(){return this.data.readUInt32LE(4)},_n.prototype.extraFieldData=function(){return this.data.slice(8,8+this.length())};var gn=function(e){if(this.data=e,84233040!==this.data.readUInt32LE(0))throw new f(a.EINVAL,"Invalid digital signature signature: "+this.data.readUInt32LE(0))};gn.prototype.size=function(){return this.data.readUInt16LE(4)},gn.prototype.signatureData=function(){return this.data.slice(6,6+this.size())};var yn=function(e,t,r){if(this.zipData=t,this.data=r,this.zipFilename=e,33639248!==this.data.readUInt32LE(0))throw new f(a.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename()};yn.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},yn.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},yn.prototype.flag=function(){return this.data.readUInt16LE(8)},yn.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},yn.prototype.lastModFileTime=function(){return fn(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},yn.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(12)},yn.prototype.crc32=function(){return this.data.readUInt32LE(16)},yn.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},yn.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},yn.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},yn.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},yn.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},yn.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},yn.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},yn.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},yn.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},yn.prototype.produceFilename=function(){return dn(this.data,this.useUTF8(),46,this.fileNameLength()).replace(/\\/g,"/")},yn.prototype.fileName=function(){return this._filename},yn.prototype.rawFileName=function(){return this.data.slice(46,46+this.fileNameLength())},yn.prototype.extraField=function(){var e=44+this.fileNameLength();return this.data.slice(e,e+this.extraFieldLength())},yn.prototype.fileComment=function(){var e=46+this.fileNameLength()+this.extraFieldLength();return dn(this.data,this.useUTF8(),e,this.fileCommentLength())},yn.prototype.rawFileComment=function(){var e=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(e,e+this.fileCommentLength())},yn.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},yn.prototype.isDirectory=function(){var e=this.fileName();return!!(16&this.externalAttributes())||"/"===e.charAt(e.length-1)},yn.prototype.isFile=function(){return!this.isDirectory()},yn.prototype.useUTF8=function(){return 2048==(2048&this.flag())},yn.prototype.isEncrypted=function(){return 1==(1&this.flag())},yn.prototype.getFileData=function(){if(null==this.zipFilename){var e=this.headerRelativeOffset(),t=new hn(this.zipData.slice(e));return new pn(t,this,this.zipData.slice(e+t.totalSize()))}{console.log("remote zip request for file:"+this.fileName());let e=this.headerRelativeOffset(),t=this.extraFieldLength(),r=0==t?t:t+4,n=30+this.fileNameLength()+r;const i=this.syncCall(this.zipFilename,e,n+this.compressedSize());return new pn(new hn(i.slice(0,n)),this,i.slice(n))}},yn.prototype.syncCall=function(t,r,n){var i=new XMLHttpRequest;i.open("GET",t,!1);var o=null,a=null;i.overrideMimeType("text/plain; charset=x-user-defined");let s="bytes="+r+"-"+(r+n-1);if(i.setRequestHeader("Range",s),i.onreadystatechange=function(t){if(4!==i.readyState);else{if(200===i.status||206===i.status){var r=i.responseText;o=e.alloc(r.length);for(var n=0;n<r.length;n++)o[n]=r.charCodeAt(n);return}a=new f(i.status,"XHR error.")}},i.send(),a)throw a;return o},yn.prototype.getData=function(){return this.getFileData().decompress()},yn.prototype.getRawData=function(){return this.getFileData().getRawData()},yn.prototype.getStats=function(){return new m(h.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};var vn=function(e){if(this.data=e,101010256!==this.data.readUInt32LE(0))throw new f(a.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};vn.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},vn.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},vn.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},vn.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},vn.prototype.cdSize=function(){return this.data.readUInt32LE(12)},vn.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},vn.prototype.cdZipCommentLength=function(){return this.data.readUInt16LE(20)},vn.prototype.cdZipComment=function(){return dn(this.data,!0,22,this.cdZipCommentLength())},vn.prototype.rawCdZipComment=function(){return this.data.slice(22,22+this.cdZipCommentLength())};var En=function(e,t,r,n){this.index=e,this.directoryEntries=t,this.eocd=r,this.data=n},wn=function(e){function t(r,n,i){void 0===n&&(n=""),void 0===i&&(i=!0),e.call(this),this.name=n,this._index=new Qr,this._directoryEntries=[],this._eocd=null,T(i,t.Name,{zipData:"zip data as a Buffer",name:n}),r instanceof En?(this._index=r.index,this._directoryEntries=r.directoryEntries,this._eocd=r.eocd,this.data=r.data):(this.data=r,this.populateIndex())}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,r){try{t.computeIndex(e.name,e.zipData,(function(n){var i=new t(n,e.name,!1);r(null,i)}),!1)}catch(e){r(e)}},t.isAvailable=function(){return!0},t.RegisterDecompressionMethod=function(e,t){ln[e]=t},t.computeIndex=function(e,r,n,i){void 0===i&&(i=!0),i&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var o=new Qr,s=t.getEOCD(r);if(s.diskNumber()!==s.cdDiskNumber())throw new f(a.EINVAL,"ZipFS does not support spanned zip files.");var c=null==e?s.cdOffset():0;if(4294967295===c)throw new f(a.EINVAL,"ZipFS does not support Zip64.");var u=c+s.cdSize();t.computeIndexResponsive(e,r,o,c,u,n,[],s)},t.getEOCD=function(e){for(var t=Math.min(65557,e.length-1),r=22;r<t;r++)if(101010256===e.readUInt32LE(e.length-r))return new vn(e.slice(e.length-r));throw new f(a.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},t.addToIndex=function(e,t){var r=e.fileName();if("/"===r.charAt(0))throw new Error("WHY IS THIS ABSOLUTE");"/"===r.charAt(r.length-1)&&(r=r.substr(0,r.length-1)),e.isDirectory()?t.addPathFast("/"+r,new tn(e)):t.addPathFast("/"+r,new en(e))},t.computeIndexResponsive=function(e,r,n,i,o,a,s,c){if(i<o){for(var u=0;u++<200&&i<o;){var l=new yn(e,r,r.slice(i));t.addToIndex(l,n),i+=l.totalSize(),s.push(l)}Fr((function(){t.computeIndexResponsive(e,r,n,i,o,a,s,c)}))}else a(new En(n,s,c,r))},t.prototype.getName=function(){return t.Name+(""!==this.name?" "+this.name:"")},t.prototype.getCentralDirectoryEntry=function(e){var t=this._index.getInode(e);if(null===t)throw f.ENOENT(e);if(rn(t))return t.getData();if(nn(t))return t.getData();throw f.EPERM("Invalid inode: "+t)},t.prototype.getCentralDirectoryEntryAt=function(e){var t=this._directoryEntries[e];if(!t)throw new RangeError("Invalid directory index: "+e+".");return t},t.prototype.getNumberOfCentralDirectoryEntries=function(){return this._directoryEntries.length},t.prototype.getEndOfCentralDirectory=function(){return this._eocd},t.prototype.diskSpace=function(e,t){t(this.data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,t){var r,n=this._index.getInode(e);if(null===n)throw f.ENOENT(e);if(rn(n))r=n.getData().getStats();else{if(!nn(n))throw new f(a.EINVAL,"Invalid inode.");r=n.getStats()}return r},t.prototype.openSync=function(e,t,r){if(t.isWriteable())throw new f(a.EPERM,e);var n=this._index.getInode(e);if(!n)throw f.ENOENT(e);if(!rn(n))throw f.EISDIR(e);var i=n.getData(),o=i.getStats();switch(t.pathExistsAction()){case l.THROW_EXCEPTION:case l.TRUNCATE_FILE:throw f.EEXIST(e);case l.NOP:return new $(this,e,t,o,i.getData());default:throw new f(a.EINVAL,"Invalid FileMode object.")}},t.prototype.readdirSync=function(e){var t=this._index.getInode(e);if(t){if(nn(t))return t.getListing();throw f.ENOTDIR(e)}throw f.ENOENT(e)},t.prototype.readFileSync=function(e,t,r){var n=this.openSync(e,r,420);try{var i=n.getBuffer();return null===t?U(i):i.toString(t)}finally{n.closeSync()}},t.prototype.populateIndex=function(){var e=this,r=this._eocd=t.getEOCD(this.data);if(r.diskNumber()!==r.cdDiskNumber())throw new f(a.EINVAL,"ZipFS does not support spanned zip files.");var n=r.cdOffset();if(4294967295===n)throw new f(a.EINVAL,"ZipFS does not support Zip64.");for(var i=n+r.cdSize();n<i;){var o=new yn(e.data,e.data.slice(n));n+=o.totalSize(),t.addToIndex(o,e._index),e._directoryEntries.push(o)}},t}(Z);wn.Name="ZipFS",wn.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:z},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},wn.CompressionMethod=cn,wn.RegisterDecompressionMethod(cn.DEFLATE,(function(e,t,r){return N(un(e.slice(0,t),{chunkSize:r}))})),wn.RegisterDecompressionMethod(cn.STORED,(function(e,t,r){return U(e,0,r)}));function Sn(e,t,r){return e.toString("ascii",t,t+r).trim()}function bn(e,t,r){if(1===r)return String.fromCharCode(e[t]);for(var n=Math.floor(r/2),i=new Array(n),o=0;o<n;o++){var a=t+(o<<1);i[o]=String.fromCharCode(e[a+1]|e[a]<<8)}return i.join("")}function Fn(e,t){var r=parseInt(Sn(e,t,4),10),n=parseInt(Sn(e,t+4,2),10),i=parseInt(Sn(e,t+6,2),10),o=parseInt(Sn(e,t+8,2),10),a=parseInt(Sn(e,t+10,2),10),s=parseInt(Sn(e,t+12,2),10),c=parseInt(Sn(e,t+14,2),10);return new Date(r,n,i,o,a,s,100*c)}function kn(e,t){var r=e[t],n=e[t+1],i=e[t+2],o=e[t+3],a=e[t+4],s=e[t+5];return new Date(r,n-1,i,o,a,s)}function An(e,t){var r=e.slice(t),n=new In(r);switch(n.signatureWord()){case 17221:return new Nn(r);case 20548:return new Mn(r);case 21328:return new Bn(r);case 21332:return new Un(r);case 17746:return new Hn(r);case 17747:return new Gn(r);case 20568:return new jn(r);case 20558:return new Wn(r);case 21324:return new qn(r);case 20045:return new Yn(r);case 17228:return new Xn(r);case 20556:return new Zn(r);case 21061:return new Jn(r);case 21574:return new Kn(r);case 21318:return new $n(r);case 21074:return new zn(r);default:return n}}function Ln(e,t,r,n){r-=4;for(var i=new Array;t<r;){var o=An(e,t),a=o.length();if(0===a)return i;if(t+=a,o instanceof Un)break;o instanceof Nn?i=i.concat(o.getEntries(n)):i.push(o)}return i}var xn=function(e){this._data=e};xn.prototype.type=function(){return this._data[0]},xn.prototype.standardIdentifier=function(){return Sn(this._data,1,5)},xn.prototype.version=function(){return this._data[6]},xn.prototype.data=function(){return this._data.slice(7,2048)};var Tn=function(e){function t(t){e.call(this,t),this._root=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.systemIdentifier=function(){return this._getString32(8)},t.prototype.volumeIdentifier=function(){return this._getString32(40)},t.prototype.volumeSpaceSize=function(){return this._data.readUInt32LE(80)},t.prototype.volumeSetSize=function(){return this._data.readUInt16LE(120)},t.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(124)},t.prototype.logicalBlockSize=function(){return this._data.readUInt16LE(128)},t.prototype.pathTableSize=function(){return this._data.readUInt32LE(132)},t.prototype.locationOfTypeLPathTable=function(){return this._data.readUInt32LE(140)},t.prototype.locationOfOptionalTypeLPathTable=function(){return this._data.readUInt32LE(144)},t.prototype.locationOfTypeMPathTable=function(){return this._data.readUInt32BE(148)},t.prototype.locationOfOptionalTypeMPathTable=function(){return this._data.readUInt32BE(152)},t.prototype.rootDirectoryEntry=function(e){return null===this._root&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(e)),this._root},t.prototype.volumeSetIdentifier=function(){return this._getString(190,128)},t.prototype.publisherIdentifier=function(){return this._getString(318,128)},t.prototype.dataPreparerIdentifier=function(){return this._getString(446,128)},t.prototype.applicationIdentifier=function(){return this._getString(574,128)},t.prototype.copyrightFileIdentifier=function(){return this._getString(702,38)},t.prototype.abstractFileIdentifier=function(){return this._getString(740,36)},t.prototype.bibliographicFileIdentifier=function(){return this._getString(776,37)},t.prototype.volumeCreationDate=function(){return Fn(this._data,813)},t.prototype.volumeModificationDate=function(){return Fn(this._data,830)},t.prototype.volumeExpirationDate=function(){return Fn(this._data,847)},t.prototype.volumeEffectiveDate=function(){return Fn(this._data,864)},t.prototype.fileStructureVersion=function(){return this._data[881]},t.prototype.applicationUsed=function(){return this._data.slice(883,1395)},t.prototype.reserved=function(){return this._data.slice(1395,2048)},t.prototype._getString32=function(e){return this._getString(e,32)},t}(xn),Pn=function(e){function t(t){if(e.call(this,t),1!==this.type())throw new f(a.EIO,"Invalid primary volume descriptor.")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"ISO9660"},t.prototype._constructRootDirectoryRecord=function(e){return new Rn(e,-1)},t.prototype._getString=function(e,t){return this._getString(e,t)},t}(Tn),Cn=function(e){function t(t){if(e.call(this,t),2!==this.type())throw new f(a.EIO,"Invalid supplementary volume descriptor.");var r=this.escapeSequence(),n=r[2];if(37!==r[0]||47!==r[1]||64!==n&&67!==n&&69!==n)throw new f(a.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+r.toString())}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.name=function(){return"Joliet"},t.prototype.escapeSequence=function(){return this._data.slice(88,120)},t.prototype._constructRootDirectoryRecord=function(e){return new Dn(e,-1)},t.prototype._getString=function(e,t){return bn(this._data,e,t)},t}(Tn),On=function(e,t){this._suEntries=null,this._fileOrDir=null,this._data=e,this._rockRidgeOffset=t};On.prototype.hasRockRidge=function(){return this._rockRidgeOffset>-1},On.prototype.getRockRidgeOffset=function(){return this._rockRidgeOffset},On.prototype.rootCheckForRockRidge=function(e){var t=this.getDirectory(e);this._rockRidgeOffset=t.getDotEntry(e)._getRockRidgeOffset(e),this._rockRidgeOffset>-1&&(this._fileOrDir=null)},On.prototype.length=function(){return this._data[0]},On.prototype.extendedAttributeRecordLength=function(){return this._data[1]},On.prototype.lba=function(){return 2048*this._data.readUInt32LE(2)},On.prototype.dataLength=function(){return this._data.readUInt32LE(10)},On.prototype.recordingDate=function(){return kn(this._data,18)},On.prototype.fileFlags=function(){return this._data[25]},On.prototype.fileUnitSize=function(){return this._data[26]},On.prototype.interleaveGapSize=function(){return this._data[27]},On.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(28)},On.prototype.identifier=function(){return this._getString(33,this._data[32])},On.prototype.fileName=function(e){if(this.hasRockRidge()){var t=this._rockRidgeFilename(e);if(null!==t)return t}var r=this.identifier();if(this.isDirectory(e))return r;var n=r.indexOf(";");return-1===n?r:"."===r[n-1]?r.slice(0,n-1):r.slice(0,n)},On.prototype.isDirectory=function(e){var t=!!(2&this.fileFlags());return!t&&this.hasRockRidge()&&(t=this.getSUEntries(e).filter((function(e){return e instanceof Xn})).length>0),t},On.prototype.isSymlink=function(e){return this.hasRockRidge()&&this.getSUEntries(e).filter((function(e){return e instanceof qn})).length>0},On.prototype.getSymlinkPath=function(e){for(var t="",r=this.getSUEntries(e),n=this._getGetString(),i=0,o=r;i<o.length;i+=1){var a=o[i];if(a instanceof qn){for(var s=0,c=a.componentRecords();s<c.length;s+=1){var u=c[s],l=u.flags();2&l?t+="./":4&l?t+="../":8&l?t+="/":(t+=u.content(n),1&l||(t+="/"))}if(!a.continueFlag())break}}return t.length>1&&"/"===t[t.length-1]?t.slice(0,t.length-1):t},On.prototype.getFile=function(e){if(this.isDirectory(e))throw new Error("Tried to get a File from a directory.");return null===this._fileOrDir&&(this._fileOrDir=e.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},On.prototype.getDirectory=function(e){if(!this.isDirectory(e))throw new Error("Tried to get a Directory from a file.");return null===this._fileOrDir&&(this._fileOrDir=this._constructDirectory(e)),this._fileOrDir},On.prototype.getSUEntries=function(e){return this._suEntries||this._constructSUEntries(e),this._suEntries},On.prototype._rockRidgeFilename=function(e){var t=this.getSUEntries(e).filter((function(e){return e instanceof Yn}));if(0===t.length||6&t[0].flags())return null;for(var r="",n=this._getGetString(),i=0,o=t;i<o.length;i+=1){var a=o[i];if(r+=a.name(n),!(1&a.flags()))break}return r},On.prototype._constructSUEntries=function(e){var t=33+this._data[32];t%2==1&&t++,t+=this._rockRidgeOffset,this._suEntries=Ln(this._data,t,this.length(),e)},On.prototype._getRockRidgeOffset=function(e){this._rockRidgeOffset=0;var t=this.getSUEntries(e);if(t.length>0){var r=t[0];if(r instanceof Bn&&r.checkBytesPass())for(var n=1;n<t.length;n++){var i=t[n];if(i instanceof zn||i instanceof Hn&&"IEEE_P1282"===i.extensionIdentifier())return r.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var Rn=function(e){function t(t,r){e.call(this,t,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,t){return Sn(this._data,e,t)},t.prototype._constructDirectory=function(e){return new ei(this,e)},t.prototype._getGetString=function(){return Sn},t}(On),Dn=function(e){function t(t,r){e.call(this,t,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._getString=function(e,t){return bn(this._data,e,t)},t.prototype._constructDirectory=function(e){return new ti(this,e)},t.prototype._getGetString=function(){return bn},t}(On),In=function(e){this._data=e};In.prototype.signatureWord=function(){return this._data.readUInt16BE(0)},In.prototype.signatureWordString=function(){return Sn(this._data,0,2)},In.prototype.length=function(){return this._data[2]},In.prototype.suVersion=function(){return this._data[3]};var Nn=function(e){function t(t){e.call(this,t),this._entries=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.continuationLba=function(){return this._data.readUInt32LE(4)},t.prototype.continuationLbaOffset=function(){return this._data.readUInt32LE(12)},t.prototype.continuationLength=function(){return this._data.readUInt32LE(20)},t.prototype.getEntries=function(e){if(!this._entries){var t=2048*this.continuationLba()+this.continuationLbaOffset();this._entries=Ln(e,t,this.continuationLength(),e)}return this._entries},t}(In),Mn=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(In),Bn=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.checkBytesPass=function(){return 190===this._data[4]&&239===this._data[5]},t.prototype.bytesSkipped=function(){return this._data[6]},t}(In),Un=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(In),Hn=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.identifierLength=function(){return this._data[4]},t.prototype.descriptorLength=function(){return this._data[5]},t.prototype.sourceLength=function(){return this._data[6]},t.prototype.extensionVersion=function(){return this._data[7]},t.prototype.extensionIdentifier=function(){return Sn(this._data,8,this.identifierLength())},t.prototype.extensionDescriptor=function(){return Sn(this._data,8+this.identifierLength(),this.descriptorLength())},t.prototype.extensionSource=function(){return Sn(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},t}(In),Gn=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.extensionSequence=function(){return this._data[4]},t}(In),zn=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(In),jn=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.mode=function(){return this._data.readUInt32LE(4)},t.prototype.fileLinks=function(){return this._data.readUInt32LE(12)},t.prototype.uid=function(){return this._data.readUInt32LE(20)},t.prototype.gid=function(){return this._data.readUInt32LE(28)},t.prototype.inode=function(){return this._data.readUInt32LE(36)},t}(In),Wn=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.devTHigh=function(){return this._data.readUInt32LE(4)},t.prototype.devTLow=function(){return this._data.readUInt32LE(12)},t}(In),qn=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.continueFlag=function(){return 1&this.flags()},t.prototype.componentRecords=function(){for(var e=new Array,t=5;t<this.length();){var r=new Vn(this._data.slice(t));e.push(r),t+=r.length()}return e},t}(In),Vn=function(e){this._data=e};Vn.prototype.flags=function(){return this._data[0]},Vn.prototype.length=function(){return 2+this.componentLength()},Vn.prototype.componentLength=function(){return this._data[1]},Vn.prototype.content=function(e){return e(this._data,2,this.componentLength())};var Yn=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.name=function(e){return e(this._data,5,this.length()-5)},t}(In),Xn=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.childDirectoryLba=function(){return this._data.readUInt32LE(4)},t}(In),Zn=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parentDirectoryLba=function(){return this._data.readUInt32LE(4)},t}(In),Jn=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(In),Kn=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flags=function(){return this._data[4]},t.prototype.creation=function(){return 1&this.flags()?this._longFormDates()?Fn(this._data,5):kn(this._data,5):null},t.prototype.modify=function(){if(2&this.flags()){var e=1&this.flags()?1:0;return this._longFormDates?Fn(this._data,5+17*e):kn(this._data,5+7*e)}return null},t.prototype.access=function(){if(4&this.flags()){var e=1&this.flags()?1:0;return e+=2&this.flags()?1:0,this._longFormDates?Fn(this._data,5+17*e):kn(this._data,5+7*e)}return null},t.prototype.backup=function(){if(16&this.flags()){var e=1&this.flags()?1:0;return e+=2&this.flags()?1:0,e+=4&this.flags()?1:0,this._longFormDates?Fn(this._data,5+17*e):kn(this._data,5+7*e)}return null},t.prototype.expiration=function(){if(32&this.flags()){var e=1&this.flags()?1:0;return e+=2&this.flags()?1:0,e+=4&this.flags()?1:0,e+=16&this.flags()?1:0,this._longFormDates?Fn(this._data,5+17*e):kn(this._data,5+7*e)}return null},t.prototype.effective=function(){if(64&this.flags()){var e=1&this.flags()?1:0;return e+=2&this.flags()?1:0,e+=4&this.flags()?1:0,e+=16&this.flags()?1:0,e+=32&this.flags()?1:0,this._longFormDates?Fn(this._data,5+17*e):kn(this._data,5+7*e)}return null},t.prototype._longFormDates=function(){return!!this.flags()},t}(In),$n=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.virtualSizeHigh=function(){return this._data.readUInt32LE(4)},t.prototype.virtualSizeLow=function(){return this._data.readUInt32LE(12)},t.prototype.tableDepth=function(){return this._data[20]},t}(In),Qn=function(e,t){var r=this;this._fileList=[],this._fileMap={},this._record=e;var n=e.lba(),i=n+e.dataLength();2&e.fileFlags()||(n=2048*e.getSUEntries(t).filter((function(e){return e instanceof Xn}))[0].childDirectoryLba(),i=1/0);for(;n<i;){if(0!==t[n]){var o=r._constructDirectoryRecord(t.slice(n)),a=o.fileName(t);"\0"!==a&&""!==a?o.hasRockRidge()&&0!==o.getSUEntries(t).filter((function(e){return e instanceof Jn})).length||(r._fileMap[a]=o,r._fileList.push(a)):i===1/0&&(i=n+o.dataLength()),n+=o.length()}else n++}};Qn.prototype.getRecord=function(e){return this._fileMap[e]},Qn.prototype.getFileList=function(){return this._fileList},Qn.prototype.getDotEntry=function(e){return this._constructDirectoryRecord(e.slice(this._record.lba()))};var ei=function(e){function t(t,r){e.call(this,t,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new Rn(e,this._record.getRockRidgeOffset())},t}(Qn),ti=function(e){function t(t,r){e.call(this,t,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._constructDirectoryRecord=function(e){return new Dn(e,this._record.getRockRidgeOffset())},t}(Qn),ri=function(e){function t(r,n,i){var o=this;void 0===n&&(n=""),void 0===i&&(i=!0),e.call(this),this._data=r,T(i,t.Name,{data:"ISO data as a Buffer",name:n});for(var s=!1,c=32768,u=new Array;!s;){var l=r.slice(c);switch(new xn(l).type()){case 1:u.push(new Pn(l));break;case 2:u.push(new Cn(l));break;case 255:s=!0}c+=2048}if(0===u.length)throw new f(a.EIO,"Unable to find a suitable volume descriptor.");u.forEach((function(e){o._pvd&&2===o._pvd.type()||(o._pvd=e)})),this._root=this._pvd.rootDirectoryEntry(r),this._name=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.Create=function(e,r){var n;try{n=new t(e.data,e.name,!1)}catch(e){}finally{r(undefined,n)}},t.isAvailable=function(){return!0},t.prototype.getName=function(){var e="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(e+="-RockRidge"),e},t.prototype.diskSpace=function(e,t){t(this._data.length,0)},t.prototype.isReadOnly=function(){return!0},t.prototype.supportsLinks=function(){return!1},t.prototype.supportsProps=function(){return!1},t.prototype.supportsSynch=function(){return!0},t.prototype.statSync=function(e,t){var r=this._getDirectoryRecord(e);if(null===r)throw f.ENOENT(e);return this._getStats(e,r)},t.prototype.openSync=function(e,t,r){if(t.isWriteable())throw new f(a.EPERM,e);var n=this._getDirectoryRecord(e);if(!n)throw f.ENOENT(e);if(n.isSymlink(this._data))return this.openSync(c.resolve(e,n.getSymlinkPath(this._data)),t,r);if(n.isDirectory(this._data))throw f.EISDIR(e);var i=n.getFile(this._data),o=this._getStats(e,n);switch(t.pathExistsAction()){case l.THROW_EXCEPTION:case l.TRUNCATE_FILE:throw f.EEXIST(e);case l.NOP:return new $(this,e,t,o,i);default:throw new f(a.EINVAL,"Invalid FileMode object.")}},t.prototype.readdirSync=function(e){var t=this._getDirectoryRecord(e);if(t){if(t.isDirectory(this._data))return t.getDirectory(this._data).getFileList().slice(0);throw f.ENOTDIR(e)}throw f.ENOENT(e)},t.prototype.readFileSync=function(e,t,r){var n=this.openSync(e,r,420);try{var i=n.getBuffer();return null===t?U(i):i.toString(t)}finally{n.closeSync()}},t.prototype._getDirectoryRecord=function(e){if("/"===e)return this._root;for(var t=e.split("/").slice(1),r=this._root,n=0,i=t;n<i.length;n+=1){var o=i[n];if(!r.isDirectory(this._data))return null;if(!(r=r.getDirectory(this._data).getRecord(o)))return null}return r},t.prototype._getStats=function(e,t){if(t.isSymlink(this._data)){var r=c.resolve(e,t.getSymlinkPath(this._data)),n=this._getDirectoryRecord(r);return n?this._getStats(r,n):null}var i=t.dataLength(),o=365,a=t.recordingDate(),s=a,u=a,l=a;if(t.hasRockRidge())for(var f=0,d=t.getSUEntries(this._data);f<d.length;f+=1){var p=d[f];if(p instanceof jn)o=p.mode();else if(p instanceof Kn){var _=p.flags();4&_&&(s=p.access()),2&_&&(u=p.modify()),1&_&&(l=p.creation())}}return o&=365,new m(t.isDirectory(this._data)?h.DIRECTORY:h.FILE,i,o,s,u,l)},t}(Z);ri.Name="IsoFS",ri.Options={data:{type:"object",description:"The ISO file in a buffer",validator:z}},[ee,Lt,Pt,Ct,Ut,Qt,ar,ri,lr,fr,Rr,Zr,on,wn].forEach((function(e){var t=e.Create;e.Create=function(r,n){var i="function"==typeof r,o=i?r:n,a=i?{}:r;j(e,a,(function(r){r?o(r):t.call(e,a,o)}))}}));var ni,ii={AsyncMirror:ee,Dropbox:Lt,Emscripten:Pt,FolderAdapter:Ct,HTML5FS:Ut,InMemory:Qt,IndexedDB:ar,IsoFS:ri,LocalStorage:lr,MountableFileSystem:fr,OverlayFS:Rr,WorkerFS:Zr,XmlHttpRequest:on,ZipFS:wn};function oi(e){switch(e){case"fs":return k;case"path":return c;case"buffer":return s;case"process":return o;case"bfs_utils":return W;default:return ii[e]}}function ai(e){return k.initialize(e)}function si(e,t){var r=e.fs;if(!r)return t(new f(a.EPERM,'Missing "fs" property on configuration object.'));var n=e.options,i=0,o=!1;function s(){if(!o){o=!0;var e=ii[r];e?e.Create(n,t):t(new f(a.EPERM,"File system "+r+" is not available in BrowserFS."))}}if(null!==n&&"object"==typeof n){var c=!1;Object.keys(n).filter((function(e){return"fs"!==e})).forEach((function(e){var r=n[e];null!==r&&"object"==typeof r&&r.fs&&(i++,si(r,(function(r,a){if(i--,r){if(o)return;o=!0,t(r)}else n[e]=a,0===i&&c&&s()})))})),c=!0}0===i&&s()}o.initializeTTYs&&o.initializeTTYs(),"b"!=="ab".substr(-1)&&(String.prototype.substr=(ni=String.prototype.substr,function(e,t){return e<0&&(e=this.length+e),ni.call(this,e,t)})),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(e,t){void 0===e&&(e=0),void 0===t&&(t=this.length);return e<0&&(e=this.length+e)<0&&(e=0),t<0&&(t=this.length+t)<0&&(t=0),t<e&&(t=e),new Uint8Array(this.buffer,this.byteOffset+e,t-e)})),t.install=function(t){t.Buffer=e,t.process=o;var r=t.require?t.require:null;t.require=function(e){var t=oi(e);return t||r.apply(null,Array.prototype.slice.call(arguments,0))}},t.registerFileSystem=function(e,t){ii[e]=t},t.BFSRequire=oi,t.initialize=ai,t.configure=function(e,t){si(e,(function(e,r){r?(ai(r),t()):t(e)}))},t.getFileSystem=si,t.EmscriptenFS=Y,t.FileSystem=ii,t.Errors=d,t.setImmediate=Fr}).call(t,r(1),function(){return this}(),r(5)(e),r(6))},function(e,t,r){e.exports=r(2).Buffer},function(e,t,r){(function(e){
/*!
           * The buffer module from node.js, for the browser.
           *
           * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
           * @license  MIT
           */
"use strict";var n=r(3),i=r(4);t.Buffer=e,t.SlowBuffer=function(t){+t!=t&&(t=0);return e.alloc(+t)},t.INSPECT_MAX_BYTES=50;var o=2147483647;function a(t){if(t>o)throw new RangeError("Invalid typed array length");var r=new Uint8Array(t);return r.__proto__=e.prototype,r}function e(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(e)}return s(e,t,r)}function s(t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return H(t)?function(t,r,n){if(r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");var i;i=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);return i.__proto__=e.prototype,i}(t,r,n):"string"==typeof t?function(t,r){"string"==typeof r&&""!==r||(r="utf8");if(!e.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(t,r),i=a(n),o=i.write(t,r);o!==n&&(i=i.slice(0,o));return i}(t,r):function(t){if(e.isBuffer(t)){var r=0|f(t.length),n=a(r);return 0===n.length||t.copy(n,0,0,r),n}if(t){if(G(t)||"length"in t)return"number"!=typeof t.length||z(t.length)?a(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e){return c(e),a(e<0?0:0|f(e))}function l(e){for(var t=e.length<0?0:0|f(e.length),r=a(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function d(t,r){if(e.isBuffer(t))return t.length;if(G(t)||H(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(t).length;default:if(i)return M(t).length;r=(""+r).toLowerCase(),i=!0}}function h(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,r);case"utf8":case"utf-8":return F(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return L(this,t,r);case"base64":return b(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function p(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(t,r,n,i,o){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),z(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof r&&(r=e.from(r,i)),e.isBuffer(r))return 0===r.length?-1:_(t,r,n,i,o);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,r,n):Uint8Array.prototype.lastIndexOf.call(t,r,n):_(t,[r],n,i,o);throw new TypeError("val must be string, number or Buffer")}function _(e,t,r,n,i){var o,a=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=r;o<s;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(r+c>s&&(r=s-c),o=r;o>=0;o--){for(var f=!0,d=0;d<c;d++)if(u(e,o+d)!==u(t,d)){f=!1;break}if(f)return o}return-1}function g(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(z(s))return a;e[r+a]=s}return a}function y(e,t,r,n){return U(M(t,e.length-r),e,r,n)}function v(e,t,r,n){return U(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function E(e,t,r,n){return v(e,t,r,n)}function w(e,t,r,n){return U(B(t),e,r,n)}function S(e,t,r,n){return U(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function b(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function F(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,c,u=e[i],l=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=r)switch(f){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=k));return r}(n)}t.kMaxLength=o,e.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),e.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(e,t,r){return s(e,t,r)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(e,t,r){return function(e,t,r){return c(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},e.allocUnsafe=function(e){return u(e)},e.allocUnsafeSlow=function(e){return u(e)},e.isBuffer=function(e){return null!=e&&!0===e._isBuffer},e.compare=function(t,r){if(!e.isBuffer(t)||!e.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var n=t.length,i=r.length,o=0,a=Math.min(n,i);o<a;++o)if(t[o]!==r[o]){n=t[o],i=r[o];break}return n<i?-1:i<n?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var i=e.allocUnsafe(r),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!e.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i},e.byteLength=d,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},e.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?F(this,0,e):h.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,r,n,i,o){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),r<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(this===t)return 0;for(var a=(o>>>=0)-(i>>>=0),s=(n>>>=0)-(r>>>=0),c=Math.min(a,s),u=this.slice(i,o),l=t.slice(r,n),f=0;f<c;++f)if(u[f]!==l[f]){a=u[f],s=l[f];break}return a<s?-1:s<a?1:0},e.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},e.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},e.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},e.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return g(this,e,t,r);case"utf8":case"utf-8":return y(this,e,t,r);case"ascii":return v(this,e,t,r);case"latin1":case"binary":return E(this,e,t,r);case"base64":return w(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function A(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function L(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function x(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=N(e[o]);return i}function T(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(t,r,n,i,o,a){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<a)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function O(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function R(e,t,r,n,o){return t=+t,r>>>=0,o||O(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,o){return t=+t,r>>>=0,o||O(e,0,r,8),i.write(e,t,r,n,52,8),r+8}e.prototype.slice=function(t,r){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t);var i=this.subarray(t,r);return i.__proto__=e.prototype,i},e.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},e.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},e.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},e.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||P(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},e.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},e.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||C(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},e.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||C(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},e.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,255,0),this[t]=255&e,t+1},e.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},e.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},e.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},e.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},e.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);C(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},e.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);C(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},e.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},e.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},e.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},e.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},e.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},e.prototype.writeFloatLE=function(e,t,r){return R(this,e,t,!0,r)},e.prototype.writeFloatBE=function(e,t,r){return R(this,e,t,!1,r)},e.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},e.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},e.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},e.prototype.fill=function(t,r,n,i){if("string"==typeof t){if("string"==typeof r?(i=r,r=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!e.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;var a;if(r>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(a=r;a<n;++a)this[a]=t;else{var s=e.isBuffer(t)?t:new e(t,i),c=s.length;for(a=0;a<n-r;++a)this[a+r]=s[a%c]}return this};var I=/[^+/0-9A-Za-z-_]/g;function N(e){return e<16?"0"+e.toString(16):e.toString(16)}function M(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function B(e){return n.toByteArray(function(e){if((e=e.trim().replace(I,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function H(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function G(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function z(e){return e!=e}}).call(t,r(1))},function(e,t){"use strict";t.byteLength=function(e){return 3*e.length/4-c(e)},t.toByteArray=function(e){var t,r,o,a,s,u,l=e.length;s=c(e),u=new i(3*l/4-s),o=s>0?l-4:l;var f=0;for(t=0,r=0;t<o;t+=4,r+=3)a=n[e.charCodeAt(t)]<<18|n[e.charCodeAt(t+1)]<<12|n[e.charCodeAt(t+2)]<<6|n[e.charCodeAt(t+3)],u[f++]=a>>16&255,u[f++]=a>>8&255,u[f++]=255&a;2===s?(a=n[e.charCodeAt(t)]<<2|n[e.charCodeAt(t+1)]>>4,u[f++]=255&a):1===s&&(a=n[e.charCodeAt(t)]<<10|n[e.charCodeAt(t+1)]<<4|n[e.charCodeAt(t+2)]>>2,u[f++]=a>>8&255,u[f++]=255&a);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o="",a=[],s=16383,c=0,l=n-i;c<l;c+=s)a.push(u(e,c,c+s>l?l:c+s));1===i?(t=e[n-1],o+=r[t>>2],o+=r[t<<4&63],o+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],o+=r[t>>10],o+=r[t>>4&63],o+=r[t<<2&63],o+="=");return a.push(o),a.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function u(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16)+(e[s+1]<<8)+e[s+2],a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,c=(1<<s)-1,u=c>>1,l=-7,f=r?i-1:0,d=r?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+e[t+f],f+=d,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),o-=u}return(h?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+f>=1?d/c:d*Math.pow(2,1-f))*c>=2&&(a++,c/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*c-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+h]=255&a,h+=p,a/=256,u-=8);e[r+h-p]|=128*m}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,r){"use strict";var n=new(r(7)),i={};function o(e){i[e]||("function"==typeof n[e]?i[e]=function(){return n[e].apply(n,arguments)}:i[e]=n[e])}for(var a in n)o(a);i.initializeTTYs=function(){null===n.stdin&&(n.initializeTTYs(),i.stdin=n.stdin,i.stdout=n.stdout,i.stderr=n.stderr)},n.nextTick((function(){i.initializeTTYs()})),e.exports=i},function(e,t,r){(function(t){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=r(8),o=null,a=function(){function e(e,t){this.fun=e,this.array=t}return e.prototype.run=function(){this.fun.apply(null,this.array)},e}(),s=function(){function e(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1}return e.prototype.push=function(e){var t=this;1!==this._queue.push(e)||this._draining||setTimeout((function(){return t._drainQueue()}),0)},e.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue()},e.prototype._drainQueue=function(){var e=this;if(!this._draining){var t=setTimeout((function(){return e._cleanUpNextTick()}));this._draining=!0;for(var r=this._queue.length;r;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<r;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,r=this._queue.length}this._currentQueue=null,this._draining=!1,clearTimeout(t)}},e}(),c=function(e){function i(){e.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new s,this.execPath=t,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=1e3*Math.random()|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0}return n(i,e),i.prototype.chdir=function(e){null===o&&(o=r(9)),this._cwd=o.resolve(e)},i.prototype.cwd=function(){return this._cwd},i.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},i.prototype.nextTick=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._queue.push(new a(e,t))},i.prototype.abort=function(){this.emit("abort")},i.prototype.exit=function(e){this.exitCode=e,this.emit("exit",[e])},i.prototype.getgid=function(){return this._gid},i.prototype.setgid=function(e){this._gid="number"==typeof e?e:1},i.prototype.getuid=function(){return this._uid},i.prototype.setuid=function(e){this._uid="number"==typeof e?e:1},i.prototype.kill=function(e,t){this.emit("kill",[e,t])},i.prototype.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0}},i.prototype.umask=function(e){void 0===e&&(e=this._mask);var t=this._mask;return this._mask=e,this.emit("umask",[e]),t},i.prototype.hrtime=function(){var e,t=(e="undefined"!=typeof performance?performance.now():Date.now?Date.now():(new Date).getTime())/1e3|0;return[t,e=1e6*(e-=1e3*t)|0]},i.prototype.initializeTTYs=function(){if(null===this.stdout){var e=r(10);this.stdout=new e,this.stderr=new e,this.stdin=new e}},i.prototype.disconnect=function(){},i}(i.EventEmitter);e.exports=c}).call(t,"/")},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,a,s,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(o(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),a=(u=r.slice()).length,c=0;c<a;c++)u[c].apply(this,s);return!0},r.prototype.addListener=function(e,t){var a;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},r.prototype.removeListener=function(e,t){var r,o,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(r=this._events[e]).length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(s=a;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){o=s;break}if(o<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){(function(t){"use strict";var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var n=function(){function e(){}return e.normalize=function(t){""===t&&(t=".");for(var r=t.charAt(0)===e.sep,n=(t=e._removeDuplicateSeps(t)).split(e.sep),i=[],o=0;o<n.length;o++){var a=n[o];"."!==a&&(".."===a&&(r||!r&&i.length>0&&".."!==i[0])?i.pop():i.push(a))}if(!r&&i.length<2)if(1===i.length)""===i[0]&&i.unshift(".");else i.push(".");return t=i.join(e.sep),r&&t.charAt(0)!==e.sep&&(t=e.sep+t),t},e.join=function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];for(var n=[],i=0;i<t.length;i++){var o=t[i];if("string"!=typeof o)throw new TypeError("Invalid argument type to path.join: "+typeof o);""!==o&&n.push(o)}return e.normalize(n.join(e.sep))},e.resolve=function(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];for(var i=[],o=0;o<r.length;o++){var a=r[o];if("string"!=typeof a)throw new TypeError("Invalid argument type to path.join: "+typeof a);""!==a&&(a.charAt(0)===e.sep&&(i=[]),i.push(a))}var s=e.normalize(i.join(e.sep));if(s.length>1&&s.charAt(s.length-1)===e.sep)return s.substr(0,s.length-1);if(s.charAt(0)!==e.sep){"."!==s.charAt(0)||1!==s.length&&s.charAt(1)!==e.sep||(s=1===s.length?"":s.substr(2));var c=t.cwd();s=""!==s?this.normalize(c+("/"!==c?e.sep:"")+s):c}return s},e.relative=function(t,r){var n;t=e.resolve(t),r=e.resolve(r);var i=t.split(e.sep),o=r.split(e.sep);o.shift(),i.shift();var a=0,s=[];for(n=0;n<i.length;n++){if(i[n]!==o[n]){a=i.length-n;break}}s=o.slice(n),1===i.length&&""===i[0]&&(a=0),a>i.length&&(a=i.length);var c="";for(n=0;n<a;n++)c+="../";return(c+=s.join(e.sep)).length>1&&c.charAt(c.length-1)===e.sep&&(c=c.substr(0,c.length-1)),c},e.dirname=function(t){var r=(t=e._removeDuplicateSeps(t)).charAt(0)===e.sep,n=t.split(e.sep);return""===n.pop()&&n.length>0&&n.pop(),n.length>1||1===n.length&&!r?n.join(e.sep):r?e.sep:"."},e.basename=function(t,r){if(void 0===r&&(r=""),""===t)return t;var n=(t=e.normalize(t)).split(e.sep),i=n[n.length-1];if(""===i&&n.length>1)return n[n.length-2];if(r.length>0&&i.substr(i.length-r.length)===r)return i.substr(0,i.length-r.length);return i},e.extname=function(t){var r=(t=e.normalize(t)).split(e.sep);if(""===(t=r.pop())&&r.length>0&&(t=r.pop()),".."===t)return"";var n=t.lastIndexOf(".");return-1===n||0===n?"":t.substr(n)},e.isAbsolute=function(t){return t.length>0&&t.charAt(0)===e.sep},e._makeLong=function(e){return e},e.parse=function(e){var t=function(e){var t=r.exec(e);return t.shift(),t}(e);return{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},e.format=function(t){if(null===t||"object"!=typeof t)throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);if("string"!=typeof(t.root||""))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);return(t.dir?t.dir+e.sep:"")+(t.base||"")},e._removeDuplicateSeps=function(e){return e=e.replace(this._replaceRegex,this.sep)},e.sep="/",e._replaceRegex=new RegExp("//+","g"),e.delimiter=":",e.posix=e,e.win32=e,e}();e.exports=n}).call(t,r(6))},function(e,t,r){(function(t){"use strict";var n=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=function(e){function r(){e.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1}return n(r,e),r.prototype.setRawMode=function(e){this.isRaw!==e&&(this.isRaw=e,this.emit("modeChange"))},r.prototype.changeColumns=function(e){e!==this.columns&&(this.columns=e,this.emit("resize"))},r.prototype.changeRows=function(e){e!==this.rows&&(this.rows=e,this.emit("resize"))},r.isatty=function(e){return e&&e instanceof r},r.prototype._write=function(e,r,n){var i;try{var o;o="string"==typeof e?new t(e,r):e,this._bufferedWrites.push(o),this._waitingForWrites&&this._read(1024)}catch(e){i=e}finally{n(i)}},r.prototype._read=function(e){if(0===this._bufferedWrites.length)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),this._waitingForWrites););},r}(r(11).Duplex);e.exports=i}).call(t,r(1))},function(e,t,r){e.exports=i;var n=r(8).EventEmitter;function i(){n.call(this)}r(12)(i,n),i.Readable=r(13),i.Writable=r(27),i.Duplex=r(28),i.Transform=r(29),i.PassThrough=r(30),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",c));var a=!1;function s(){a||(a=!0,e.end())}function c(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(l(),0===n.listenerCount(this,"error"))throw e}function l(){r.removeListener("data",i),e.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",c),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",l),r.removeListener("close",l),e.removeListener("close",l)}return r.on("error",u),e.on("error",u),r.on("end",l),r.on("close",l),e.on("close",l),e.emit("pipe",r),e}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){(function(n){var i=function(){try{return r(11)}catch(e){}}();(t=e.exports=r(14)).Stream=i||t,t.Readable=t,t.Writable=r(22),t.Duplex=r(21),t.Transform=r(25),t.PassThrough=r(26),!n.browser&&"disable"===n.env.READABLE_STREAM&&i&&(e.exports=i)}).call(t,r(6))},function(e,t,r){(function(t){"use strict";e.exports=_;var n,i=r(15),o=r(16);_.ReadableState=m;r(8).EventEmitter;var a,s=function(e,t){return e.listeners(t).length};!function(){try{a=r(11)}catch(e){}finally{a||(a=r(8).EventEmitter)}}();var c=r(2).Buffer,u=r(17),l=r(18);l.inherits=r(12);var f=r(19),d=void 0;d=f&&f.debuglog?f.debuglog("stream"):function(){};var h,p=r(20);function m(e,t){n=n||r(21),e=e||{},this.objectMode=!!e.objectMode,t instanceof n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(h||(h=r(24).StringDecoder),this.decoder=new h(e.encoding),this.encoding=e.encoding)}function _(e){if(n=n||r(21),!(this instanceof _))return new _(e);this._readableState=new m(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),a.call(this)}function g(e,t,r,n,o){var a=function(e,t){var r=null;c.isBuffer(t)||"string"==typeof t||null==t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(t,r);if(a)e.emit("error",a);else if(null===r)t.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,E(e)}(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!o){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&o){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else{var l;!t.decoder||o||n||(r=t.decoder.write(r),l=!t.objectMode&&0===r.length),o||(t.reading=!1),l||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,o?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&E(e))),function(e,t){t.readingMore||(t.readingMore=!0,i(S,e,t))}(e,t)}else o||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}l.inherits(_,a),_.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=u.from(e,t),t=""),g(this,r,e,t,!1)},_.prototype.unshift=function(e){return g(this,this._readableState,e,"",!0)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){return h||(h=r(24).StringDecoder),this._readableState.decoder=new h(e),this._readableState.encoding=e,this};var y=8388608;function v(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=y?e=y:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function E(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i(w,e):w(e))}function w(e){d("emit readable"),e.emit("readable"),k(e)}function S(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function b(e){d("readable nexttick read 0"),e.read(0)}function F(e,t){t.reading||(d("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),k(e),t.flowing&&!t.reading&&e.read(0)}function k(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function A(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=u.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),0===(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function L(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i(x,t,e))}function x(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function T(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}_.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):E(this),null;if(0===(e=v(e,t))&&t.ended)return 0===t.length&&L(this),null;var n,i=t.needReadable;return d("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&d("length less than watermark",i=!0),t.ended||t.reading?d("reading or ended",i=!1):i&&(d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=v(r,t))),null===(n=e>0?A(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&L(this)),null!==n&&this.emit("data",n),n},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(e,r){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,d("pipe count=%d opts=%j",a.pipesCount,r);var c=(!r||!1!==r.end)&&e!==t.stdout&&e!==t.stderr?l:p;function u(e){d("onunpipe"),e===n&&p()}function l(){d("onend"),e.end()}a.endEmitted?i(c):n.once("end",c),e.on("unpipe",u);var f=function(e){return function(){var t=e._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,k(e))}}(n);e.on("drain",f);var h=!1;function p(){d("cleanup"),e.removeListener("close",y),e.removeListener("finish",v),e.removeListener("drain",f),e.removeListener("error",g),e.removeListener("unpipe",u),n.removeListener("end",l),n.removeListener("end",p),n.removeListener("data",_),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||f()}var m=!1;function _(t){d("ondata"),m=!1,!1!==e.write(t)||m||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==T(a.pipes,e))&&!h&&(d("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,m=!0),n.pause())}function g(t){d("onerror",t),E(),e.removeListener("error",g),0===s(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",v),E()}function v(){d("onfinish"),e.removeListener("close",y),E()}function E(){d("unpipe"),n.unpipe(e)}return n.on("data",_),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",g),e.once("close",y),e.once("finish",v),e.emit("pipe",n),a.flowing||(d("pipe resume"),n.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=T(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},_.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&E(this):i(b,this))}return r},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(d("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i(F,e,t))}(this,e)),this},_.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",(function(){if(d("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)})),e.on("data",(function(i){(d("wrapped data"),t.decoder&&(i=t.decoder.write(i)),t.objectMode&&null==i)||(t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}(["error","close","destroy","pause","resume"],(function(t){e.on(t,n.emit.bind(n,t))})),n._read=function(t){d("wrapped _read",t),r&&(r=!1,e.resume())},n},_._fromList=A}).call(t,r(6))},function(e,t,r){(function(t){"use strict";!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=function(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,n)}));case 4:return t.nextTick((function(){e.call(null,r,n,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick((function(){e.apply(null,o)}))}}:e.exports=t.nextTick}).call(t,r(6))},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(function(e){"use strict";var n=r(2),i=n.Buffer,o=n.SlowBuffer,a=n.kMaxLength||2147483647;t.alloc=function(e,t,r){if("function"==typeof i.alloc)return i.alloc(e,t,r);if("number"==typeof r)throw new TypeError("encoding must not be number");if("number"!=typeof e)throw new TypeError("size must be a number");if(e>a)throw new RangeError("size is too large");var n=r,o=t;void 0===o&&(n=void 0,o=0);var s=new i(e);if("string"==typeof o)for(var c=new i(o,n),u=c.length,l=-1;++l<e;)s[l]=c[l%u];else s.fill(o);return s},t.allocUnsafe=function(e){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>a)throw new RangeError("size is too large");return new i(e)},t.from=function(t,r,n){if("function"==typeof i.from&&(!e.Uint8Array||Uint8Array.from!==i.from))return i.from(t,r,n);if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("string"==typeof t)return new i(t,r);if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var o=r;if(1===arguments.length)return new i(t);void 0===o&&(o=0);var a=n;if(void 0===a&&(a=t.byteLength-o),o>=t.byteLength)throw new RangeError("'offset' is out of bounds");if(a>t.byteLength-o)throw new RangeError("'length' is out of bounds");return new i(t.slice(o,o+a))}if(i.isBuffer(t)){var s=new i(t.length);return t.copy(s,0,0,t.length),s}if(t){if(Array.isArray(t)||"undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return new i(t);if("Buffer"===t.type&&Array.isArray(t.data))return new i(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},t.allocUnsafeSlow=function(e){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>=a)throw new RangeError("size is too large");return new o(e)}}).call(t,function(){return this}())},function(e,t,r){(function(e){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(t,r(1))},function(e,t){},function(e,t,r){"use strict";r(2).Buffer;var n=r(17);function i(){this.head=null,this.tail=null,this.length=0}e.exports=i,i.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},i.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},i.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},i.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t=n.allocUnsafe(e>>>0),r=this.head,i=0;r;)r.data.copy(t,i),i+=r.data.length,r=r.next;return t}},function(e,t,r){"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=f;var i=r(15),o=r(18);o.inherits=r(12);var a=r(14),s=r(22);o.inherits(f,a);for(var c=n(s.prototype),u=0;u<c.length;u++){var l=c[u];f.prototype[l]||(f.prototype[l]=s.prototype[l])}function f(e){if(!(this instanceof f))return new f(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||i(h,this)}function h(e){e.end()}},function(e,t,r){(function(t){"use strict";e.exports=m;var n,i=r(15),o=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?setImmediate:i;m.WritableState=p;var a=r(18);a.inherits=r(12);var s,c={deprecate:r(23)};!function(){try{s=r(11)}catch(e){}finally{s||(s=r(8).EventEmitter)}}();var u,l=r(2).Buffer,f=r(17);function d(){}function h(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function p(e,t){n=n||r(21),e=e||{},this.objectMode=!!e.objectMode,t instanceof n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var a=e.highWaterMark,s=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:s,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var c=!1===e.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,a=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,o){--t.pendingcb,r?i(o,n):o(n);e._writableState.errorEmitted=!0,e.emit("error",n)}(e,r,n,t,a);else{var s=v(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||y(e,r),n?o(g,e,r,s,a):g(e,r,s,a)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new S(this)}function m(e){if(n=n||r(21),!(u.call(m,this)||this instanceof n))return new m(e);this._writableState=new p(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),s.call(this)}function _(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function g(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),w(e,t)}function y(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var a=0;r;)i[a]=r,r=r.next,a+=1;_(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new S(t)}else{for(;r;){var s=r.chunk,c=r.encoding,u=r.callback;if(_(e,t,!1,t.objectMode?1:s.length,s,c,u),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function v(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function w(e,t){var r=v(t);return r&&(0===t.pendingcb?(E(e,t),t.finished=!0,e.emit("finish")):E(e,t)),r}function S(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}a.inherits(m,s),p.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(p.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||e&&e._writableState instanceof p}})):u=function(e){return e instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(e,t,r){var n=this._writableState,o=!1,a=l.isBuffer(e);return"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=d),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),i(t,r)}(this,r):(a||function(e,t,r,n){var o=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),i(n,a),o=!1),o}(this,n,e,r))&&(n.pendingcb++,o=function(e,t,r,n,i,o){r||(n=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,r));return t}(t,n,i),l.isBuffer(n)&&(i="buffer"));var a=t.objectMode?1:n.length;t.length+=a;var s=t.length<t.highWaterMark;s||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest=new h(n,i,o),c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else _(e,t,!1,a,n,i,o);return s}(this,n,a,e,t,r)),o},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||y(this,e))},m.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},m.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,w(e,t),r&&(t.finished?i(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)}}).call(t,r(6))},function(e,t){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(t,function(){return this}())},function(e,t,r){var n=r(2).Buffer,i=n.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};var o=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!i(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=c;break;default:return void(this.write=a)}this.charBuffer=new n(6),this.charReceived=0,this.charLength=0};function a(e){return e.toString(this.encoding)}function s(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function c(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}o.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived);var i;n=(t+=e.toString(this.encoding,0,n)).length-1;if((i=t.charCodeAt(n))>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,n)}return t},o.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},o.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},function(e,t,r){"use strict";e.exports=a;var n=r(21),i=r(18);function o(e){this.afterTransform=function(t,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!=r&&e.push(r);i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function a(e){if(!(this instanceof a))return new a(e);n.call(this,e),this._transformState=new o(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(e,r){s(t,e,r)})):s(t)}))}function s(e,t,r){if(t)return e.emit("error",t);null!=r&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=r(12),i.inherits(a,n),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(e,t,r){"use strict";e.exports=o;var n=r(25),i=r(18);function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}i.inherits=r(12),i.inherits(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){e.exports=r(22)},function(e,t,r){e.exports=r(21)},function(e,t,r){e.exports=r(25)},function(e,t,r){e.exports=r(26)},function(e,t,r){"use strict";var n=r(32),i=r(33),o=r(38),a=r(39),s=r(40),c=r(41),u=r(42),l=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==a.Z_OK)throw new Error(s[r]);this.header=new u,n.inflateGetHeader(this.strm,this.header)}function d(e,t){var r=new f(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}f.prototype.push=function(e,t){var r,s,c,u,f,d,h=this.strm,p=this.options.chunkSize,m=this.options.dictionary,_=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?h.input=o.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(p),h.next_out=0,h.avail_out=p),(r=n.inflate(h,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(d="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===l.call(m)?new Uint8Array(m):m,r=n.inflateSetDictionary(this.strm,d)),r===a.Z_BUF_ERROR&&!0===_&&(r=a.Z_OK,_=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&r!==a.Z_STREAM_END&&(0!==h.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(c=o.utf8border(h.output,h.next_out),u=h.next_out-c,f=o.buf2string(h.output,c),h.next_out=u,h.avail_out=p-u,u&&i.arraySet(h.output,h.output,c,u,0),this.onData(f)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(_=!0)}while((h.avail_in>0||0===h.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),h.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=f,t.inflate=d,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},t.ungzip=d},function(e,t,r){"use strict";var n=r(33),i=r(34),o=r(35),a=r(36),s=r(37),c=-2,u=12,l=30;function f(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function d(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function h(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(852),t.distcode=t.distdyn=new n.Buf32(592),t.sane=1,t.back=-1,0):c}function p(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,h(e)):c}function m(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?c:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,p(e))):c}function _(e,t){var r,n;return e?(n=new d,e.state=n,n.window=null,0!==(r=m(e,t))&&(e.state=null),r):c}var g,y,v=!0;function E(e){if(v){var t;for(g=new n.Buf32(512),y=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,g,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,y,0,e.work,{bits:5}),v=!1}e.lencode=g,e.lenbits=9,e.distcode=y,e.distbits=5}function w(e,t,r,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),i>=a.wsize?(n.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),n.arraySet(a.window,t,r-i,o,a.wnext),(i-=o)?(n.arraySet(a.window,t,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}t.inflateReset=p,t.inflateReset2=m,t.inflateResetKeep=h,t.inflateInit=function(e){return _(e,15)},t.inflateInit2=_,t.inflate=function(e,t){var r,d,h,p,m,_,g,y,v,S,b,F,k,A,L,x,T,P,C,O,R,D,I,N,M=0,B=new n.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return c;(r=e.state).mode===u&&(r.mode=13),m=e.next_out,h=e.output,g=e.avail_out,p=e.next_in,d=e.input,_=e.avail_in,y=r.hold,v=r.bits,S=_,b=g,D=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;v<16;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}if(2&r.wrap&&35615===y){r.check=0,B[0]=255&y,B[1]=y>>>8&255,r.check=o(r.check,B,2,0),y=0,v=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&y)<<8)+(y>>8))%31){e.msg="incorrect header check",r.mode=l;break}if(8!=(15&y)){e.msg="unknown compression method",r.mode=l;break}if(v-=4,R=8+(15&(y>>>=4)),0===r.wbits)r.wbits=R;else if(R>r.wbits){e.msg="invalid window size",r.mode=l;break}r.dmax=1<<R,e.adler=r.check=1,r.mode=512&y?10:u,y=0,v=0;break;case 2:for(;v<16;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}if(r.flags=y,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=l;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=l;break}r.head&&(r.head.text=y>>8&1),512&r.flags&&(B[0]=255&y,B[1]=y>>>8&255,r.check=o(r.check,B,2,0)),y=0,v=0,r.mode=3;case 3:for(;v<32;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}r.head&&(r.head.time=y),512&r.flags&&(B[0]=255&y,B[1]=y>>>8&255,B[2]=y>>>16&255,B[3]=y>>>24&255,r.check=o(r.check,B,4,0)),y=0,v=0,r.mode=4;case 4:for(;v<16;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}r.head&&(r.head.xflags=255&y,r.head.os=y>>8),512&r.flags&&(B[0]=255&y,B[1]=y>>>8&255,r.check=o(r.check,B,2,0)),y=0,v=0,r.mode=5;case 5:if(1024&r.flags){for(;v<16;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}r.length=y,r.head&&(r.head.extra_len=y),512&r.flags&&(B[0]=255&y,B[1]=y>>>8&255,r.check=o(r.check,B,2,0)),y=0,v=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((F=r.length)>_&&(F=_),F&&(r.head&&(R=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,d,p,F,R)),512&r.flags&&(r.check=o(r.check,d,F,p)),_-=F,p+=F,r.length-=F),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===_)break e;F=0;do{R=d[p+F++],r.head&&R&&r.length<65536&&(r.head.name+=String.fromCharCode(R))}while(R&&F<_);if(512&r.flags&&(r.check=o(r.check,d,F,p)),_-=F,p+=F,R)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===_)break e;F=0;do{R=d[p+F++],r.head&&R&&r.length<65536&&(r.head.comment+=String.fromCharCode(R))}while(R&&F<_);if(512&r.flags&&(r.check=o(r.check,d,F,p)),_-=F,p+=F,R)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;v<16;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}if(y!==(65535&r.check)){e.msg="header crc mismatch",r.mode=l;break}y=0,v=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=u;break;case 10:for(;v<32;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}e.adler=r.check=f(y),y=0,v=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=m,e.avail_out=g,e.next_in=p,e.avail_in=_,r.hold=y,r.bits=v,2;e.adler=r.check=1,r.mode=u;case u:if(5===t||6===t)break e;case 13:if(r.last){y>>>=7&v,v-=7&v,r.mode=27;break}for(;v<3;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}switch(r.last=1&y,v-=1,3&(y>>>=1)){case 0:r.mode=14;break;case 1:if(E(r),r.mode=20,6===t){y>>>=2,v-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=l}y>>>=2,v-=2;break;case 14:for(y>>>=7&v,v-=7&v;v<32;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}if((65535&y)!=(y>>>16^65535)){e.msg="invalid stored block lengths",r.mode=l;break}if(r.length=65535&y,y=0,v=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(F=r.length){if(F>_&&(F=_),F>g&&(F=g),0===F)break e;n.arraySet(h,d,p,F,m),_-=F,p+=F,g-=F,m+=F,r.length-=F;break}r.mode=u;break;case 17:for(;v<14;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}if(r.nlen=257+(31&y),y>>>=5,v-=5,r.ndist=1+(31&y),y>>>=5,v-=5,r.ncode=4+(15&y),y>>>=4,v-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=l;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;v<3;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}r.lens[U[r.have++]]=7&y,y>>>=3,v-=3}for(;r.have<19;)r.lens[U[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},D=s(0,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,D){e.msg="invalid code lengths set",r.mode=l;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;x=(M=r.lencode[y&(1<<r.lenbits)-1])>>>16&255,T=65535&M,!((L=M>>>24)<=v);){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}if(T<16)y>>>=L,v-=L,r.lens[r.have++]=T;else{if(16===T){for(N=L+2;v<N;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}if(y>>>=L,v-=L,0===r.have){e.msg="invalid bit length repeat",r.mode=l;break}R=r.lens[r.have-1],F=3+(3&y),y>>>=2,v-=2}else if(17===T){for(N=L+3;v<N;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}v-=L,R=0,F=3+(7&(y>>>=L)),y>>>=3,v-=3}else{for(N=L+7;v<N;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}v-=L,R=0,F=11+(127&(y>>>=L)),y>>>=7,v-=7}if(r.have+F>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=l;break}for(;F--;)r.lens[r.have++]=R}}if(r.mode===l)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=l;break}if(r.lenbits=9,I={bits:r.lenbits},D=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,D){e.msg="invalid literal/lengths set",r.mode=l;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},D=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,D){e.msg="invalid distances set",r.mode=l;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(_>=6&&g>=258){e.next_out=m,e.avail_out=g,e.next_in=p,e.avail_in=_,r.hold=y,r.bits=v,a(e,b),m=e.next_out,h=e.output,g=e.avail_out,p=e.next_in,d=e.input,_=e.avail_in,y=r.hold,v=r.bits,r.mode===u&&(r.back=-1);break}for(r.back=0;x=(M=r.lencode[y&(1<<r.lenbits)-1])>>>16&255,T=65535&M,!((L=M>>>24)<=v);){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}if(x&&0==(240&x)){for(P=L,C=x,O=T;x=(M=r.lencode[O+((y&(1<<P+C)-1)>>P)])>>>16&255,T=65535&M,!(P+(L=M>>>24)<=v);){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}y>>>=P,v-=P,r.back+=P}if(y>>>=L,v-=L,r.back+=L,r.length=T,0===x){r.mode=26;break}if(32&x){r.back=-1,r.mode=u;break}if(64&x){e.msg="invalid literal/length code",r.mode=l;break}r.extra=15&x,r.mode=22;case 22:if(r.extra){for(N=r.extra;v<N;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}r.length+=y&(1<<r.extra)-1,y>>>=r.extra,v-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;x=(M=r.distcode[y&(1<<r.distbits)-1])>>>16&255,T=65535&M,!((L=M>>>24)<=v);){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}if(0==(240&x)){for(P=L,C=x,O=T;x=(M=r.distcode[O+((y&(1<<P+C)-1)>>P)])>>>16&255,T=65535&M,!(P+(L=M>>>24)<=v);){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}y>>>=P,v-=P,r.back+=P}if(y>>>=L,v-=L,r.back+=L,64&x){e.msg="invalid distance code",r.mode=l;break}r.offset=T,r.extra=15&x,r.mode=24;case 24:if(r.extra){for(N=r.extra;v<N;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}r.offset+=y&(1<<r.extra)-1,y>>>=r.extra,v-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=l;break}r.mode=25;case 25:if(0===g)break e;if(F=b-g,r.offset>F){if((F=r.offset-F)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=l;break}F>r.wnext?(F-=r.wnext,k=r.wsize-F):k=r.wnext-F,F>r.length&&(F=r.length),A=r.window}else A=h,k=m-r.offset,F=r.length;F>g&&(F=g),g-=F,r.length-=F;do{h[m++]=A[k++]}while(--F);0===r.length&&(r.mode=21);break;case 26:if(0===g)break e;h[m++]=r.length,g--,r.mode=21;break;case 27:if(r.wrap){for(;v<32;){if(0===_)break e;_--,y|=d[p++]<<v,v+=8}if(b-=g,e.total_out+=b,r.total+=b,b&&(e.adler=r.check=r.flags?o(r.check,h,b,m-b):i(r.check,h,b,m-b)),b=g,(r.flags?y:f(y))!==r.check){e.msg="incorrect data check",r.mode=l;break}y=0,v=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;v<32;){if(0===_)break e;_--,y+=d[p++]<<v,v+=8}if(y!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=l;break}y=0,v=0}r.mode=29;case 29:D=1;break e;case l:D=-3;break e;case 31:return-4;default:return c}return e.next_out=m,e.avail_out=g,e.next_in=p,e.avail_in=_,r.hold=y,r.bits=v,(r.wsize||b!==e.avail_out&&r.mode<l&&(r.mode<27||4!==t))&&w(e,e.output,e.next_out,b-e.avail_out)?(r.mode=31,-4):(S-=e.avail_in,b-=e.avail_out,e.total_in+=S,e.total_out+=b,r.total+=b,r.wrap&&b&&(e.adler=r.check=r.flags?o(r.check,h,b,e.next_out-b):i(r.check,h,b,e.next_out-b)),e.data_type=r.bits+(r.last?64:0)+(r.mode===u?128:0)+(20===r.mode||15===r.mode?256:0),(0===S&&0===b||4===t)&&0===D&&(D=-5),D)},t.inflateEnd=function(e){if(!e||!e.state)return c;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?c:(r.head=t,t.done=!1,0):c},t.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?c:11===r.mode&&i(1,t,n,0)!==r.check?-3:w(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,0):c},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){var t,r,n,i,o,a;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(a=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)o=e[t],a.set(o,i),i+=o.length;return a}},i={arraySet:function(e,t,r,n,i){for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,n)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(r)},function(e,t){"use strict";e.exports=function(e,t,r,n){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{o=o+(i=i+t[n++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},function(e,t){"use strict";var r=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},function(e,t){"use strict";e.exports=function(e,t){var r,n,i,o,a,s,c,u,l,f,d,h,p,m,_,g,y,v,E,w,S,b,F,k,A;r=e.state,n=e.next_in,k=e.input,i=n+(e.avail_in-5),o=e.next_out,A=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),c=r.dmax,u=r.wsize,l=r.whave,f=r.wnext,d=r.window,h=r.hold,p=r.bits,m=r.lencode,_=r.distcode,g=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{p<15&&(h+=k[n++]<<p,p+=8,h+=k[n++]<<p,p+=8),v=m[h&g];t:for(;;){if(h>>>=E=v>>>24,p-=E,0===(E=v>>>16&255))A[o++]=65535&v;else{if(!(16&E)){if(0==(64&E)){v=m[(65535&v)+(h&(1<<E)-1)];continue t}if(32&E){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}w=65535&v,(E&=15)&&(p<E&&(h+=k[n++]<<p,p+=8),w+=h&(1<<E)-1,h>>>=E,p-=E),p<15&&(h+=k[n++]<<p,p+=8,h+=k[n++]<<p,p+=8),v=_[h&y];r:for(;;){if(h>>>=E=v>>>24,p-=E,!(16&(E=v>>>16&255))){if(0==(64&E)){v=_[(65535&v)+(h&(1<<E)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(S=65535&v,p<(E&=15)&&(h+=k[n++]<<p,(p+=8)<E&&(h+=k[n++]<<p,p+=8)),(S+=h&(1<<E)-1)>c){e.msg="invalid distance too far back",r.mode=30;break e}if(h>>>=E,p-=E,S>(E=o-a)){if((E=S-E)>l&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(b=0,F=d,0===f){if(b+=u-E,E<w){w-=E;do{A[o++]=d[b++]}while(--E);b=o-S,F=A}}else if(f<E){if(b+=u+f-E,(E-=f)<w){w-=E;do{A[o++]=d[b++]}while(--E);if(b=0,f<w){w-=E=f;do{A[o++]=d[b++]}while(--E);b=o-S,F=A}}}else if(b+=f-E,E<w){w-=E;do{A[o++]=d[b++]}while(--E);b=o-S,F=A}for(;w>2;)A[o++]=F[b++],A[o++]=F[b++],A[o++]=F[b++],w-=3;w&&(A[o++]=F[b++],w>1&&(A[o++]=F[b++]))}else{b=o-S;do{A[o++]=A[b++],A[o++]=A[b++],A[o++]=A[b++],w-=3}while(w>2);w&&(A[o++]=A[b++],w>1&&(A[o++]=A[b++]))}break}}break}}while(n<i&&o<s);n-=w=p>>3,h&=(1<<(p-=w<<3))-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=o<s?s-o+257:257-(o-s),r.hold=h,r.bits=p}},function(e,t,r){"use strict";var n=r(33),i=15,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,u,l,f,d,h){var p,m,_,g,y,v,E,w,S,b=h.bits,F=0,k=0,A=0,L=0,x=0,T=0,P=0,C=0,O=0,R=0,D=null,I=0,N=new n.Buf16(16),M=new n.Buf16(16),B=null,U=0;for(F=0;F<=i;F++)N[F]=0;for(k=0;k<u;k++)N[t[r+k]]++;for(x=b,L=i;L>=1&&0===N[L];L--);if(x>L&&(x=L),0===L)return l[f++]=20971520,l[f++]=20971520,h.bits=1,0;for(A=1;A<L&&0===N[A];A++);for(x<A&&(x=A),C=1,F=1;F<=i;F++)if(C<<=1,(C-=N[F])<0)return-1;if(C>0&&(0===e||1!==L))return-1;for(M[1]=0,F=1;F<i;F++)M[F+1]=M[F]+N[F];for(k=0;k<u;k++)0!==t[r+k]&&(d[M[t[r+k]]++]=k);if(0===e?(D=B=d,v=19):1===e?(D=o,I-=257,B=a,U-=257,v=256):(D=s,B=c,v=-1),R=0,k=0,F=A,y=f,T=x,P=0,_=-1,g=(O=1<<x)-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){E=F-P,d[k]<v?(w=0,S=d[k]):d[k]>v?(w=B[U+d[k]],S=D[I+d[k]]):(w=96,S=0),p=1<<F-P,A=m=1<<T;do{l[y+(R>>P)+(m-=p)]=E<<24|w<<16|S|0}while(0!==m);for(p=1<<F-1;R&p;)p>>=1;if(0!==p?(R&=p-1,R+=p):R=0,k++,0==--N[F]){if(F===L)break;F=t[r+d[k]]}if(F>x&&(R&g)!==_){for(0===P&&(P=x),y+=A,C=1<<(T=F-P);T+P<L&&!((C-=N[T+P])<=0);)T++,C<<=1;if(O+=1<<T,1===e&&O>852||2===e&&O>592)return 1;l[_=R&g]=x<<24|T<<16|y-f|0}}return 0!==R&&(l[y+R]=F-P<<24|64<<16|0),h.bits=x,0}},function(e,t,r){"use strict";var n=r(33),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function c(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",a=0;a<t;a++)r+=String.fromCharCode(e[a]);return r}a[254]=a[254]=1,t.string2buf=function(e){var t,r,i,o,a,s=e.length,c=0;for(o=0;o<s;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(c),a=0,o=0;a<c;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},t.buf2binstring=function(e){return c(e,e.length)},t.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t},t.buf2string=function(e,t){var r,n,i,o,s=t||e.length,u=new Array(2*s);for(n=0,r=0;r<s;)if((i=e[r++])<128)u[n++]=i;else if((o=a[i])>4)u[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&r<s;)i=i<<6|63&e[r++],o--;o>1?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return c(u,n)},t.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+a[e[r]]>t?r:t}},function(e,t){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}}])})),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).JSZip=e()}((function(){return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[a]={exports:{}};t[a][0].call(l.exports,(function(e){return i(t[a][1][e]||e)}),l,l.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){"use strict";var n=e("./utils"),i=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,i,a,s,c,u,l=[],f=0,d=e.length,h=d,p="string"!==n.getTypeOf(e);f<e.length;)h=d-f,i=p?(t=e[f++],r=f<d?e[f++]:0,f<d?e[f++]:0):(t=e.charCodeAt(f++),r=f<d?e.charCodeAt(f++):0,f<d?e.charCodeAt(f++):0),a=t>>2,s=(3&t)<<4|r>>4,c=1<h?(15&r)<<2|i>>6:64,u=2<h?63&i:64,l.push(o.charAt(a)+o.charAt(s)+o.charAt(c)+o.charAt(u));return l.join("")},r.decode=function(e){var t,r,n,a,s,c,u=0,l=0,f="data:";if(e.substr(0,f.length)===f)throw new Error("Invalid base64 input, it looks like a data url.");var d,h=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&h--,e.charAt(e.length-2)===o.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=i.uint8array?new Uint8Array(0|h):new Array(0|h);u<e.length;)t=o.indexOf(e.charAt(u++))<<2|(a=o.indexOf(e.charAt(u++)))>>4,r=(15&a)<<4|(s=o.indexOf(e.charAt(u++)))>>2,n=(3&s)<<6|(c=o.indexOf(e.charAt(u++))),d[l++]=t,64!==s&&(d[l++]=r),64!==c&&(d[l++]=n);return d}},{"./support":30,"./utils":32}],2:[function(e,t,r){"use strict";var n=e("./external"),i=e("./stream/DataWorker"),o=e("./stream/DataLengthProbe"),a=e("./stream/Crc32Probe");function s(e,t,r,n,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=i}o=e("./stream/DataLengthProbe"),s.prototype={getContentWorker:function(){var e=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,r){return e.pipe(new a).pipe(new o("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){"use strict";var n=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(e){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){"use strict";var n=e("./utils"),i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?function(e,t,r,n){var o=i,a=0+r;e^=-1;for(var s=0;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}(0|t,e,e.length):function(e,t,r,n){var o=i,a=0+r;e^=-1;for(var s=0;s<a;s++)e=e>>>8^o[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){"use strict";var n;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:37}],7:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),o=e("./utils"),a=e("./stream/GenericWorker"),s=n?"uint8array":"array";function c(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",o.inherits(c,a),c.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,e.data),!1)},c.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(e){return new c("Deflate",e)},r.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){"use strict";function n(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n}function i(e,t,r,i,a,l){var f,d,h=e.file,p=e.compression,m=l!==s.utf8encode,_=o.transformTo("string",l(h.name)),g=o.transformTo("string",s.utf8encode(h.name)),y=h.comment,v=o.transformTo("string",l(y)),E=o.transformTo("string",s.utf8encode(y)),w=g.length!==h.name.length,S=E.length!==y.length,b="",F="",k="",A=h.dir,L=h.date,x={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(x.crc32=e.crc32,x.compressedSize=e.compressedSize,x.uncompressedSize=e.uncompressedSize);var T=0;t&&(T|=8),m||!w&&!S||(T|=2048);var P=0,C=0;A&&(P|=16),"UNIX"===a?(C=798,P|=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16}(h.unixPermissions,A)):(C=20,P|=function(e){return 63&(e||0)}(h.dosPermissions)),f=L.getUTCHours(),f<<=6,f|=L.getUTCMinutes(),f<<=5,f|=L.getUTCSeconds()/2,d=L.getUTCFullYear()-1980,d<<=4,d|=L.getUTCMonth()+1,d<<=5,d|=L.getUTCDate(),w&&(F=n(1,1)+n(c(_),4)+g,b+="up"+n(F.length,2)+F),S&&(k=n(1,1)+n(c(v),4)+E,b+="uc"+n(k.length,2)+k);var O="";return O+="\n\0",O+=n(T,2),O+=p.magic,O+=n(f,2),O+=n(d,2),O+=n(x.crc32,4),O+=n(x.compressedSize,4),O+=n(x.uncompressedSize,4),O+=n(_.length,2),O+=n(b.length,2),{fileRecord:u.LOCAL_FILE_HEADER+O+_+b,dirRecord:u.CENTRAL_FILE_HEADER+n(C,2)+O+n(v.length,2)+"\0\0\0\0"+n(P,4)+n(i,4)+_+b+v}}var o=e("../utils"),a=e("../stream/GenericWorker"),s=e("../utf8"),c=e("../crc32"),u=e("../signature");function l(e,t,r,n){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(l,a),l.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},l.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:function(e){return u.DATA_DESCRIPTOR+n(e.crc32,4)+n(e.compressedSize,4)+n(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,i=function(e,t,r,i,a){var s=o.transformTo("string",a(i));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(e,2)+n(e,2)+n(t,4)+n(r,4)+n(s.length,2)+s}(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},l.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){"use strict";var n=e("../compressions"),i=e("./ZipFileWorker");r.generateWorker=function(e,t,r){var o=new i(t.streamFiles,r,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,r){a++;var i=function(e,t){var r=e||t,i=n[r];if(!i)throw new Error(r+" is not a valid compression method !");return i}(r.options.compression,t.compression),s=r.options.compressionOptions||t.compressionOptions||{},c=r.dir,u=r.date;r._compressWorker(i,s).withStreamInfo("file",{name:e,dir:c,date:u,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.5.0",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){"use strict";var n=e("./utils"),i=e("./external"),o=e("./utf8"),a=(n=e("./utils"),e("./zipEntries")),s=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function u(e){return new i.Promise((function(t,r){var n=e.decompressed.getContentWorker().pipe(new s);n.on("error",(function(e){r(e)})).on("end",(function(){n.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var r=this;return t=n.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),c.isNode&&c.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var r=new a(t);return r.load(e),r})).then((function(e){var r=[i.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var o=0;o<n.length;o++)r.push(u(n[o]));return i.Promise.all(r)})).then((function(e){for(var n=e.shift(),i=n.files,o=0;o<i.length;o++){var a=i[o];r.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders})}return n.zipComment.length&&(r.comment=n.zipComment),r}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../stream/GenericWorker");function o(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(o,i),o.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){"use strict";var n=e("readable-stream").Readable;function i(e,t,r){n.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),r&&r(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,r){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){"use strict";function n(e,t,r){var n,i=o.getTypeOf(t),s=o.extend(r||{},c);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=m(e)),s.createFolders&&(n=p(e))&&_.call(this,n,!0);var f="string"===i&&!1===s.binary&&!1===s.base64;r&&void 0!==r.binary||(s.binary=!f),(t instanceof u&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",i="string");var g;g=t instanceof u||t instanceof a?t:d.isNode&&d.isStream(t)?new h(e,t):o.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var y=new l(e,g,s);this.files[e]=y}var i=e("./utf8"),o=e("./utils"),a=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),c=e("./defaults"),u=e("./compressedObject"),l=e("./zipObject"),f=e("./generate"),d=e("./nodejsUtils"),h=e("./nodejs/NodejsStreamInputAdapter"),p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},_=function(e,t){return t=void 0!==t?t:c.createFolders,e=m(e),this.files[e]||n.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function g(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)this.files.hasOwnProperty(t)&&(n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n))},filter:function(e){var t=[];return this.forEach((function(r,n){e(r,n)&&t.push(n)})),t},file:function(e,t,r){if(1!==arguments.length)return e=this.root+e,n.call(this,e,t,r),this;if(g(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var o=this.files[this.root+e];return o&&!o.dir?o:null},folder:function(e){if(!e)return this;if(g(e))return this.filter((function(t,r){return r.dir&&e.test(t)}));var t=this.root+e,r=_.call(this,t),n=this.clone();return n.root=r.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter((function(t,r){return r.name.slice(0,e.length)===e})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");o.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var n=r.comment||this.comment||"";t=f.generateWorker(this,r,n)}catch(e){(t=new a("error")).error(e)}return new s(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){"use strict";var n=e("./DataReader");function i(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===t&&this.data[o+1]===r&&this.data[o+2]===n&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&r===o[1]&&n===o[2]&&i===o[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){"use strict";var n=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,r){"use strict";var n=e("./Uint8ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){"use strict";var n=e("./DataReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){"use strict";var n=e("./ArrayReader");function i(e){n.call(this,e)}e("../utils").inherits(i,n),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){"use strict";var n=e("../utils"),i=e("../support"),o=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new c(n.transformTo("uint8array",e)):new o(n.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,r){"use strict";var n=e("./GenericWorker"),i=e("../utils");function o(e){n.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(o,n),o.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){"use strict";var n=e("./GenericWorker"),i=e("../crc32");function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,n),o.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(o,i),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}n.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){"use strict";function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],29:[function(e,t,r){"use strict";var n=e("../utils"),i=e("./ConvertWorker"),o=e("./GenericWorker"),a=e("../base64"),s=e("../support"),c=e("../external"),u=null;if(s.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function l(e,t,r){var a=t;switch(t){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=t,this._mimeType=r,n.checkSupport(a),this._worker=e.pipe(new i(a)),e.lock()}catch(e){this._worker=new o("error"),this._worker.error(e)}}l.prototype={accumulate:function(e){return function(e,t){return new c.Promise((function(r,i){var o=[],s=e._internalType,c=e._outputType,u=e._mimeType;e.on("data",(function(e,r){o.push(e),t&&t(r)})).on("error",(function(e){o=[],i(e)})).on("end",(function(){try{var e=function(e,t,r){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),r);case"base64":return a.encode(t);default:return n.transformTo(e,t)}}(c,function(e,t){var r,n=0,i=null,o=0;for(r=0;r<t.length;r++)o+=t[r].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(o),r=0;r<t.length;r++)i.set(t[r],n),n+=t[r].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(s,o),u);r(e)}catch(e){i(e)}o=[]})).resume()}))}(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,(function(e){t.call(r,e.data,e.meta)})):this._worker.on(e,(function(){n.delay(t,arguments,r)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof Buffer,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=0===i.getBlob("application/zip").size}catch(e){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(e){r.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,r){"use strict";for(var n=e("./utils"),i=e("./support"),o=e("./nodejsUtils"),a=e("./stream/GenericWorker"),s=new Array(256),c=0;c<256;c++)s[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(){a.call(this,"utf-8 decode"),this.leftOver=null}function l(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,r.utf8encode=function(e){return i.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var t,r,n,o,a,s=e.length,c=0;for(o=0;o<s;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=i.uint8array?new Uint8Array(c):new Array(c),o=a=0;a<c;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),r<128?t[a++]=r:(r<2048?t[a++]=192|r>>>6:(r<65536?t[a++]=224|r>>>12:(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63),t[a++]=128|r>>>6&63),t[a++]=128|63&r);return t}(e)},r.utf8decode=function(e){return i.nodebuffer?n.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,i,o,a=e.length,c=new Array(2*a);for(t=r=0;t<a;)if((i=e[t++])<128)c[r++]=i;else if(4<(o=s[i]))c[r++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&t<a;)i=i<<6|63&e[t++],o--;1<o?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return c.length!==r&&(c.subarray?c=c.subarray(0,r):c.length=r),n.applyFromCharCode(c)}(e=n.transformTo(i.uint8array?"uint8array":"array",e))},n.inherits(u,a),u.prototype.processChunk=function(e){var t=n.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=t;(t=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),t.set(o,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+s[e[r]]>t?r:t}(t),c=t;a!==t.length&&(i.uint8array?(c=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(c=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:r.utf8decode(c),meta:e.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=u,n.inherits(l,a),l.prototype.processChunk=function(e){this.push({data:r.utf8encode(e.data),meta:e.meta})},r.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,r){"use strict";var n=e("./support"),i=e("./base64"),o=e("./nodejsUtils"),a=e("set-immediate-shim"),s=e("./external");function c(e){return e}function u(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}r.newBlob=function(e,t){r.checkSupport("blob");try{return new Blob([e],{type:t})}catch(r){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(e),n.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(e,t,r){var n=[],i=0,o=e.length;if(o<=r)return String.fromCharCode.apply(null,e);for(;i<o;)"array"===t||"nodebuffer"===t?n.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+r,o)))):n.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+r,o)))),i+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function f(e){var t=65536,n=r.getTypeOf(e),i=!0;if("uint8array"===n?i=l.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=l.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return l.stringifyByChunk(e,n,t)}catch(e){t=Math.floor(t/2)}return l.stringifyByChar(e)}function d(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}r.applyFromCharCode=f;var h={};h.string={string:c,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return h.string.uint8array(e).buffer},uint8array:function(e){return u(e,new Uint8Array(e.length))},nodebuffer:function(e){return u(e,o.allocBuffer(e.length))}},h.array={string:f,array:c,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},h.arraybuffer={string:function(e){return f(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:c,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},h.uint8array={string:f,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:c,nodebuffer:function(e){return o.newBufferFrom(e)}},h.nodebuffer={string:f,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return h.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:c},r.transformTo=function(e,t){if(t=t||"",!e)return t;r.checkSupport(e);var n=r.getTypeOf(t);return h[n][e](t)},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&o.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},r.delay=function(e,t,r){a((function(){e.apply(r||null,t||[])}))},r.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},r.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},r.prepareContent=function(e,t,o,a,c){return s.Promise.resolve(t).then((function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise((function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){r(e.target.error)},n.readAsArrayBuffer(e)})):e})).then((function(t){var l=r.getTypeOf(t);return l?("arraybuffer"===l?t=r.transformTo("uint8array",t):"string"===l&&(c?t=i.decode(t):o&&!0!==a&&(t=function(e){return u(e,n.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),o=e("./signature"),a=e("./zipEntry"),s=(e("./utf8"),e("./support"));function c(e){this.files=[],this.loadOptions=e}c.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",r=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(0<n)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){"use strict";var n=e("./reader/readerFor"),i=e("./utils"),o=e("./compressedObject"),a=e("./crc32"),s=e("./utf8"),c=e("./compressions"),u=e("./support");function l(e,t){this.options=e,this.loadOptions=t}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in c)if(c.hasOwnProperty(t)&&c[t].magic===e)return c[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n};e.setIndex(i)},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var o=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){"use strict";function n(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var i=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),a=e("./utf8"),s=e("./compressedObject"),c=e("./stream/GenericWorker");n.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var o=!this._dataBinary;o&&!n&&(t=t.pipe(new a.Utf8EncodeWorker)),!o&&n&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new c("error")).error(e)}return new i(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof c?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<u.length;f++)n.prototype[u[f]]=l;t.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var r,n,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(l),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),r=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,r=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;n=!0;for(var r=u.length;r;){for(t=u,u=[],e=-1;++e<r;)t[e]();r=u.length}n=!1}t.exports=function(e){1!==u.push(e)||n||r()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){"use strict";var n=e("immediate");function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&h(this,e)}function l(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,t,r){n((function(){var n;try{n=t(r)}catch(n){return o.reject(e,n)}n===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,n)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var r=!1;function n(t){r||(r=!0,o.reject(e,t))}function i(t){r||(r=!0,o.resolve(e,t))}var a=p((function(){t(i,n)}));"error"===a.status&&n(a.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=u).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(i);return this.state!==c?f(r,this.state===s?e:t,this.outcome):this.queue.push(new l(r,e,t)),r},l.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){o.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},o.resolve=function(e,t){var r=p(d,t);if("error"===r.status)return o.reject(e,r.value);var n=r.value;if(n)h(e,n);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},u.reject=function(e){var t=new this(i);return o.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var a=new Array(r),s=0,c=-1,u=new this(i);++c<r;)l(e[c],c);return u;function l(e,i){t.resolve(e).then((function(e){a[i]=e,++s!==r||n||(n=!0,o.resolve(u,a))}),(function(e){n||(n=!0,o.reject(u,e))}))}},u.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var n,a=-1,s=new this(i);++a<t;)n=e[a],this.resolve(n).then((function(e){r||(r=!0,o.resolve(s,e))}),(function(e){r||(r=!0,o.reject(s,e))}));return s}},{immediate:36}],38:[function(e,t,r){"use strict";var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){"use strict";var n=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),c=Object.prototype.toString;function u(e){if(!(this instanceof u))return new u(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==r)throw new Error(a[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var l;if(l="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(r=n.deflateSetDictionary(this.strm,l)))throw new Error(a[r]);this._dict_set=!0}}function l(e,t){var r=new u(t);if(r.push(e,!0),r.err)throw r.msg||a[r.err];return r.result}u.prototype.push=function(e,t){var r,a,s=this.strm,u=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===c.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(u),s.next_out=0,s.avail_out=u),1!==(r=n.deflate(s,a))&&0!==r)return this.onEnd(r),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==r);return 4===a?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==a||(this.onEnd(0),!(s.avail_out=0))},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=u,r.deflate=l,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,l(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,l(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){"use strict";var n=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),c=e("./zlib/zstream"),u=e("./zlib/gzheader"),l=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==a.Z_OK)throw new Error(s[r]);this.header=new u,n.inflateGetHeader(this.strm,this.header)}function d(e,t){var r=new f(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}f.prototype.push=function(e,t){var r,s,c,u,f,d,h=this.strm,p=this.options.chunkSize,m=this.options.dictionary,_=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?h.input=o.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(p),h.next_out=0,h.avail_out=p),(r=n.inflate(h,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(d="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===l.call(m)?new Uint8Array(m):m,r=n.inflateSetDictionary(this.strm,d)),r===a.Z_BUF_ERROR&&!0===_&&(r=a.Z_OK,_=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&r!==a.Z_STREAM_END&&(0!==h.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(c=o.utf8border(h.output,h.next_out),u=h.next_out-c,f=o.buf2string(h.output,c),h.next_out=u,h.avail_out=p-u,u&&i.arraySet(h.output,h.output,c,u,0),this.onData(f)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(_=!0)}while((0<h.avail_in||0===h.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(h.avail_out=0))},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=f,r.inflate=d,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},r.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){var t,r,n,i,o,a;for(t=n=0,r=e.length;t<r;t++)n+=e[t].length;for(a=new Uint8Array(n),t=i=0,r=e.length;t<r;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,r,n,i){for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],42:[function(e,t,r){"use strict";var n=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function c(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",a=0;a<t;a++)r+=String.fromCharCode(e[a]);return r}a[254]=a[254]=1,r.string2buf=function(e){var t,r,i,o,a,s=e.length,c=0;for(o=0;o<s;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(c),o=a=0;a<c;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?t[a++]=r:(r<2048?t[a++]=192|r>>>6:(r<65536?t[a++]=224|r>>>12:(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63),t[a++]=128|r>>>6&63),t[a++]=128|63&r);return t},r.buf2binstring=function(e){return c(e,e.length)},r.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,n,i,o,s=t||e.length,u=new Array(2*s);for(r=n=0;r<s;)if((i=e[r++])<128)u[n++]=i;else if(4<(o=a[i]))u[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&r<s;)i=i<<6|63&e[r++],o--;1<o?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return c(u,n)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0||0===r?t:r+a[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;o=o+(i=i+t[n++]|0)|0,--a;);i%=65521,o%=65521}return i|o<<16|0}},{}],44:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){"use strict";var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,i){var o=n,a=i+r;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,r){"use strict";var n,i=e("../utils/common"),o=e("./trees"),a=e("./adler32"),s=e("./crc32"),c=e("./messages"),u=-2,l=258,f=262,d=113;function h(e,t){return e.msg=c[t],t}function p(e){return(e<<1)-(4<e?9:0)}function m(e){for(var t=e.length;0<=--t;)e[t]=0}function _(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(i.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function g(e,t){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,_(e.strm)}function y(e,t){e.pending_buf[e.pending++]=t}function v(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function E(e,t){var r,n,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-f?e.strstart-(e.w_size-f):0,u=e.window,d=e.w_mask,h=e.prev,p=e.strstart+l,m=u[o+a-1],_=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(r=t)+a]===_&&u[r+a-1]===m&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<p);if(n=l-(p-o),o=p-l,a<n){if(e.match_start=t,s<=(a=n))break;m=u[o+a-1],_=u[o+a]}}}while((t=h[t&d])>c&&0!=--i);return a<=e.lookahead?a:e.lookahead}function w(e){var t,r,n,o,c,u,l,d,h,p,m=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-f)){for(i.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=r=e.hash_size;n=e.head[--t],e.head[t]=m<=n?n-m:0,--r;);for(t=r=m;n=e.prev[--t],e.prev[t]=m<=n?n-m:0,--r;);o+=m}if(0===e.strm.avail_in)break;if(u=e.strm,l=e.window,d=e.strstart+e.lookahead,p=void 0,(h=o)<(p=u.avail_in)&&(p=h),r=0===p?0:(u.avail_in-=p,i.arraySet(l,u.input,u.next_in,p,d),1===u.state.wrap?u.adler=a(u.adler,l,p,d):2===u.state.wrap&&(u.adler=s(u.adler,l,p,d)),u.next_in+=p,u.total_in+=p,p),e.lookahead+=r,e.lookahead+e.insert>=3)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+3-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<f&&0!==e.strm.avail_in)}function S(e,t){for(var r,n;;){if(e.lookahead<f){if(w(e),e.lookahead<f&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-f&&(e.match_length=E(e,r)),e.match_length>=3)if(n=o._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(g(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(g(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(g(e,!1),0===e.strm.avail_out)?1:2}function b(e,t){for(var r,n,i;;){if(e.lookahead<f){if(w(e),e.lookahead<f&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-f&&(e.match_length=E(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-3,n=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(g(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=o._tr_tally(e,0,e.window[e.strstart-1]))&&g(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(g(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(g(e,!1),0===e.strm.avail_out)?1:2}function F(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function k(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function A(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:d,e.adler=2===t.wrap?0:1,t.last_flush=0,o._tr_init(t),0):h(e,u)}function L(e){var t=A(e);return 0===t&&function(e){e.window_size=2*e.w_size,m(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function x(e,t,r,n,o,a){if(!e)return u;var s=1;if(-1===t&&(t=6),n<0?(s=0,n=-n):15<n&&(s=2,n-=16),o<1||9<o||8!==r||n<8||15<n||t<0||9<t||a<0||4<a)return h(e,u);8===n&&(n=9);var c=new k;return(e.state=c).strm=e,c.wrap=s,c.gzhead=null,c.w_bits=n,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new i.Buf8(2*c.w_size),c.head=new i.Buf16(c.hash_size),c.prev=new i.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new i.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=a,c.method=r,L(e)}n=[new F(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(w(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,g(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-f&&(g(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(g(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(g(e,!1),e.strm.avail_out),1)})),new F(4,4,8,4,S),new F(4,5,16,8,S),new F(4,6,32,32,S),new F(4,4,16,16,b),new F(8,16,32,32,b),new F(8,16,128,128,b),new F(8,32,128,256,b),new F(32,128,258,1024,b),new F(32,258,258,4096,b)],r.deflateInit=function(e,t){return x(e,t,8,15,8,0)},r.deflateInit2=x,r.deflateReset=L,r.deflateResetKeep=A,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?u:(e.state.gzhead=t,0):u},r.deflate=function(e,t){var r,i,a,c;if(!e||!e.state||5<t||t<0)return e?h(e,u):u;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return h(e,0===e.avail_out?-5:u);if(i.strm=e,r=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,y(i,31),y(i,139),y(i,8),i.gzhead?(y(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),y(i,255&i.gzhead.time),y(i,i.gzhead.time>>8&255),y(i,i.gzhead.time>>16&255),y(i,i.gzhead.time>>24&255),y(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),y(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(y(i,255&i.gzhead.extra.length),y(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(y(i,0),y(i,0),y(i,0),y(i,0),y(i,0),y(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),y(i,3),i.status=d);else{var f=8+(i.w_bits-8<<4)<<8;f|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(f|=32),f+=31-f%31,i.status=d,v(i,f),0!==i.strstart&&(v(i,e.adler>>>16),v(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),_(e),a=i.pending,i.pending!==i.pending_buf_size));)y(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),_(e),a=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,y(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===c&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),_(e),a=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,y(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===c&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&_(e),i.pending+2<=i.pending_buf_size&&(y(i,255&e.adler),y(i,e.adler>>8&255),e.adler=0,i.status=d)):i.status=d),0!==i.pending){if(_(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&p(t)<=p(r)&&4!==t)return h(e,-5);if(666===i.status&&0!==e.avail_in)return h(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var E=2===i.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(w(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(g(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(g(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(g(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var r,n,i,a,s=e.window;;){if(e.lookahead<=l){if(w(e),e.lookahead<=l&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(n=s[i=e.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){a=e.strstart+l;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);e.match_length=l-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=o._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(g(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(g(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(g(e,!1),0===e.strm.avail_out)?1:2}(i,t):n[i.level].func(i,t);if(3!==E&&4!==E||(i.status=666),1===E||3===E)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===E&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(m(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),_(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(y(i,255&e.adler),y(i,e.adler>>8&255),y(i,e.adler>>16&255),y(i,e.adler>>24&255),y(i,255&e.total_in),y(i,e.total_in>>8&255),y(i,e.total_in>>16&255),y(i,e.total_in>>24&255)):(v(i,e.adler>>>16),v(i,65535&e.adler)),_(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},r.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==d&&666!==t?h(e,u):(e.state=null,t===d?h(e,-3):0):u},r.deflateSetDictionary=function(e,t){var r,n,o,s,c,l,f,d,h=t.length;if(!e||!e.state)return u;if(2===(s=(r=e.state).wrap)||1===s&&42!==r.status||r.lookahead)return u;for(1===s&&(e.adler=a(e.adler,t,h,0)),r.wrap=0,h>=r.w_size&&(0===s&&(m(r.head),r.strstart=0,r.block_start=0,r.insert=0),d=new i.Buf8(r.w_size),i.arraySet(d,t,h-r.w_size,r.w_size,0),t=d,h=r.w_size),c=e.avail_in,l=e.next_in,f=e.input,e.avail_in=h,e.next_in=0,e.input=t,w(r);r.lookahead>=3;){for(n=r.strstart,o=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--o;);r.strstart=n,r.lookahead=2,w(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=l,e.input=f,e.avail_in=c,r.wrap=s,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){"use strict";t.exports=function(e,t){var r,n,i,o,a,s,c,u,l,f,d,h,p,m,_,g,y,v,E,w,S,b,F,k,A;r=e.state,n=e.next_in,k=e.input,i=n+(e.avail_in-5),o=e.next_out,A=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),c=r.dmax,u=r.wsize,l=r.whave,f=r.wnext,d=r.window,h=r.hold,p=r.bits,m=r.lencode,_=r.distcode,g=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{p<15&&(h+=k[n++]<<p,p+=8,h+=k[n++]<<p,p+=8),v=m[h&g];t:for(;;){if(h>>>=E=v>>>24,p-=E,0==(E=v>>>16&255))A[o++]=65535&v;else{if(!(16&E)){if(0==(64&E)){v=m[(65535&v)+(h&(1<<E)-1)];continue t}if(32&E){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}w=65535&v,(E&=15)&&(p<E&&(h+=k[n++]<<p,p+=8),w+=h&(1<<E)-1,h>>>=E,p-=E),p<15&&(h+=k[n++]<<p,p+=8,h+=k[n++]<<p,p+=8),v=_[h&y];r:for(;;){if(h>>>=E=v>>>24,p-=E,!(16&(E=v>>>16&255))){if(0==(64&E)){v=_[(65535&v)+(h&(1<<E)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(S=65535&v,p<(E&=15)&&(h+=k[n++]<<p,(p+=8)<E&&(h+=k[n++]<<p,p+=8)),c<(S+=h&(1<<E)-1)){e.msg="invalid distance too far back",r.mode=30;break e}if(h>>>=E,p-=E,(E=o-a)<S){if(l<(E=S-E)&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(F=d,(b=0)===f){if(b+=u-E,E<w){for(w-=E;A[o++]=d[b++],--E;);b=o-S,F=A}}else if(f<E){if(b+=u+f-E,(E-=f)<w){for(w-=E;A[o++]=d[b++],--E;);if(b=0,f<w){for(w-=E=f;A[o++]=d[b++],--E;);b=o-S,F=A}}}else if(b+=f-E,E<w){for(w-=E;A[o++]=d[b++],--E;);b=o-S,F=A}for(;2<w;)A[o++]=F[b++],A[o++]=F[b++],A[o++]=F[b++],w-=3;w&&(A[o++]=F[b++],1<w&&(A[o++]=F[b++]))}else{for(b=o-S;A[o++]=A[b++],A[o++]=A[b++],A[o++]=A[b++],2<(w-=3););w&&(A[o++]=A[b++],1<w&&(A[o++]=A[b++]))}break}}break}}while(n<i&&o<s);n-=w=p>>3,h&=(1<<(p-=w<<3))-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=o<s?s-o+257:257-(o-s),r.hold=h,r.bits=p}},{}],49:[function(e,t,r){"use strict";var n=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),a=e("./inffast"),s=e("./inftrees"),c=-2;function u(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(852),t.distcode=t.distdyn=new n.Buf32(592),t.sane=1,t.back=-1,0):c}function d(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,f(e)):c}function h(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?c:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,d(e))):c}function p(e,t){var r,n;return e?(n=new l,(e.state=n).window=null,0!==(r=h(e,t))&&(e.state=null),r):c}var m,_,g=!0;function y(e){if(g){var t;for(m=new n.Buf32(512),_=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,_,0,e.work,{bits:5}),g=!1}e.lencode=m,e.lenbits=9,e.distcode=_,e.distbits=5}function v(e,t,r,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),i>=a.wsize?(n.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i<(o=a.wsize-a.wnext)&&(o=i),n.arraySet(a.window,t,r-i,o,a.wnext),(i-=o)?(n.arraySet(a.window,t,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}r.inflateReset=d,r.inflateReset2=h,r.inflateResetKeep=f,r.inflateInit=function(e){return p(e,15)},r.inflateInit2=p,r.inflate=function(e,t){var r,l,f,d,h,p,m,_,g,E,w,S,b,F,k,A,L,x,T,P,C,O,R,D,I=0,N=new n.Buf8(4),M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return c;12===(r=e.state).mode&&(r.mode=13),h=e.next_out,f=e.output,m=e.avail_out,d=e.next_in,l=e.input,p=e.avail_in,_=r.hold,g=r.bits,E=p,w=m,O=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;g<16;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}if(2&r.wrap&&35615===_){N[r.check=0]=255&_,N[1]=_>>>8&255,r.check=o(r.check,N,2,0),g=_=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&_)<<8)+(_>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&_)){e.msg="unknown compression method",r.mode=30;break}if(g-=4,C=8+(15&(_>>>=4)),0===r.wbits)r.wbits=C;else if(C>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<C,e.adler=r.check=1,r.mode=512&_?10:12,g=_=0;break;case 2:for(;g<16;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}if(r.flags=_,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=_>>8&1),512&r.flags&&(N[0]=255&_,N[1]=_>>>8&255,r.check=o(r.check,N,2,0)),g=_=0,r.mode=3;case 3:for(;g<32;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}r.head&&(r.head.time=_),512&r.flags&&(N[0]=255&_,N[1]=_>>>8&255,N[2]=_>>>16&255,N[3]=_>>>24&255,r.check=o(r.check,N,4,0)),g=_=0,r.mode=4;case 4:for(;g<16;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}r.head&&(r.head.xflags=255&_,r.head.os=_>>8),512&r.flags&&(N[0]=255&_,N[1]=_>>>8&255,r.check=o(r.check,N,2,0)),g=_=0,r.mode=5;case 5:if(1024&r.flags){for(;g<16;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}r.length=_,r.head&&(r.head.extra_len=_),512&r.flags&&(N[0]=255&_,N[1]=_>>>8&255,r.check=o(r.check,N,2,0)),g=_=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(p<(S=r.length)&&(S=p),S&&(r.head&&(C=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,l,d,S,C)),512&r.flags&&(r.check=o(r.check,l,S,d)),p-=S,d+=S,r.length-=S),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===p)break e;for(S=0;C=l[d+S++],r.head&&C&&r.length<65536&&(r.head.name+=String.fromCharCode(C)),C&&S<p;);if(512&r.flags&&(r.check=o(r.check,l,S,d)),p-=S,d+=S,C)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===p)break e;for(S=0;C=l[d+S++],r.head&&C&&r.length<65536&&(r.head.comment+=String.fromCharCode(C)),C&&S<p;);if(512&r.flags&&(r.check=o(r.check,l,S,d)),p-=S,d+=S,C)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;g<16;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}if(_!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}g=_=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;g<32;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}e.adler=r.check=u(_),g=_=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=h,e.avail_out=m,e.next_in=d,e.avail_in=p,r.hold=_,r.bits=g,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){_>>>=7&g,g-=7&g,r.mode=27;break}for(;g<3;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}switch(r.last=1&_,g-=1,3&(_>>>=1)){case 0:r.mode=14;break;case 1:if(y(r),r.mode=20,6!==t)break;_>>>=2,g-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}_>>>=2,g-=2;break;case 14:for(_>>>=7&g,g-=7&g;g<32;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}if((65535&_)!=(_>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&_,g=_=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(S=r.length){if(p<S&&(S=p),m<S&&(S=m),0===S)break e;n.arraySet(f,l,d,S,h),p-=S,d+=S,m-=S,h+=S,r.length-=S;break}r.mode=12;break;case 17:for(;g<14;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}if(r.nlen=257+(31&_),_>>>=5,g-=5,r.ndist=1+(31&_),_>>>=5,g-=5,r.ncode=4+(15&_),_>>>=4,g-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;g<3;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}r.lens[M[r.have++]]=7&_,_>>>=3,g-=3}for(;r.have<19;)r.lens[M[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,R={bits:r.lenbits},O=s(0,r.lens,0,19,r.lencode,0,r.work,R),r.lenbits=R.bits,O){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;A=(I=r.lencode[_&(1<<r.lenbits)-1])>>>16&255,L=65535&I,!((k=I>>>24)<=g);){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}if(L<16)_>>>=k,g-=k,r.lens[r.have++]=L;else{if(16===L){for(D=k+2;g<D;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}if(_>>>=k,g-=k,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}C=r.lens[r.have-1],S=3+(3&_),_>>>=2,g-=2}else if(17===L){for(D=k+3;g<D;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}g-=k,C=0,S=3+(7&(_>>>=k)),_>>>=3,g-=3}else{for(D=k+7;g<D;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}g-=k,C=0,S=11+(127&(_>>>=k)),_>>>=7,g-=7}if(r.have+S>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;S--;)r.lens[r.have++]=C}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,R={bits:r.lenbits},O=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,R),r.lenbits=R.bits,O){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,R={bits:r.distbits},O=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,R),r.distbits=R.bits,O){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=p&&258<=m){e.next_out=h,e.avail_out=m,e.next_in=d,e.avail_in=p,r.hold=_,r.bits=g,a(e,w),h=e.next_out,f=e.output,m=e.avail_out,d=e.next_in,l=e.input,p=e.avail_in,_=r.hold,g=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;A=(I=r.lencode[_&(1<<r.lenbits)-1])>>>16&255,L=65535&I,!((k=I>>>24)<=g);){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}if(A&&0==(240&A)){for(x=k,T=A,P=L;A=(I=r.lencode[P+((_&(1<<x+T)-1)>>x)])>>>16&255,L=65535&I,!(x+(k=I>>>24)<=g);){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}_>>>=x,g-=x,r.back+=x}if(_>>>=k,g-=k,r.back+=k,r.length=L,0===A){r.mode=26;break}if(32&A){r.back=-1,r.mode=12;break}if(64&A){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&A,r.mode=22;case 22:if(r.extra){for(D=r.extra;g<D;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}r.length+=_&(1<<r.extra)-1,_>>>=r.extra,g-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;A=(I=r.distcode[_&(1<<r.distbits)-1])>>>16&255,L=65535&I,!((k=I>>>24)<=g);){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}if(0==(240&A)){for(x=k,T=A,P=L;A=(I=r.distcode[P+((_&(1<<x+T)-1)>>x)])>>>16&255,L=65535&I,!(x+(k=I>>>24)<=g);){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}_>>>=x,g-=x,r.back+=x}if(_>>>=k,g-=k,r.back+=k,64&A){e.msg="invalid distance code",r.mode=30;break}r.offset=L,r.extra=15&A,r.mode=24;case 24:if(r.extra){for(D=r.extra;g<D;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}r.offset+=_&(1<<r.extra)-1,_>>>=r.extra,g-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===m)break e;if(S=w-m,r.offset>S){if((S=r.offset-S)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}b=S>r.wnext?(S-=r.wnext,r.wsize-S):r.wnext-S,S>r.length&&(S=r.length),F=r.window}else F=f,b=h-r.offset,S=r.length;for(m<S&&(S=m),m-=S,r.length-=S;f[h++]=F[b++],--S;);0===r.length&&(r.mode=21);break;case 26:if(0===m)break e;f[h++]=r.length,m--,r.mode=21;break;case 27:if(r.wrap){for(;g<32;){if(0===p)break e;p--,_|=l[d++]<<g,g+=8}if(w-=m,e.total_out+=w,r.total+=w,w&&(e.adler=r.check=r.flags?o(r.check,f,w,h-w):i(r.check,f,w,h-w)),w=m,(r.flags?_:u(_))!==r.check){e.msg="incorrect data check",r.mode=30;break}g=_=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;g<32;){if(0===p)break e;p--,_+=l[d++]<<g,g+=8}if(_!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}g=_=0}r.mode=29;case 29:O=1;break e;case 30:O=-3;break e;case 31:return-4;default:return c}return e.next_out=h,e.avail_out=m,e.next_in=d,e.avail_in=p,r.hold=_,r.bits=g,(r.wsize||w!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&v(e,e.output,e.next_out,w-e.avail_out)?(r.mode=31,-4):(E-=e.avail_in,w-=e.avail_out,e.total_in+=E,e.total_out+=w,r.total+=w,r.wrap&&w&&(e.adler=r.check=r.flags?o(r.check,f,w,e.next_out-w):i(r.check,f,w,e.next_out-w)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==E&&0===w||4===t)&&0===O&&(O=-5),O)},r.inflateEnd=function(e){if(!e||!e.state)return c;var t=e.state;return t.window&&(t.window=null),e.state=null,0},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?c:((r.head=t).done=!1,0):c},r.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?c:11===r.mode&&i(1,t,n,0)!==r.check?-3:v(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,0):c},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){"use strict";var n=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,c,u,l,f,d){var h,p,m,_,g,y,v,E,w,S=d.bits,b=0,F=0,k=0,A=0,L=0,x=0,T=0,P=0,C=0,O=0,R=null,D=0,I=new n.Buf16(16),N=new n.Buf16(16),M=null,B=0;for(b=0;b<=15;b++)I[b]=0;for(F=0;F<c;F++)I[t[r+F]]++;for(L=S,A=15;1<=A&&0===I[A];A--);if(A<L&&(L=A),0===A)return u[l++]=20971520,u[l++]=20971520,d.bits=1,0;for(k=1;k<A&&0===I[k];k++);for(L<k&&(L=k),b=P=1;b<=15;b++)if(P<<=1,(P-=I[b])<0)return-1;if(0<P&&(0===e||1!==A))return-1;for(N[1]=0,b=1;b<15;b++)N[b+1]=N[b]+I[b];for(F=0;F<c;F++)0!==t[r+F]&&(f[N[t[r+F]]++]=F);if(y=0===e?(R=M=f,19):1===e?(R=i,D-=257,M=o,B-=257,256):(R=a,M=s,-1),b=k,g=l,T=F=O=0,m=-1,_=(C=1<<(x=L))-1,1===e&&852<C||2===e&&592<C)return 1;for(;;){for(v=b-T,w=f[F]<y?(E=0,f[F]):f[F]>y?(E=M[B+f[F]],R[D+f[F]]):(E=96,0),h=1<<b-T,k=p=1<<x;u[g+(O>>T)+(p-=h)]=v<<24|E<<16|w|0,0!==p;);for(h=1<<b-1;O&h;)h>>=1;if(0!==h?(O&=h-1,O+=h):O=0,F++,0==--I[b]){if(b===A)break;b=t[r+f[F]]}if(L<b&&(O&_)!==m){for(0===T&&(T=L),g+=k,P=1<<(x=b-T);x+T<A&&!((P-=I[x+T])<=0);)x++,P<<=1;if(C+=1<<x,1===e&&852<C||2===e&&592<C)return 1;u[m=O&_]=L<<24|x<<16|g-l|0}}return 0!==O&&(u[g+O]=b-T<<24|64<<16|0),d.bits=L,0}},{"../utils/common":41}],51:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){"use strict";var n=e("../utils/common");function i(e){for(var t=e.length;0<=--t;)e[t]=0}var o=256,a=286,s=30,c=15,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],l=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=new Array(576);i(h);var p=new Array(60);i(p);var m=new Array(512);i(m);var _=new Array(256);i(_);var g=new Array(29);i(g);var y,v,E,w=new Array(s);function S(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function b(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function F(e){return e<256?m[e]:m[256+(e>>>7)]}function k(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function A(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,k(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function L(e,t,r){A(e,r[2*t],r[2*t+1])}function x(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function T(e,t,r){var n,i,o=new Array(16),a=0;for(n=1;n<=c;n++)o[n]=a=a+r[n-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=x(o[s]++,s))}}function P(e){var t;for(t=0;t<a;t++)e.dyn_ltree[2*t]=0;for(t=0;t<s;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function C(e){8<e.bi_valid?k(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function O(e,t,r,n){var i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function R(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&O(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!O(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function D(e,t,r){var n,i,a,s,c=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===n?L(e,i,t):(L(e,(a=_[i])+o+1,t),0!==(s=u[a])&&A(e,i-=g[a],s),L(e,a=F(--n),r),0!==(s=l[a])&&A(e,n-=w[a],s)),c<e.last_lit;);L(e,256,t)}function I(e,t){var r,n,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<u;r++)0!==o[2*r]?(e.heap[++e.heap_len]=l=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=l,r=e.heap_len>>1;1<=r;r--)R(e,o,r);for(i=u;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],R(e,o,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,o[2*i]=o[2*r]+o[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,o[2*r+1]=o[2*n+1]=i,e.heap[1]=i++,R(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,o,a,s,u=t.dyn_tree,l=t.max_code,f=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,m=t.stat_desc.max_length,_=0;for(o=0;o<=c;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)m<(o=u[2*u[2*(n=e.heap[r])+1]+1]+1)&&(o=m,_++),u[2*n+1]=o,l<n||(e.bl_count[o]++,a=0,p<=n&&(a=h[n-p]),s=u[2*n],e.opt_len+=s*(o+a),d&&(e.static_len+=s*(f[2*n+1]+a)));if(0!==_){do{for(o=m-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[m]--,_-=2}while(0<_);for(o=m;0!==o;o--)for(n=e.bl_count[o];0!==n;)l<(i=e.heap[--r])||(u[2*i+1]!==o&&(e.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}}(e,t),T(o,l,e.bl_count)}function N(e,t,r){var n,i,o=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++s<c&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=i,u=(s=0)===a?(c=138,3):i===a?(c=6,3):(c=7,4))}function M(e,t,r){var n,i,o=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++s<c&&i===a)){if(s<u)for(;L(e,i,e.bl_tree),0!=--s;);else 0!==i?(i!==o&&(L(e,i,e.bl_tree),s--),L(e,16,e.bl_tree),A(e,s-3,2)):s<=10?(L(e,17,e.bl_tree),A(e,s-3,3)):(L(e,18,e.bl_tree),A(e,s-11,7));o=i,u=(s=0)===a?(c=138,3):i===a?(c=6,3):(c=7,4)}}i(w);var B=!1;function U(e,t,r,i){A(e,0+(i?1:0),3),function(e,t,r,i){C(e),k(e,r),k(e,~r),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r)}r._tr_init=function(e){B||(function(){var e,t,r,n,i,o=new Array(16);for(n=r=0;n<28;n++)for(g[n]=r,e=0;e<1<<u[n];e++)_[r++]=n;for(_[r-1]=n,n=i=0;n<16;n++)for(w[n]=i,e=0;e<1<<l[n];e++)m[i++]=n;for(i>>=7;n<s;n++)for(w[n]=i<<7,e=0;e<1<<l[n]-7;e++)m[256+i++]=n;for(t=0;t<=c;t++)o[t]=0;for(e=0;e<=143;)h[2*e+1]=8,e++,o[8]++;for(;e<=255;)h[2*e+1]=9,e++,o[9]++;for(;e<=279;)h[2*e+1]=7,e++,o[7]++;for(;e<=287;)h[2*e+1]=8,e++,o[8]++;for(T(h,287,o),e=0;e<s;e++)p[2*e+1]=5,p[2*e]=x(e,5);y=new S(h,u,257,a,c),v=new S(p,l,0,s,c),E=new S(new Array(0),f,0,19,7)}(),B=!0),e.l_desc=new b(e.dyn_ltree,y),e.d_desc=new b(e.dyn_dtree,v),e.bl_desc=new b(e.bl_tree,E),e.bi_buf=0,e.bi_valid=0,P(e)},r._tr_stored_block=U,r._tr_flush_block=function(e,t,r,n){var i,a,s=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<o;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),I(e,e.l_desc),I(e,e.d_desc),s=function(e){var t;for(N(e,e.dyn_ltree,e.l_desc.max_code),N(e,e.dyn_dtree,e.d_desc.max_code),I(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*d[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=r+5,r+4<=i&&-1!==t?U(e,t,r,n):4===e.strategy||a===i?(A(e,2+(n?1:0),3),D(e,h,p)):(A(e,4+(n?1:0),3),function(e,t,r,n){var i;for(A(e,t-257,5),A(e,r-1,5),A(e,n-4,4),i=0;i<n;i++)A(e,e.bl_tree[2*d[i]+1],3);M(e,e.dyn_ltree,t-1),M(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),D(e,e.dyn_ltree,e.dyn_dtree)),P(e),n&&C(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(_[r]+o+1)]++,e.dyn_dtree[2*F(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){A(e,2,3),L(e,256,h),function(e){16===e.bi_valid?(k(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){"use strict";t.exports="function"==typeof setImmediate?setImmediate:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}},{}]},{},[10])(10)}));